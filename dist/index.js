/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={67:(e,t,r)=>{"use strict";r.r(t),r.d(t,{clearInterval:()=>p,clearTimeout:()=>g,setInterval:()=>b,setTimeout:()=>_});const s=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,n=1073741824,i=new WeakMap;var o;const a=((e,t)=>r=>{const i=t.get(r);let o=void 0===i?r.size:i<n?i+1:0;if(!r.has(o))return e(r,o);if(r.size<536870912){for(;r.has(o);)o=Math.floor(Math.random()*n);return e(r,o)}if(r.size>s)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(o);)o=Math.floor(Math.random()*s);return e(r,o)})((o=i,(e,t)=>(o.set(e,t),t)),i),c=new WeakMap,l=new WeakMap,u=new Map([[0,null]]),h=new Map([[0,null]]),d=(e=>{const t=(r=e,{...r,connect:({call:e})=>async()=>{const{port1:t,port2:r}=new MessageChannel,s=await e("connect",{port:t},[t]);return c.set(r,s),r},disconnect:({call:e})=>async t=>{const r=c.get(t);if(void 0===r)throw new Error("The given port is not connected.");await e("disconnect",{portId:r})},isSupported:({call:e})=>()=>e("isSupported")});var r;return e=>{const r=(e=>{if(l.has(e))return l.get(e);const t=new Map;return l.set(e,t),t})(e);e.addEventListener("message",({data:e})=>{const{id:t}=e;if(null!==t&&r.has(t)){const{reject:s,resolve:n}=r.get(t);r.delete(t),void 0===e.error?n(e.result):s(new Error(e.error.message))}}),(e=>"function"==typeof e.start)(e)&&e.start();const s=(t,s=null,n=[])=>new Promise((i,o)=>{const c=a(r);r.set(c,{reject:o,resolve:i}),null===s?e.postMessage({id:c,method:t},n):e.postMessage({id:c,method:t,params:s},n)}),n=(t,r,s=[])=>{e.postMessage({id:null,method:t,params:r},s)};let i={};for(const[e,r]of Object.entries(t))i={...i,[e]:r({call:s,notify:n})};return{...i}}})({clearInterval:({call:e})=>t=>{"symbol"==typeof u.get(t)&&(u.set(t,null),e("clear",{timerId:t,timerType:"interval"}).then(()=>{u.delete(t)}))},clearTimeout:({call:e})=>t=>{"symbol"==typeof h.get(t)&&(h.set(t,null),e("clear",{timerId:t,timerType:"timeout"}).then(()=>{h.delete(t)}))},setInterval:({call:e})=>(t,r=0,...s)=>{const n=Symbol(),i=a(u);u.set(i,n);const o=()=>e("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"interval"}).then(()=>{const e=u.get(i);if(void 0===e)throw new Error("The timer is in an undefined state.");e===n&&(t(...s),u.get(i)===n&&o())});return o(),i},setTimeout:({call:e})=>(t,r=0,...s)=>{const n=Symbol(),i=a(h);return h.set(i,n),e("set",{delay:r,now:performance.timeOrigin+performance.now(),timerId:i,timerType:"timeout"}).then(()=>{const e=h.get(i);if(void 0===e)throw new Error("The timer is in an undefined state.");e===n&&(h.delete(i),t(...s))}),i}}),f=(()=>{let e=null;return()=>{if(null!==e)return e;const t=new Blob(['(()=>{var e={455:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var r=e(t);return t.add(r),r}},r=function(e){return function(t,r){return e.set(t,r),r}},n=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,o=536870912,s=2*o,a=function(e,t){return function(r){var a=t.get(r),i=void 0===a?r.size:a<s?a+1:0;if(!r.has(i))return e(r,i);if(r.size<o){for(;r.has(i);)i=Math.floor(Math.random()*s);return e(r,i)}if(r.size>n)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(i);)i=Math.floor(Math.random()*n);return e(r,i)}},i=new WeakMap,u=r(i),c=a(u,i),l=t(c);e.addUniqueNumber=l,e.generateUniqueNumber=c}(t)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(()=>{"use strict";const e=-32603,t=-32602,n=-32601,o=(e,t)=>Object.assign(new Error(e),{status:t}),s=t=>o(\'The handler of the method called "\'.concat(t,\'" returned an unexpected result.\'),e),a=(t,r)=>async({data:{id:a,method:i,params:u}})=>{const c=r[i];try{if(void 0===c)throw(e=>o(\'The requested method called "\'.concat(e,\'" is not supported.\'),n))(i);const r=void 0===u?c():c(u);if(void 0===r)throw(t=>o(\'The handler of the method called "\'.concat(t,\'" returned no required result.\'),e))(i);const l=r instanceof Promise?await r:r;if(null===a){if(void 0!==l.result)throw s(i)}else{if(void 0===l.result)throw s(i);const{result:e,transferables:r=[]}=l;t.postMessage({id:a,result:e},r)}}catch(e){const{message:r,status:n=-32603}=e;t.postMessage({error:{code:n,message:r},id:a})}};var i=r(455);const u=new Map,c=(e,r,n)=>({...r,connect:({port:t})=>{t.start();const n=e(t,r),o=(0,i.generateUniqueNumber)(u);return u.set(o,()=>{n(),t.close(),u.delete(o)}),{result:o}},disconnect:({portId:e})=>{const r=u.get(e);if(void 0===r)throw(e=>o(\'The specified parameter called "portId" with the given value "\'.concat(e,\'" does not identify a port connected to this worker.\'),t))(e);return r(),{result:null}},isSupported:async()=>{if(await new Promise(e=>{const t=new ArrayBuffer(0),{port1:r,port2:n}=new MessageChannel;r.onmessage=({data:t})=>e(null!==t),n.postMessage(t,[t])})){const e=n();return{result:e instanceof Promise?await e:e}}return{result:!1}}}),l=(e,t,r=()=>!0)=>{const n=c(l,t,r),o=a(e,n);return e.addEventListener("message",o),()=>e.removeEventListener("message",o)},d=(e,t)=>r=>{const n=t.get(r);if(void 0===n)return Promise.resolve(!1);const[o,s]=n;return e(o),t.delete(r),s(!1),Promise.resolve(!0)},f=(e,t,r,n)=>(o,s,a)=>{const i=o+s-t.timeOrigin,u=i-t.now();return new Promise(t=>{e.set(a,[r(n,u,i,e,t,a),t])})},m=new Map,h=d(globalThis.clearTimeout,m),p=new Map,v=d(globalThis.clearTimeout,p),w=((e,t)=>{const r=(n,o,s,a)=>{const i=n-e.now();i>0?o.set(a,[t(r,i,n,o,s,a),s]):(o.delete(a),s(!0))};return r})(performance,globalThis.setTimeout),g=f(m,performance,globalThis.setTimeout,w),T=f(p,performance,globalThis.setTimeout,w);l(self,{clear:async({timerId:e,timerType:t})=>({result:await("interval"===t?h(e):v(e))}),set:async({delay:e,now:t,timerId:r,timerType:n})=>({result:await("interval"===n?g:T)(e,t,r)})})})()})();'],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(t);return e=(e=>{const t=new Worker(e);return d(t)})(r),setTimeout(()=>URL.revokeObjectURL(r)),e}})(),p=e=>f().clearInterval(e),g=e=>f().clearTimeout(e),b=(...e)=>f().setInterval(...e),_=(...e)=>f().setTimeout(...e)},128:(e,t)=>{"use strict";function r(e){const t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.validateTopic=r,t.validateTopics=function(e){if(0===e.length)return"empty_topic_list";for(let t=0;t<e.length;t++)if(!r(e[t]))return e[t];return null}},181:e=>{"use strict";e.exports=require("buffer")},277:(e,t,r)=>{"use strict";const{ArrayIsArray:s,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:i,ArrayPrototypeMap:o,NumberIsInteger:a,NumberIsNaN:c,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:u,NumberParseInt:h,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:f,String:p,StringPrototypeToUpperCase:g,StringPrototypeTrim:b}=r(4134),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:m,ERR_INVALID_ARG_TYPE:y,ERR_INVALID_ARG_VALUE:S,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:v}}=r(6371),{normalizeEncoding:E}=r(7760),{isAsyncFunction:k,isArrayBufferView:I}=r(7760).types,A={},O=/^[0-7]+$/,T=_((e,t,r=u,s=l)=>{if("number"!=typeof e)throw new y(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>s)throw new w(t,`>= ${r} && <= ${s}`,e)}),C=_((e,t,r=-2147483648,s=2147483647)=>{if("number"!=typeof e)throw new y(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>s)throw new w(t,`>= ${r} && <= ${s}`,e)}),R=_((e,t,r=!1)=>{if("number"!=typeof e)throw new y(t,"number",e);if(!a(e))throw new w(t,"an integer",e);const s=r?1:0,n=4294967295;if(e<s||e>n)throw new w(t,`>= ${s} && <= ${n}`,e)});function B(e,t){if("string"!=typeof e)throw new y(t,"string",e)}const x=_((e,t,r)=>{if(!n(r,e)){const s=i(o(r,e=>"string"==typeof e?`'${e}'`:p(e)),", ");throw new S(t,e,"must be one of: "+s)}});function P(e,t){if("boolean"!=typeof e)throw new y(t,"boolean",e)}function N(e,t,r){return null!=e&&d(e,t)?e[t]:r}const M=_((e,t,r=null)=>{const n=N(r,"allowArray",!1),i=N(r,"allowFunction",!1);if(!N(r,"nullable",!1)&&null===e||!n&&s(e)||"object"!=typeof e&&(!i||"function"!=typeof e))throw new y(t,"Object",e)}),L=_((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new y(t,"a dictionary",e)}),U=_((e,t,r=0)=>{if(!s(e))throw new y(t,"Array",e);if(e.length<r)throw new S(t,e,`must be longer than ${r}`)}),j=_((e,t="buffer")=>{if(!I(e))throw new y(t,["Buffer","TypedArray","DataView"],e)}),D=_((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new y(t,"AbortSignal",e)}),F=_((e,t)=>{if("function"!=typeof e)throw new y(t,"Function",e)}),W=_((e,t)=>{if("function"!=typeof e||k(e))throw new y(t,"Function",e)}),$=_((e,t)=>{if(void 0!==e)throw new y(t,"undefined",e)}),V=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(e,t){if(void 0===e||!f(V,e))throw new S(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===f(O,e))throw new S(t,e,"must be a 32-bit unsigned integer or an octal string");e=h(e,8)}return R(e,t),e},validateArray:U,validateStringArray:function(e,t){U(e,t);for(let r=0;r<e.length;r++)B(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){U(e,t);for(let r=0;r<e.length;r++)P(e[r],`${t}[${r}]`)},validateAbortSignalArray:function(e,t){U(e,t);for(let r=0;r<e.length;r++){const s=e[r],n=`${t}[${r}]`;if(null==s)throw new y(n,"AbortSignal",s);D(s,n)}},validateBoolean:P,validateBuffer:j,validateDictionary:L,validateEncoding:function(e,t){const r=E(t),s=e.length;if("hex"===r&&s%2!=0)throw new S("encoding",t,`is invalid for data of length ${s}`)},validateFunction:F,validateInt32:C,validateInteger:T,validateNumber:function(e,t,r=void 0,s){if("number"!=typeof e)throw new y(t,"number",e);if(null!=r&&e<r||null!=s&&e>s||(null!=r||null!=s)&&c(e))throw new w(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=s?" && ":""}${null!=s?`<= ${s}`:""}`,e)},validateObject:M,validateOneOf:x,validatePlainFunction:W,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===b(e).length||+e!==+e>>>0||e>65535||0===e&&!r)throw new m(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(B(e,t),void 0===A[e]){if(void 0!==A[g(e)])throw new v(e+" (signals must use all capital letters)");throw new v(e)}},validateString:B,validateUint32:R,validateUndefined:$,validateUnion:function(e,t,r){if(!n(r,e))throw new y(t,`('${i(r,"|")}')`,e)},validateAbortSignal:D,validateLinkHeaderValue:function(e){if("string"==typeof e)return H(e,"hints"),e;if(s(e)){const t=e.length;let r="";if(0===t)return r;for(let s=0;s<t;s++){const n=e[s];H(n,"hints"),r+=n,s!==t-1&&(r+=", ")}return r}throw new S("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},321:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ADDRESS_BOUNDARY=void 0,t.groupPossibilities=a,t.padGroup=c,t.simpleRegularExpression=function(e){const t=[];e.forEach((e,r)=>{0===parseInt(e,16)&&t.push(r)});const r=t.map(t=>e.map((e,r)=>{if(r===t){const t=0===r||r===o.GROUPS-1?":":"";return a([c(e),t])}return c(e)}).join(":"));return r.push(e.map(c).join(":")),a(r)},t.possibleElisions=function(e,t,r){const s=t?"":":",n=r?"":":",i=[];t||r||i.push("::"),t&&r&&i.push(""),(r&&!t||!r&&t)&&i.push(":"),i.push(`${s}(:0{1,4}){1,${e-1}}`),i.push(`(0{1,4}:){1,${e-1}}${n}`),i.push(`(0{1,4}:){${e-1}}0{1,4}`);for(let t=1;t<e-1;t++)for(let r=1;r<e-t;r++)i.push(`(0{1,4}:){${r}}:(0{1,4}:){${e-r-t-1}}0{1,4}`);return a(i)};const o=i(r(8914));function a(e){return`(${e.join("|")})`}function c(e){return e.length<4?`0{0,${4-e.length}}${e}`:e}t.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]"},345:(e,t,r)=>{"use strict";const{StringPrototypeSlice:s,SymbolIterator:n,TypedArrayPrototypeSet:i,Uint8Array:o}=r(4134),{Buffer:a}=r(181),{inspect:c}=r(7760);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);const t=a.allocUnsafe(e>>>0);let r=this.head,s=0;for(;r;)i(t,r.data,s),s+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[n](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,n=0;do{const i=r.data;if(!(e>i.length)){e===i.length?(t+=i,++n,r.next?this.head=r.next:this.head=this.tail=null):(t+=s(i,0,e),this.head=r,r.data=s(i,e));break}t+=i,e-=i.length,++n}while(null!==(r=r.next));return this.length-=n,t}_getBuffer(e){const t=a.allocUnsafe(e),r=e;let s=this.head,n=0;do{const a=s.data;if(!(e>a.length)){e===a.length?(i(t,a,r-e),++n,s.next?this.head=s.next:this.head=this.tail=null):(i(t,new o(a.buffer,a.byteOffset,e),r-e),this.head=s,s.data=a.slice(e));break}i(t,a,r-e),e-=a.length,++n}while(null!==(s=s.next));return this.length-=n,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return c(this,{...t,depth:0,customInspect:!1})}}},397:(e,t,r)=>{"use strict";const s=r(181),n=r(4478),i=r(2635);let o,a,c,l=!1;t.A=(e,t)=>{if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(t);const u=function(e,t){const r="alis"===e.protocol?"wss":"ws";let s=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(s=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(s=e.transformWsUrl(s,e,t)),s}(t,e);return o=t.my,o.connectSocket({url:u,protocols:r}),a=function(){const e=new n.Transform;return e._write=(e,t,r)=>{o.sendSocketMessage({data:e.buffer,success(){r()},fail(){r(new Error)}})},e._flush=e=>{o.closeSocket({success(){e()}})},e}(),c=new i.BufferedDuplex(t,a,o),l||(l=!0,o.onSocketOpen(()=>{c.socketReady()}),o.onSocketMessage(e=>{if("string"==typeof e.data){const t=s.Buffer.from(e.data,"base64");a.push(t)}else{const t=new FileReader;t.addEventListener("load",()=>{t.result instanceof ArrayBuffer?a.push(s.Buffer.from(t.result)):a.push(s.Buffer.from(t.result,"utf-8"))}),t.readAsArrayBuffer(e.data)}}),o.onSocketClose(()=>{c.end(),c.destroy()}),o.onSocketError(e=>{c.destroy(e)})),c}},495:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(1021),i=s(r(3497)),o=r(4723);t.default=(e,t)=>{e.log("_handleConnack");const{options:r}=e,s=5===r.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void e.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(e.topicAliasSend=new i.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===s)e.reconnecting=!1,e._onConnect(t);else if(s>0){const t=new o.ErrorWithReasonCode(`Connection refused: ${n.ReasonCodes[s]}`,s);e.emit("error",t),e.options.reconnectOnConnackError&&e._cleanUp(!0)}}},576:e=>{e.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){const e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}}},597:(e,t,r)=>{"use strict";const{kForOnEventAttribute:s,kListener:n}=r(2614),i=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),c=Symbol("kMessage"),l=Symbol("kReason"),u=Symbol("kTarget"),h=Symbol("kType"),d=Symbol("kWasClean");class f{constructor(e){this[u]=null,this[h]=e}get target(){return this[u]}get type(){return this[h]}}Object.defineProperty(f.prototype,"target",{enumerable:!0}),Object.defineProperty(f.prototype,"type",{enumerable:!0});class p extends f{constructor(e,t={}){super(e),this[i]=void 0===t.code?0:t.code,this[l]=void 0===t.reason?"":t.reason,this[d]=void 0!==t.wasClean&&t.wasClean}get code(){return this[i]}get reason(){return this[l]}get wasClean(){return this[d]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class g extends f{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[c]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[c]}}Object.defineProperty(g.prototype,"error",{enumerable:!0}),Object.defineProperty(g.prototype,"message",{enumerable:!0});class b extends f{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}}Object.defineProperty(b.prototype,"data",{enumerable:!0});const _={addEventListener(e,t,r={}){for(const i of this.listeners(e))if(!r[s]&&i[n]===t&&!i[s])return;let i;if("message"===e)i=function(e,r){const s=new b("message",{data:r?e:e.toString()});s[u]=this,m(t,this,s)};else if("close"===e)i=function(e,r){const s=new p("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});s[u]=this,m(t,this,s)};else if("error"===e)i=function(e){const r=new g("error",{error:e,message:e.message});r[u]=this,m(t,this,r)};else{if("open"!==e)return;i=function(){const e=new f("open");e[u]=this,m(t,this,e)}}i[s]=!!r[s],i[n]=t,r.once?this.once(e,i):this.on(e,i)},removeEventListener(e,t){for(const r of this.listeners(e))if(r[n]===t&&!r[s]){this.removeListener(e,r);break}}};function m(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}e.exports={CloseEvent:p,ErrorEvent:g,Event:f,EventTarget:_,MessageEvent:b}},720:(e,t,r)=>{const s=r(9291);e.exports.NumberAllocator=s},736:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,i,o=null;function a(...e){if(!a.enabled)return;const s=a,n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";o++;const i=t.formatters[n];if("function"==typeof i){const t=e[o];r=i.call(s,t),e.splice(o,1),o--}return r}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){const s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(6585),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},778:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(9278)),i=s(r(8539)),o=s(r(6968)),a=(0,i.default)("mqttjs:tcp");t.default=(e,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,o.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});const{port:r,path:s}=t,i=t.hostname;return a("port %d and host %s",r,i),n.default.createConnection({port:r,host:i,path:s})}},823:(e,t,r)=>{"use strict";const s=globalThis.AbortController||r(6584).AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:a},AbortError:c}=r(6371),{validateAbortSignal:l,validateInteger:u,validateObject:h}=r(277),d=r(4134).Symbol("kWeak"),f=r(4134).Symbol("kResistStopPropagation"),{finished:p}=r(6238),g=r(7830),{addAbortSignalNoValidate:b}=r(4147),{isWritable:_,isNodeStream:m}=r(6115),{deprecate:y}=r(7760),{ArrayPrototypePush:S,Boolean:w,MathFloor:v,Number:E,NumberIsNaN:k,Promise:I,PromiseReject:A,PromiseResolve:O,PromisePrototypeThen:T,Symbol:C}=r(4134),R=C("kEmpty"),B=C("kEof");function x(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal");let s=1;null!=(null==t?void 0:t.concurrency)&&(s=v(t.concurrency));let n=s-1;return null!=(null==t?void 0:t.highWaterMark)&&(n=v(t.highWaterMark)),u(s,"options.concurrency",1),u(n,"options.highWaterMark",0),n+=s,async function*(){const i=r(7760).AbortSignalAny([null==t?void 0:t.signal].filter(w)),o=this,a=[],l={signal:i};let u,h,d=!1,f=0;function p(){d=!0,g()}function g(){f-=1,b()}function b(){h&&!d&&f<s&&a.length<n&&(h(),h=null)}!async function(){try{for await(let t of o){if(d)return;if(i.aborted)throw new c;try{if(t=e(t,l),t===R)continue;t=O(t)}catch(e){t=A(e)}f+=1,T(t,g,p),a.push(t),u&&(u(),u=null),!d&&(a.length>=n||f>=s)&&await new I(e=>{h=e})}a.push(B)}catch(e){const t=A(e);T(t,g,p),a.push(t)}finally{d=!0,u&&(u(),u=null)}}();try{for(;;){for(;a.length>0;){const e=await a[0];if(e===B)return;if(i.aborted)throw new c;e!==R&&(yield e),a.shift(),b()}await new I(e=>{u=e})}}finally{d=!0,h&&(h(),h=null)}}.call(this)}async function P(e,t=void 0){for await(const r of N.call(this,e,t))return!0;return!1}function N(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);return x.call(this,async function(t,r){return await e(t,r)?t:R},t)}class M extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function L(e){if(e=E(e),k(e))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:y(function(e=void 0){return null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal"),async function*(){let t=0;for await(const s of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new c({cause:e.signal.reason});yield[t++,s]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=L(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;for await(const r of this){var s;if(null!=t&&null!==(s=t.signal)&&void 0!==s&&s.aborted)throw new c;e--<=0&&(yield r)}}.call(this)},filter:N,flatMap:function(e,t){const r=x.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:x,take:function(e,t=void 0){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),e=L(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new c;for await(const r of this){var s;if(null!=t&&null!==(s=t.signal)&&void 0!==s&&s.aborted)throw new c;if(e-- >0&&(yield r),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&l(t.signal,"options.signal"),m(e)&&!_(e))throw new n("stream",e,"must be writable");const r=g(this,e);return null!=t&&t.signal&&b(t.signal,r),r}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);return!await P.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new i("fn",["Function","AsyncFunction"],e);for await(const r of x.call(this,async function(t,r){return await e(t,r),R},t));},reduce:async function(e,t,r){var n;if("function"!=typeof e)throw new i("reducer",["Function","AsyncFunction"],e);null!=r&&h(r,"options"),null!=(null==r?void 0:r.signal)&&l(r.signal,"options.signal");let o=arguments.length>1;if(null!=r&&null!==(n=r.signal)&&void 0!==n&&n.aborted){const e=new c(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await p(this.destroy(e)),e}const a=new s,u=a.signal;if(null!=r&&r.signal){const e={once:!0,[d]:this,[f]:!0};r.signal.addEventListener("abort",()=>a.abort(),e)}let g=!1;try{for await(const s of this){var b;if(g=!0,null!=r&&null!==(b=r.signal)&&void 0!==b&&b.aborted)throw new c;o?t=await e(t,s,{signal:u}):(t=s,o=!0)}if(!g&&!o)throw new M}finally{a.abort()}return t},toArray:async function(e){null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&l(e.signal,"options.signal");const t=[];for await(const s of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new c(void 0,{cause:e.signal.reason});S(t,s)}return t},some:P,find:async function(e,t){for await(const r of N.call(this,e,t))return r}}},837:(e,t)=>{"use strict";function r(e){return e.toString(16).padStart(2,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.isInSubnet=function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()},t.isCorrect=function(e){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}},t.numberToPaddedHex=r,t.stringToPaddedHex=function(e){return r(parseInt(e,10))},t.testBit=function(e,t){const{length:r}=e;if(t>r)return!1;const s=r-t;return"1"===e.substring(s,s+1)}},857:e=>{"use strict";e.exports=require("os")},914:(e,t,r)=>{"use strict";const{Duplex:s}=r(2203),{randomFillSync:n}=r(6982),i=r(2971),{EMPTY_BUFFER:o,kWebSocket:a,NOOP:c}=r(2614),{isBlob:l,isValidStatusCode:u}=r(5880),{mask:h,toBuffer:d}=r(3338),f=Symbol("kByteLength"),p=Buffer.alloc(4),g=8192;let b,_=g;class m{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=c,this[a]=void 0}static frame(e,t){let r,s,i=!1,o=2,a=!1;t.mask&&(r=t.maskBuffer||p,t.generateMask?t.generateMask(r):(_===g&&(void 0===b&&(b=Buffer.alloc(g)),n(b,0,g),_=0),r[0]=b[_++],r[1]=b[_++],r[2]=b[_++],r[3]=b[_++]),a=0===(r[0]|r[1]|r[2]|r[3]),o=6),"string"==typeof e?s=t.mask&&!a||void 0===t[f]?(e=Buffer.from(e)).length:t[f]:(s=e.length,i=t.mask&&t.readOnly&&!a);let c=s;s>=65536?(o+=8,c=127):s>125&&(o+=2,c=126);const l=Buffer.allocUnsafe(i?s+o:o);return l[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(l[0]|=64),l[1]=c,126===c?l.writeUInt16BE(s,2):127===c&&(l[2]=l[3]=0,l.writeUIntBE(s,4,6)),t.mask?(l[1]|=128,l[o-4]=r[0],l[o-3]=r[1],l[o-2]=r[2],l[o-1]=r[3],a?[l,e]:i?(h(e,r,l,o,s),[l]):(h(e,r,e,0,s),[l,e])):[l,e]}close(e,t,r,s){let n;if(void 0===e)n=o;else{if("number"!=typeof e||!u(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const r=Buffer.byteLength(t);if(r>123)throw new RangeError("The message must not be greater than 123 bytes");n=Buffer.allocUnsafe(2+r),n.writeUInt16BE(e,0),"string"==typeof t?n.write(t,2):n.set(t,2)}else n=Buffer.allocUnsafe(2),n.writeUInt16BE(e,0)}const i={[f]:n.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,n,!1,i,s]):this.sendFrame(m.frame(n,i),s)}ping(e,t,r){let s,n;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):l(e)?(s=e.size,n=!1):(s=(e=d(e)).length,n=d.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[f]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:n,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,i,r]):this.getBlobData(e,!1,i,r):0!==this._state?this.enqueue([this.dispatch,e,!1,i,r]):this.sendFrame(m.frame(e,i),r)}pong(e,t,r){let s,n;if("string"==typeof e?(s=Buffer.byteLength(e),n=!1):l(e)?(s=e.size,n=!1):(s=(e=d(e)).length,n=d.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");const i={[f]:s,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:n,rsv1:!1};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,i,r]):this.getBlobData(e,!1,i,r):0!==this._state?this.enqueue([this.dispatch,e,!1,i,r]):this.sendFrame(m.frame(e,i),r)}send(e,t,r){const s=this._extensions[i.extensionName];let n,o,a=t.binary?2:1,c=t.compress;"string"==typeof e?(n=Buffer.byteLength(e),o=!1):l(e)?(n=e.size,o=!1):(n=(e=d(e)).length,o=d.readOnly),this._firstFragment?(this._firstFragment=!1,c&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=n>=s._threshold),this._compress=c):(c=!1,a=0),t.fin&&(this._firstFragment=!0);const u={[f]:n,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:o,rsv1:c};l(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,u,r]):this.getBlobData(e,this._compress,u,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,u,r]):this.dispatch(e,this._compress,u,r)}getBlobData(e,t,r,s){this._bufferedBytes+=r[f],this._state=2,e.arrayBuffer().then(e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(y,this,e,s)}this._bufferedBytes-=r[f];const n=d(e);t?this.dispatch(n,t,r,s):(this._state=0,this.sendFrame(m.frame(n,r),s),this.dequeue())}).catch(e=>{process.nextTick(S,this,e,s)})}dispatch(e,t,r,s){if(!t)return void this.sendFrame(m.frame(e,r),s);const n=this._extensions[i.extensionName];this._bufferedBytes+=r[f],this._state=1,n.compress(e,r.fin,(e,t)=>{this._socket.destroyed?y(this,new Error("The socket was closed while data was being compressed"),s):(this._bufferedBytes-=r[f],this._state=0,r.readOnly=!1,this.sendFrame(m.frame(t,r),s),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][f],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][f],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function y(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){const s=e._queue[r],n=s[s.length-1];"function"==typeof n&&n(t)}}function S(e,t,r){y(e,t,r),e.onerror(t)}e.exports=m},1021:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=void 0;const s=r(4723);t.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.default=(e,r)=>{const{messageId:n}=r,i=r.cmd;let o=null;const a=e.outgoing[n]?e.outgoing[n].cb:null;let c=null;if(a){switch(e.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{const i=r.reasonCode;i&&i>0&&16!==i?(c=new s.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[i]}`,i),e._removeOutgoingAndStoreMessage(n,()=>{a(c,r)})):e._removeOutgoingAndStoreMessage(n,a);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:n};const i=r.reasonCode;i&&i>0&&16!==i?(c=new s.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[i]}`,i),e._removeOutgoingAndStoreMessage(n,()=>{a(c,r)})):e._sendPacket(o);break}case"suback":{delete e.outgoing[n],e.messageIdProvider.deallocate(n);const s=r.granted;for(let r=0;r<s.length;r++){const i=s[r];if(128&i){c=new Error(`Subscribe error: ${t.ReasonCodes[i]}`),c.code=i;const r=e.messageIdToTopic[n];r&&r.forEach(t=>{delete e._resubscribeTopics[t]})}}delete e.messageIdToTopic[n],e._invokeStoreProcessingQueue(),a(c,r);break}case"unsuback":delete e.outgoing[n],e.messageIdProvider.deallocate(n),e._invokeStoreProcessingQueue(),a(null,r);break;default:e.emit("error",new Error("unrecognized packet type"))}e.disconnecting&&0===Object.keys(e.outgoing).length&&e.emit("outgoingEmpty")}else e.log("_handleAck :: Server sent an ack in error. Ignoring.")}},1060:(e,t,r)=>{"use strict";const s=r(4434),n=r(5692),i=r(8611),o=r(9278),a=r(4756),{randomBytes:c,createHash:l}=r(6982),{Duplex:u,Readable:h}=r(2203),{URL:d}=r(7016),f=r(2971),p=r(6286),g=r(914),{isBlob:b}=r(5880),{BINARY_TYPES:_,EMPTY_BUFFER:m,GUID:y,kForOnEventAttribute:S,kListener:w,kStatusCode:v,kWebSocket:E,NOOP:k}=r(2614),{EventTarget:{addEventListener:I,removeEventListener:A}}=r(597),{format:O,parse:T}=r(5926),{toBuffer:C}=r(3338),R=Symbol("kAborted"),B=[8,13],x=["CONNECTING","OPEN","CLOSING","CLOSED"],P=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class N extends s{constructor(e,t,r){super(),this._binaryType=_[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=m,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=N.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),M(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){_.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){const s=new p({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),n=new g(e,this._extensions,r.generateMask);this._receiver=s,this._sender=n,this._socket=e,s[E]=this,n[E]=this,e[E]=this,s.on("conclude",W),s.on("drain",$),s.on("error",V),s.on("message",z),s.on("ping",K),s.on("pong",q),n.onerror=Q,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",Z),e.on("data",J),e.on("end",X),e.on("error",ee),this._readyState=N.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=N.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[f.extensionName]&&this._extensions[f.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=N.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==N.CLOSED){if(this.readyState===N.CONNECTING){const e="WebSocket was closed before the connection was established";return void D(this,this._req,e)}this.readyState!==N.CLOSING?(this._readyState=N.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Y(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==N.CONNECTING&&this.readyState!==N.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===N.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||m,t,r)):F(this,e,r)}pong(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===N.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||m,t,r)):F(this,e,r)}resume(){this.readyState!==N.CONNECTING&&this.readyState!==N.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===N.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==N.OPEN)return void F(this,e,r);const s={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[f.extensionName]||(s.compress=!1),this._sender.send(e||m,s,r)}terminate(){if(this.readyState!==N.CLOSED){if(this.readyState===N.CONNECTING){const e="WebSocket was closed before the connection was established";return void D(this,this._req,e)}this._socket&&(this._readyState=N.CLOSING,this._socket.destroy())}}}function M(e,t,r,s){const o={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:B[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=o.autoPong,!B.includes(o.protocolVersion))throw new RangeError(`Unsupported protocol version: ${o.protocolVersion} (supported versions: ${B.join(", ")})`);let a;if(t instanceof d)a=t;else try{a=new d(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===a.protocol?a.protocol="ws:":"https:"===a.protocol&&(a.protocol="wss:"),e._url=a.href;const u="wss:"===a.protocol,h="ws+unix:"===a.protocol;let p;if("ws:"===a.protocol||u||h?h&&!a.pathname?p="The URL's pathname is empty":a.hash&&(p="The URL contains a fragment identifier"):p='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',p){const t=new SyntaxError(p);if(0===e._redirects)throw t;return void L(e,t)}const g=u?443:80,b=c(16).toString("base64"),_=u?n.request:i.request,m=new Set;let S,w;if(o.createConnection=o.createConnection||(u?j:U),o.defaultPort=o.defaultPort||g,o.port=a.port||g,o.host=a.hostname.startsWith("[")?a.hostname.slice(1,-1):a.hostname,o.headers={...o.headers,"Sec-WebSocket-Version":o.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},o.path=a.pathname+a.search,o.timeout=o.handshakeTimeout,o.perMessageDeflate&&(S=new f(!0!==o.perMessageDeflate?o.perMessageDeflate:{},!1,o.maxPayload),o.headers["Sec-WebSocket-Extensions"]=O({[f.extensionName]:S.offer()})),r.length){for(const e of r){if("string"!=typeof e||!P.test(e)||m.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");m.add(e)}o.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(o.origin&&(o.protocolVersion<13?o.headers["Sec-WebSocket-Origin"]=o.origin:o.headers.Origin=o.origin),(a.username||a.password)&&(o.auth=`${a.username}:${a.password}`),h){const e=o.path.split(":");o.socketPath=e[0],o.path=e[1]}if(o.followRedirects){if(0===e._redirects){e._originalIpc=h,e._originalSecure=u,e._originalHostOrSocketPath=h?o.socketPath:a.host;const t=s&&s.headers;if(s={...s,headers:{}},t)for(const[e,r]of Object.entries(t))s.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){const t=h?!!e._originalIpc&&o.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&a.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete o.headers.authorization,delete o.headers.cookie,t||delete o.headers.host,o.auth=void 0)}o.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(o.auth).toString("base64")),w=e._req=_(o),e._redirects&&e.emit("redirect",e.url,w)}else w=e._req=_(o);o.timeout&&w.on("timeout",()=>{D(e,w,"Opening handshake has timed out")}),w.on("error",t=>{null===w||w[R]||(w=e._req=null,L(e,t))}),w.on("response",n=>{const i=n.headers.location,a=n.statusCode;if(i&&o.followRedirects&&a>=300&&a<400){if(++e._redirects>o.maxRedirects)return void D(e,w,"Maximum redirects exceeded");let n;w.abort();try{n=new d(i,t)}catch(t){const r=new SyntaxError(`Invalid URL: ${i}`);return void L(e,r)}M(e,n,r,s)}else e.emit("unexpected-response",w,n)||D(e,w,`Unexpected server response: ${n.statusCode}`)}),w.on("upgrade",(t,r,s)=>{if(e.emit("upgrade",t),e.readyState!==N.CONNECTING)return;w=e._req=null;const n=t.headers.upgrade;if(void 0===n||"websocket"!==n.toLowerCase())return void D(e,r,"Invalid Upgrade header");const i=l("sha1").update(b+y).digest("base64");if(t.headers["sec-websocket-accept"]!==i)return void D(e,r,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?m.size?m.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":m.size&&(c="Server sent no subprotocol"),c)return void D(e,r,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!S)return void D(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");let t;try{t=T(u)}catch(t){return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}const s=Object.keys(t);if(1!==s.length||s[0]!==f.extensionName)return void D(e,r,"Server indicated an extension that was not requested");try{S.accept(t[f.extensionName])}catch(t){return void D(e,r,"Invalid Sec-WebSocket-Extensions header")}e._extensions[f.extensionName]=S}e.setSocket(r,s,{allowSynchronousEvents:o.allowSynchronousEvents,generateMask:o.generateMask,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation})}),o.finishRequest?o.finishRequest(w,e):w.end()}function L(e,t){e._readyState=N.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function U(e){return e.path=e.socketPath,o.connect(e)}function j(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function D(e,t,r){e._readyState=N.CLOSING;const s=new Error(r);Error.captureStackTrace(s,D),t.setHeader?(t[R]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(L,e,s)):(t.destroy(s),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function F(e,t,r){if(t){const r=b(t)?t.size:C(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${x[e.readyState]})`);process.nextTick(r,t)}}function W(e,t){const r=this[E];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[E]&&(r._socket.removeListener("data",J),process.nextTick(G,r._socket),1005===e?r.close():r.close(e,t))}function $(){const e=this[E];e.isPaused||e._socket.resume()}function V(e){const t=this[E];void 0!==t._socket[E]&&(t._socket.removeListener("data",J),process.nextTick(G,t._socket),t.close(e[v])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function H(){this[E].emitClose()}function z(e,t){this[E].emit("message",e,t)}function K(e){const t=this[E];t._autoPong&&t.pong(e,!this._isServer,k),t.emit("ping",e)}function q(e){this[E].emit("pong",e)}function G(e){e.resume()}function Q(e){const t=this[E];t.readyState!==N.CLOSED&&(t.readyState===N.OPEN&&(t._readyState=N.CLOSING,Y(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function Y(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function Z(){const e=this[E];let t;this.removeListener("close",Z),this.removeListener("data",J),this.removeListener("end",X),e._readyState=N.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[E]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",H),e._receiver.on("finish",H))}function J(e){this[E]._receiver.write(e)||this.pause()}function X(){const e=this[E];e._readyState=N.CLOSING,e._receiver.end(),this.end()}function ee(){const e=this[E];this.removeListener("error",ee),this.on("error",k),e&&(e._readyState=N.CLOSING,this.destroy())}Object.defineProperty(N,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(N.prototype,"CONNECTING",{enumerable:!0,value:x.indexOf("CONNECTING")}),Object.defineProperty(N,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(N.prototype,"OPEN",{enumerable:!0,value:x.indexOf("OPEN")}),Object.defineProperty(N,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(N.prototype,"CLOSING",{enumerable:!0,value:x.indexOf("CLOSING")}),Object.defineProperty(N,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),Object.defineProperty(N.prototype,"CLOSED",{enumerable:!0,value:x.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(N.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(N.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[S])return t[w];return null},set(t){for(const t of this.listeners(e))if(t[S]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[S]:!0})}})}),N.prototype.addEventListener=I,N.prototype.removeEventListener=A,e.exports=N},1278:(e,t,r)=>{t.parser=r(3079).parser,t.generate=r(2535),t.writeToStream=r(3132)},1676:function(e,t,r){"use strict";var s,n=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(s=function(e){return s=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},s(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=s(e),o=0;o<r.length;o++)"default"!==r[o]&&n(t,e,r[o]);return i(t,e),t}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=t.KeepaliveManager=t.UniqueMessageIdProvider=t.DefaultMessageIdProvider=t.Store=t.MqttClient=t.connectAsync=t.connect=t.Client=void 0;const l=c(r(9777));t.MqttClient=l.default;const u=c(r(579));t.DefaultMessageIdProvider=u.default;const h=c(r(2099));t.UniqueMessageIdProvider=h.default;const d=c(r(7969));t.Store=d.default;const f=o(r(2793));t.connect=f.default,Object.defineProperty(t,"connectAsync",{enumerable:!0,get:function(){return f.connectAsync}});const p=c(r(3175));t.KeepaliveManager=p.default,t.Client=l.default,a(r(9777),t),a(r(4723),t);var g=r(1021);Object.defineProperty(t,"ReasonCodes",{enumerable:!0,get:function(){return g.ReasonCodes}})},1722:(e,t,r)=>{"use strict";const s=r(4434),n=r(8611),{Duplex:i}=r(2203),{createHash:o}=r(6982),a=r(5926),c=r(2971),l=r(8237),u=r(1060),{GUID:h,kWebSocket:d}=r(2614),f=/^[+/0-9A-Za-z]{22}==$/;function p(e){e._state=2,e.emit("close")}function g(){this.destroy()}function b(e,t,r,s){r=r||n.STATUS_CODES[t],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...s},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(s).map(e=>`${e}: ${s[e]}`).join("\r\n")+"\r\n\r\n"+r)}function _(e,t,r,s,n,i){if(e.listenerCount("wsClientError")){const s=new Error(n);Error.captureStackTrace(s,_),e.emit("wsClientError",s,r,t)}else b(r,s,n,i)}e.exports=class extends s{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer((e,t)=>{const r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,s)=>{this.handleUpgrade(t,r,s,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",()=>{e(new Error("The server is not running"))}),void process.nextTick(p,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{p(this)})}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,s){t.on("error",g);const n=e.headers["sec-websocket-key"],i=e.headers.upgrade,o=+e.headers["sec-websocket-version"];if("GET"!==e.method)return void _(this,e,t,405,"Invalid HTTP method");if(void 0===i||"websocket"!==i.toLowerCase())return void _(this,e,t,400,"Invalid Upgrade header");if(void 0===n||!f.test(n))return void _(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==o&&8!==o)return void _(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(e))return void b(t,400);const u=e.headers["sec-websocket-protocol"];let h=new Set;if(void 0!==u)try{h=l.parse(u)}catch(r){return void _(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const d=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==d){const r=new c(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(d);e[c.extensionName]&&(r.accept(e[c.extensionName]),p[c.extensionName]=r)}catch(r){return void _(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const i={origin:e.headers[8===o?"sec-websocket-origin":"origin"],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(i,(i,o,a,c)=>{if(!i)return b(t,o||401,a,c);this.completeUpgrade(p,n,h,e,t,r,s)});if(!this.options.verifyClient(i))return b(t,401)}this.completeUpgrade(p,n,h,e,t,r,s)}completeUpgrade(e,t,r,s,n,i,l){if(!n.readable||!n.writable)return n.destroy();if(n[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return b(n,503);const u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${o("sha1").update(t+h).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(r.size){const e=this.options.handleProtocols?this.options.handleProtocols(r,s):r.values().next().value;e&&(u.push(`Sec-WebSocket-Protocol: ${e}`),f._protocol=e)}if(e[c.extensionName]){const t=e[c.extensionName].params,r=a.format({[c.extensionName]:[t]});u.push(`Sec-WebSocket-Extensions: ${r}`),f._extensions=e}this.emit("headers",u,s),n.write(u.concat("\r\n").join("\r\n")),n.removeListener("error",g),f.setSocket(n,i,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)})),l(f,s)}}},1725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(181),n={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function i(e){return"number"==typeof e&&isFinite(e)&&function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}(e)}function o(e,t){if("number"!=typeof e)throw new Error(t?n.INVALID_OFFSET_NON_NUMBER:n.INVALID_LENGTH_NON_NUMBER);if(!i(e)||e<0)throw new Error(t?n.INVALID_OFFSET:n.INVALID_LENGTH)}t.ERRORS=n,t.checkEncoding=function(e){if(!s.Buffer.isEncoding(e))throw new Error(n.INVALID_ENCODING)},t.isFiniteInteger=i,t.checkLengthValue=function(e){o(e,!1)},t.checkOffsetValue=function(e){o(e,!0)},t.checkTargetOffset=function(e,t){if(e<0||e>t.length)throw new Error(n.INVALID_TARGET_OFFSET)},t.bigIntAndBufferInt64Check=function(e){if("undefined"==typeof BigInt)throw new Error("Platform does not support JS BigInt type.");if(void 0===s.Buffer.prototype[e])throw new Error(`Platform does not support Buffer.prototype.${e}.`)}},2017:(e,t,r)=>{try{var s=r(9023);if("function"!=typeof s.inherits)throw"";e.exports=s.inherits}catch(t){e.exports=r(6698)}},2018:e=>{"use strict";e.exports=require("tty")},2099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(720);t.default=class{numberAllocator;lastId;constructor(){this.numberAllocator=new s.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}}},2203:e=>{"use strict";e.exports=require("stream")},2250:e=>{"use strict";e.exports=require("dns")},2437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressError=void 0;class r extends Error{constructor(e,t){super(e),this.name="AddressError",this.parseMessage=t}}t.AddressError=r},2535:(e,t,r)=>{const s=r(3132),{EventEmitter:n}=r(4434),{Buffer:i}=r(181);class o extends n{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const t=new Array(this._array.length),r=this._array;let s,n=0;for(s=0;s<r.length&&void 0!==r[s];s++)"string"!=typeof r[s]?t[s]=r[s].length:t[s]=i.byteLength(r[s]),e+=t[s];const o=i.allocUnsafe(e);for(s=0;s<r.length&&void 0!==r[s];s++)"string"!=typeof r[s]?(r[s].copy(o,n),n+=t[s]):(o.write(r[s],n),n+=t[s]);return o}destroy(e){e&&this.emit("error",e)}}e.exports=function(e,t){const r=new o;return s(e,r,t),r.concat()}},2613:e=>{"use strict";e.exports=require("assert")},2614:e=>{"use strict";const t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},2635:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedDuplex=void 0,t.writev=i;const s=r(4478),n=r(181);function i(e,t){const r=new Array(e.length);for(let t=0;t<e.length;t++)"string"==typeof e[t].chunk?r[t]=n.Buffer.from(e[t].chunk,"utf8"):r[t]=e[t].chunk;this._write(n.Buffer.concat(r),"binary",t)}class o extends s.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(e,t,r){super({objectMode:!0}),this.proxy=t,this.socket=r,this.writeQueue=[],e.objectMode||(this._writev=i.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",e=>{!this.destroyed&&this.readable&&this.push(e)})}_read(e){this.proxy.read(e)}_write(e,t,r){this.isSocketOpen?this.writeToProxy(e,t,r):this.writeQueue.push({chunk:e,encoding:t,cb:r})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,t){this.writeQueue=[],this.proxy.destroy(),t(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,t,r){!1===this.proxy.write(e,t)?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){const{chunk:e,encoding:t,cb:r}=this.writeQueue.shift();this.writeToProxy(e,t,r)}}}t.BufferedDuplex=o},2639:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{aliasToTopic;max;length;constructor(e){this.aliasToTopic={},this.max=e}put(e,t){return!(0===t||t>this.max||(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,0))}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}}},2793:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectAsync=function(e,t,r=!0){return new Promise((s,n)=>{const i=u(e,t),o={connect:e=>{a(),s(i)},end:()=>{a(),s(i)},error:e=>{a(),i.end(),n(e)}};function a(){Object.keys(o).forEach(e=>{i.off(e,o[e])})}!1===r&&(o.close=()=>{o.error(new Error("Couldn't connect to server"))}),Object.keys(o).forEach(e=>{i.on(e,o[e])})})};const n=s(r(8539)),i=s(r(7016)),o=s(r(9777)),a=s(r(6887));"function"!=typeof process?.nextTick&&(process.nextTick=setImmediate);const c=(0,n.default)("mqttjs");let l=null;function u(e,t){if(c("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=""),t=t||{},e&&"string"==typeof e){const r=i.default.parse(e,!0),s={};if(null!=r.port&&(s.port=Number(r.port)),s.host=r.hostname,s.query=r.query,s.auth=r.auth,s.protocol=r.protocol,s.path=r.path,!(t={...s,...t}).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(t.unixSocket=t.unixSocket||t.protocol?.includes("+unix"),t.unixSocket?t.protocol=t.protocol.replace("+unix",""):t.protocol?.startsWith("ws")||t.protocol?.startsWith("wx")||delete t.path,function(e){let t;if(e.auth)if(t=e.auth.match(/^(.+):(.+)$/),t){const[,r,s]=t;e.username=r,e.password=s}else e.username=e.auth}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),a.default||t.unixSocket?t.socksProxy=void 0:void 0===t.socksProxy&&"undefined"!=typeof process&&(t.socksProxy=process.env.MQTTJS_SOCKS_PROXY),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${t.protocol}"!`)}}if(l||(l={},a.default||t.forceNativeWebSocket?(l.ws=r(8203).browserStreamBuilder,l.wss=r(8203).browserStreamBuilder,l.wx=r(5670).A,l.wxs=r(5670).A,l.ali=r(397).A,l.alis=r(397).A):(l.ws=r(8203).streamBuilder,l.wss=r(8203).streamBuilder,l.mqtt=r(778).default,l.tcp=r(778).default,l.ssl=r(3936).default,l.tls=l.ssl,l.mqtts=r(3936).default)),!l[t.protocol]){const e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((t,r)=>(!e||r%2!=0)&&"function"==typeof l[t])[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);const s=new o.default(function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),c("calling streambuilder for",t.protocol),l[t.protocol](e,t)},t);return s.on("error",()=>{}),s}t.default=u},2839:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Address4=void 0;const o=i(r(837)),a=i(r(9576)),c=r(2437);class l{constructor(e){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=o.isCorrect(a.BITS),this.isInSubnet=o.isInSubnet,this.address=e;const t=a.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new c.AddressError("Invalid subnet mask.");e=e.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new l(e),!0}catch(e){return!1}}parse(e){const t=e.split(".");if(!e.match(a.RE_ADDRESS))throw new c.AddressError("Invalid IPv4 address.");return t}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){const t=e.replace(/:/g,"").padStart(8,"0"),r=[];let s;for(s=0;s<8;s+=2){const e=t.slice(s,s+2);r.push(parseInt(e,16))}return new l(r.join("."))}static fromInteger(e){return l.fromHex(e.toString(16))}static fromArpa(e){const t=e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new l(t)}toHex(){return this.parsedAddress.map(e=>o.stringToPaddedHex(e)).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){const e=[];let t;for(t=0;t<a.GROUPS;t+=2)e.push(`${o.stringToPaddedHex(this.parsedAddress[t])}${o.stringToPaddedHex(this.parsedAddress[t+1])}`);return e.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(e=>o.stringToPaddedHex(e)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(a.BITS-this.subnetMask)}`)}startAddress(){return l.fromBigInt(this._startAddress())}startAddressExclusive(){const e=BigInt("1");return l.fromBigInt(this._startAddress()+e)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(a.BITS-this.subnetMask)}`)}endAddress(){return l.fromBigInt(this._endAddress())}endAddressExclusive(){const e=BigInt("1");return l.fromBigInt(this._endAddress()-e)}static fromBigInt(e){return l.fromHex(e.toString(16))}mask(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}reverseForm(e){e||(e={});const t=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?t:`${t}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new l("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(a.BITS,"0")}groupForV6(){const e=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${e.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${e.slice(2,4).join(".")}</span>`)}}t.Address4=l},2846:(e,t)=>{"use strict";function r(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}function s(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}Object.defineProperty(t,"__esModule",{value:!0}),t.spanAllZeroes=r,t.spanAll=function(e,t=0){return e.split("").map((e,s)=>`<span class="digit value-${e} position-${s+t}">${r(e)}</span>`).join("")},t.spanLeadingZeroes=function(e){return e.split(":").map(e=>s(e)).join(":")},t.simpleGroup=function(e,t=0){return e.split(":").map((e,r)=>/group-v4/.test(e)?e:`<span class="hover-group group-${r+t}">${s(e)}</span>`)}},2860:e=>{"use strict";e.exports={version:"5.14.1"}},2861:(e,t,r)=>{var s=r(181),n=s.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=s:(i(s,t),t.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var s=n(e);return void 0!==t?"string"==typeof r?s.fill(t,r):s.fill(t):s.fill(0),s},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s.SlowBuffer(e)}},2971:(e,t,r)=>{"use strict";const s=r(3106),n=r(3338),i=r(4759),{kStatusCode:o}=r(2614),a=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),u=Symbol("total-length"),h=Symbol("callback"),d=Symbol("buffers"),f=Symbol("error");let p;function g(e){this[d].push(e),this[u]+=e.length}function b(e){this[u]+=e.length,this[l]._maxPayload<1||this[u]<=this[l]._maxPayload?this[d].push(e):(this[f]=new RangeError("Max payload size exceeded"),this[f].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[f][o]=1009,this.removeListener("data",b),this.reset())}function _(e){this[l]._inflate=null,this[f]?this[h](this[f]):(e[o]=1007,this[h](e))}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!p){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;p=new i(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){p.add(s=>{this._decompress(e,t,(e,t)=>{s(),r(e,t)})})}compress(e,t,r){p.add(s=>{this._compress(e,t,(e,t)=>{s(),r(e,t)})})}_decompress(e,t,r){const i=this._isServer?"client":"server";if(!this._inflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[u]=0,this._inflate[d]=[],this._inflate.on("error",_),this._inflate.on("data",b)}this._inflate[h]=r,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[f];if(e)return this._inflate.close(),this._inflate=null,void r(e);const s=n.concat(this._inflate[d],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,s)})}_compress(e,t,r){const i=this._isServer?"server":"client";if(!this._deflate){const e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[d]=[],this._deflate.on("data",g)}this._deflate[h]=r,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=n.concat(this._deflate[d],this._deflate[u]);t&&(e=new a(e.buffer,e.byteOffset,e.length-4)),this._deflate[h]=null,this._deflate[u]=0,this._deflate[d]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}}},3079:(e,t,r)=>{const s=r(4829),{EventEmitter:n}=r(4434),i=r(576),o=r(5399),a=r(5753)("mqtt-packet:parser");class c extends n{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof c?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new c).parser(e)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new i,this.error=null,this._list=s(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0),t=e>>o.CMD_SHIFT;this.packet.cmd=o.types[t];const r=15&e,s=o.requiredHeaderFlags[t];return null!=s&&r!==s?this._emitError(new Error(o.requiredHeaderFlagsErrors[t])):(this.packet.retain=0!==(e&o.RETAIN_MASK),this.packet.qos=e>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=0!==(e&o.DUP_MASK),a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),a("_parseLength %d",e.value),!!e}_parsePayload(){a("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return a("_parsePayload complete result: %s",e),e}_parseConnect(){let e,t,r,s;a("_parseConnect");const n={},i=this.packet,c=this._parseString();if(null===c)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==c&&"MQIsdp"!==c)return this._emitError(new Error("Invalid protocolId"));if(i.protocolId=c,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(i.protocolVersion=this._list.readUInt8(this._pos),i.protocolVersion>=128&&(i.bridgeMode=!0,i.protocolVersion=i.protocolVersion-128),3!==i.protocolVersion&&4!==i.protocolVersion&&5!==i.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));n.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,n.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,n.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;const l=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),u=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(n.will)i.will={},i.will.retain=l,i.will.qos=u;else{if(l)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(u)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(i.clean=0!==(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK),this._pos++,i.keepalive=this._parseNum(),-1===i.keepalive)return this._emitError(new Error("Packet too short"));if(5===i.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.properties=e)}const h=this._parseString();if(null===h)return this._emitError(new Error("Packet too short"));if(i.clientId=h,a("_parseConnect: packet.clientId: %s",i.clientId),n.will){if(5===i.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(i.will.properties=e)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(i.will.topic=e,a("_parseConnect: packet.will.topic: %s",i.will.topic),t=this._parseBuffer(),null===t)return this._emitError(new Error("Cannot parse will payload"));i.will.payload=t,a("_parseConnect: packet.will.paylaod: %s",i.will.payload)}if(n.username){if(s=this._parseString(),null===s)return this._emitError(new Error("Cannot parse username"));i.username=s,a("_parseConnect: packet.username: %s",i.username)}if(n.password){if(r=this._parseBuffer(),null===r)return this._emitError(new Error("Cannot parse password"));i.password=r}return this.settings=i,a("_parseConnect: complete"),i}_parseConnack(){a("_parseConnack");const e=this.packet;if(this._list.length<1)return null;const t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&o.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),a("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){a("_parseSubscribe");const e=this.packet;let t,r,s,n,i,c,l;if(e.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<e.length;){if(t=this._parseString(),null===t)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(r=this._parseByte(),5===this.settings.protocolVersion){if(192&r)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&r)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(s=r&o.SUBSCRIBE_OPTIONS_QOS_MASK,s>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(c=0!==(r>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK),i=0!==(r>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK),n=r>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,n>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:t,qos:s},5===this.settings.protocolVersion?(l.nl=c,l.rap=i,l.rh=n):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",l),e.subscriptions.push(l)}}}_parseSuback(){a("_parseSuback");const e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){const e=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!o.MQTT5_SUBACK_CODES[e])return this._emitError(new Error("Invalid suback code"))}else if(e>2&&128!==e)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(e)}}}_parseUnsubscribe(){a("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){const t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){a("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==e.length)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){const t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){const e=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[e])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(e)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"))}a("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){const e=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(e.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));const t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),a("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;const s=this._list.toString("utf8",this._pos,r);return this._pos+=t,a("_parseString: result: %s",s),s}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;const r=this._list.slice(this._pos,t);return this._pos+=e,a("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){a("_parseVarByteNum");let t,r=0,s=1,n=0,i=!1;const c=this._pos?this._pos:0;for(;r<4&&c+r<this._list.length;){if(t=this._list.readUInt8(c+r++),n+=s*(t&o.VARBYTEINT_MASK),s*=128,0===(t&o.VARBYTEINT_FIN_MASK)){i=!0;break}if(this._list.length<=r)break}return!i&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),c&&(this._pos+=r),i=!!i&&(e?{bytes:r,value:n}:n),a("_parseVarByteNum: result: %o",i),i}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",e),e}_parseByType(e){switch(a("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");const e=this._parseVarByteNum(),t=this._pos+e,r={};for(;this._pos<t;){const e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;const t=o.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"===t){r[t]||(r[t]=Object.create(null));const e=this._parseByType(o.propertiesTypes[t]);if(r[t][e.name])if(Array.isArray(r[t][e.name]))r[t][e.name].push(e.value);else{const s=r[t][e.name];r[t][e.name]=[s],r[t][e.name].push(e.value)}else r[t][e.name]=e.value;continue}r[t]?(Array.isArray(r[t])||(r[t]=[r[t]]),r[t].push(this._parseByType(o.propertiesTypes[t]))):r[t]=this._parseByType(o.propertiesTypes[t])}return r}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new i,this._pos=0,!0}_emitError(e){a("_emitError",e),this.error=e,this.emit("error",e)}}e.exports=c},3095:(e,t,r)=>{"use strict";const{ArrayPrototypePop:s,Promise:n}=r(4134),{isIterable:i,isNodeStream:o,isWebStream:a}=r(6115),{pipelineImpl:c}=r(7758),{finished:l}=r(6238);r(5506),e.exports={finished:l,pipeline:function(...e){return new n((t,r)=>{let n,l;const u=e[e.length-1];if(u&&"object"==typeof u&&!o(u)&&!i(u)&&!a(u)){const t=s(e);n=t.signal,l=t.end}c(e,(e,s)=>{e?r(e):t(s)},{signal:n,end:l})})}}},3106:e=>{"use strict";e.exports=require("zlib")},3132:(e,t,r)=>{const s=r(5399),{Buffer:n}=r(181),i=n.allocUnsafe(0),o=n.from([0]),a=r(6172),c=r(3225).nextTick,l=r(5753)("mqtt-packet:writeToStream"),u=a.cache,h=a.generateNumber,d=a.generateCache,f=a.genBufVariableByteInt,p=a.generate4ByteBuffer;let g=E,b=!0;function _(e,t,r){switch(l("generate called"),t.cork&&(t.cork(),c(m,t)),b&&(b=!1,d()),l("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t){const r=e||{},i=r.protocolId||"MQTT";let o=r.protocolVersion||4;const a=r.will;let c=r.clean;const l=r.keepalive||0,u=r.clientId||"",h=r.username,d=r.password,f=r.properties;void 0===c&&(c=!0);let p,b,_=0;if(!i||"string"!=typeof i&&!n.isBuffer(i))return t.destroy(new Error("Invalid protocolId")),!1;if(_+=i.length+2,3!==o&&4!==o&&5!==o)return t.destroy(new Error("Invalid protocol version")),!1;if(_+=1,("string"==typeof u||n.isBuffer(u))&&(u||o>=4)&&(u||c))_+=n.byteLength(u)+2;else{if(o<4)return t.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(1*c==0)return t.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof l||l<0||l>65535||l%1!=0)return t.destroy(new Error("Invalid keepalive")),!1;if(_+=2,_+=1,5===o){if(p=A(t,f),!p)return!1;_+=p.length}if(a){if("object"!=typeof a)return t.destroy(new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.destroy(new Error("Invalid will topic")),!1;if(_+=n.byteLength(a.topic)+2,_+=2,a.payload){if(!(a.payload.length>=0))return t.destroy(new Error("Invalid will payload")),!1;"string"==typeof a.payload?_+=n.byteLength(a.payload):_+=a.payload.length}if(b={},5===o){if(b=A(t,a.properties),!b)return!1;_+=b.length}}let m=!1;if(null!=h){if(!B(h))return t.destroy(new Error("Invalid username")),!1;m=!0,_+=n.byteLength(h)+2}if(null!=d){if(!m)return t.destroy(new Error("Username is required to use password")),!1;if(!B(d))return t.destroy(new Error("Invalid password")),!1;_+=R(d)+2}t.write(s.CONNECT_HEADER),S(t,_),I(t,i),r.bridgeMode&&(o+=128),t.write(131===o?s.VERSION131:132===o?s.VERSION132:4===o?s.VERSION4:5===o?s.VERSION5:s.VERSION3);let y=0;return y|=null!=h?s.USERNAME_MASK:0,y|=null!=d?s.PASSWORD_MASK:0,y|=a&&a.retain?s.WILL_RETAIN_MASK:0,y|=a&&a.qos?a.qos<<s.WILL_QOS_SHIFT:0,y|=a?s.WILL_FLAG_MASK:0,y|=c?s.CLEAN_SESSION_MASK:0,t.write(n.from([y])),g(t,l),5===o&&p.write(),I(t,u),a&&(5===o&&b.write(),w(t,a.topic),I(t,a.payload)),null!=h&&I(t,h),null!=d&&I(t,d),!0}(e,t);case"connack":return function(e,t,r){const i=r?r.protocolVersion:4,a=e||{},c=5===i?a.reasonCode:a.returnCode,l=a.properties;let u=2;if("number"!=typeof c)return t.destroy(new Error("Invalid return code")),!1;let h=null;if(5===i){if(h=A(t,l),!h)return!1;u+=h.length}return t.write(s.CONNACK_HEADER),S(t,u),t.write(a.sessionPresent?s.SESSIONPRESENT_HEADER:o),t.write(n.from([c])),null!=h&&h.write(),!0}(e,t,r);case"publish":return function(e,t,r){l("publish: packet: %o",e);const o=r?r.protocolVersion:4,a=e||{},c=a.qos||0,u=a.retain?s.RETAIN_MASK:0,h=a.topic,d=a.payload||i,f=a.messageId,p=a.properties;let b=0;if("string"==typeof h)b+=n.byteLength(h)+2;else{if(!n.isBuffer(h))return t.destroy(new Error("Invalid topic")),!1;b+=h.length+2}if(n.isBuffer(d)?b+=d.length:b+=n.byteLength(d),c&&"number"!=typeof f)return t.destroy(new Error("Invalid messageId")),!1;c&&(b+=2);let _=null;if(5===o){if(_=A(t,p),!_)return!1;b+=_.length}return t.write(s.PUBLISH_HEADER[c][a.dup?1:0][u?1:0]),S(t,b),g(t,R(h)),t.write(h),c>0&&g(t,f),null!=_&&_.write(),l("publish: payload: %o",d),t.write(d)}(e,t,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,r){const i=r?r.protocolVersion:4,o=e||{},a=o.cmd||"puback",c=o.messageId,l=o.dup&&"pubrel"===a?s.DUP_MASK:0;let u=0;const h=o.reasonCode,d=o.properties;let f=5===i?3:2;if("pubrel"===a&&(u=1),"number"!=typeof c)return t.destroy(new Error("Invalid messageId")),!1;let p=null;if(5===i&&"object"==typeof d){if(p=O(t,d,r,f),!p)return!1;f+=p.length}return t.write(s.ACKS[a][u][l][0]),3===f&&(f+=0!==h?1:-1),S(t,f),g(t,c),5===i&&2!==f&&t.write(n.from([h])),null!==p?p.write():4===f&&t.write(n.from([0])),!0}(e,t,r);case"subscribe":return function(e,t,r){l("subscribe: packet: ");const i=r?r.protocolVersion:4,o=e||{},a=o.dup?s.DUP_MASK:0,c=o.messageId,u=o.subscriptions,h=o.properties;let d=0;if("number"!=typeof c)return t.destroy(new Error("Invalid messageId")),!1;d+=2;let f=null;if(5===i){if(f=A(t,h),!f)return!1;d+=f.length}if("object"!=typeof u||!u.length)return t.destroy(new Error("Invalid subscriptions")),!1;for(let e=0;e<u.length;e+=1){const r=u[e].topic,s=u[e].qos;if("string"!=typeof r)return t.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof s)return t.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(5===i){if("boolean"!=typeof(u[e].nl||!1))return t.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(u[e].rap||!1))return t.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;const r=u[e].rh||0;if("number"!=typeof r||r>2)return t.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=n.byteLength(r)+2+1}l("subscribe: writing to stream: %o",s.SUBSCRIBE_HEADER),t.write(s.SUBSCRIBE_HEADER[1][a?1:0][0]),S(t,d),g(t,c),null!==f&&f.write();let p=!0;for(const e of u){const r=e.topic,o=e.qos,a=+e.nl,c=+e.rap,l=e.rh;let u;w(t,r),u=s.SUBSCRIBE_OPTIONS_QOS[o],5===i&&(u|=a?s.SUBSCRIBE_OPTIONS_NL:0,u|=c?s.SUBSCRIBE_OPTIONS_RAP:0,u|=l?s.SUBSCRIBE_OPTIONS_RH[l]:0),p=t.write(n.from([u]))}return p}(e,t,r);case"suback":return function(e,t,r){const i=r?r.protocolVersion:4,o=e||{},a=o.messageId,c=o.granted,l=o.properties;let u=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof c||!c.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<c.length;e+=1){if("number"!=typeof c[e])return t.destroy(new Error("Invalid qos vector")),!1;u+=1}let h=null;if(5===i){if(h=O(t,l,r,u),!h)return!1;u+=h.length}return t.write(s.SUBACK_HEADER),S(t,u),g(t,a),null!==h&&h.write(),t.write(n.from(c))}(e,t,r);case"unsubscribe":return function(e,t,r){const i=r?r.protocolVersion:4,o=e||{},a=o.messageId,c=o.dup?s.DUP_MASK:0,l=o.unsubscriptions,u=o.properties;let h=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(h+=2,"object"!=typeof l||!l.length)return t.destroy(new Error("Invalid unsubscriptions")),!1;for(let e=0;e<l.length;e+=1){if("string"!=typeof l[e])return t.destroy(new Error("Invalid unsubscriptions")),!1;h+=n.byteLength(l[e])+2}let d=null;if(5===i){if(d=A(t,u),!d)return!1;h+=d.length}t.write(s.UNSUBSCRIBE_HEADER[1][c?1:0][0]),S(t,h),g(t,a),null!==d&&d.write();let f=!0;for(let e=0;e<l.length;e++)f=w(t,l[e]);return f}(e,t,r);case"unsuback":return function(e,t,r){const i=r?r.protocolVersion:4,o=e||{},a=o.messageId,c=o.dup?s.DUP_MASK:0,l=o.granted,u=o.properties,h=o.cmd;let d=2;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(5===i){if("object"!=typeof l||!l.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<l.length;e+=1){if("number"!=typeof l[e])return t.destroy(new Error("Invalid qos vector")),!1;d+=1}}let f=null;if(5===i){if(f=O(t,u,r,d),!f)return!1;d+=f.length}return t.write(s.ACKS[h][0][c][0]),S(t,d),g(t,a),null!==f&&f.write(),5===i&&t.write(n.from(l)),!0}(e,t,r);case"pingreq":case"pingresp":return function(e,t){return t.write(s.EMPTY[e.cmd])}(e,t);case"disconnect":return function(e,t,r){const i=r?r.protocolVersion:4,o=e||{},a=o.reasonCode,c=o.properties;let l=5===i?1:0,u=null;if(5===i){if(u=O(t,c,r,l),!u)return!1;l+=u.length}return t.write(n.from([s.codes.disconnect<<4])),S(t,l),5===i&&t.write(n.from([a])),null!==u&&u.write(),!0}(e,t,r);case"auth":return function(e,t,r){const i=r?r.protocolVersion:4,o=e||{},a=o.reasonCode,c=o.properties;let l=5===i?1:0;5!==i&&t.destroy(new Error("Invalid mqtt version for auth packet"));const u=O(t,c,r,l);return!!u&&(l+=u.length,t.write(n.from([s.codes.auth<<4])),S(t,l),t.write(n.from([a])),null!==u&&u.write(),!0)}(e,t,r);default:return t.destroy(new Error("Unknown command")),!1}}function m(e){e.uncork()}Object.defineProperty(_,"cacheNumbers",{get:()=>g===E,set(e){e?(u&&0!==Object.keys(u).length||(b=!0),g=E):(b=!1,g=k)}});const y={};function S(e,t){if(t>s.VARBYTEINT_MAX)return e.destroy(new Error(`Invalid variable byte integer: ${t}`)),!1;let r=y[t];return r||(r=f(t),t<16384&&(y[t]=r)),l("writeVarByteInt: writing to stream: %o",r),e.write(r)}function w(e,t){const r=n.byteLength(t);return g(e,r),l("writeString: %s",t),e.write(t,"utf8")}function v(e,t,r){w(e,t),w(e,r)}function E(e,t){return l("writeNumberCached: number: %d",t),l("writeNumberCached: %o",u[t]),e.write(u[t])}function k(e,t){const r=h(t);return l("writeNumberGenerated: %o",r),e.write(r)}function I(e,t){"string"==typeof t?w(e,t):t?(g(e,t.length),e.write(t)):g(e,0)}function A(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){C(e,{},0)}};let r=0;function i(t,r){let i=0;switch(s.propertiesTypes[t]){case"byte":if("boolean"!=typeof r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=2;break;case"int8":if("number"!=typeof r||r<0||r>255)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=2;break;case"binary":if(r&&null===r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=1+n.byteLength(r)+2;break;case"int16":if("number"!=typeof r||r<0||r>65535)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=3;break;case"int32":if("number"!=typeof r||r<0||r>4294967295)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=5;break;case"var":if("number"!=typeof r||r<0||r>268435455)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=1+n.byteLength(f(r));break;case"string":if("string"!=typeof r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=3+n.byteLength(r.toString());break;case"pair":if("object"!=typeof r)return e.destroy(new Error(`Invalid ${t}: ${r}`)),!1;i+=Object.getOwnPropertyNames(r).reduce((e,t)=>{const s=r[t];return Array.isArray(s)?e+=s.reduce((e,r)=>e+(3+n.byteLength(t.toString())+2+n.byteLength(r.toString())),0):e+=3+n.byteLength(t.toString())+2+n.byteLength(r[t].toString()),e},0);break;default:return e.destroy(new Error(`Invalid property ${t}: ${r}`)),!1}return i}if(t)for(const e in t){let s=0,n=0;const o=t[e];if(void 0!==o){if(Array.isArray(o))for(let t=0;t<o.length;t++){if(n=i(e,o[t]),!n)return!1;s+=n}else{if(n=i(e,o),!n)return!1;s=n}if(!s)return!1;r+=s}}return{length:n.byteLength(f(r))+r,write(){C(e,t,r)}}}function O(e,t,r,s){const n=["reasonString","userProperties"],i=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let o=A(e,t);if(i)for(;s+o.length>i;){const r=n.shift();if(!r||!t[r])return!1;delete t[r],o=A(e,t)}return o}function T(e,t,r){switch(s.propertiesTypes[t]){case"byte":e.write(n.from([s.properties[t]])),e.write(n.from([+r]));break;case"int8":e.write(n.from([s.properties[t]])),e.write(n.from([r]));break;case"binary":e.write(n.from([s.properties[t]])),I(e,r);break;case"int16":e.write(n.from([s.properties[t]])),g(e,r);break;case"int32":e.write(n.from([s.properties[t]])),function(e,t){const r=p(t);l("write4ByteNumber: %o",r),e.write(r)}(e,r);break;case"var":e.write(n.from([s.properties[t]])),S(e,r);break;case"string":e.write(n.from([s.properties[t]])),w(e,r);break;case"pair":Object.getOwnPropertyNames(r).forEach(i=>{const o=r[i];Array.isArray(o)?o.forEach(r=>{e.write(n.from([s.properties[t]])),v(e,i.toString(),r.toString())}):(e.write(n.from([s.properties[t]])),v(e,i.toString(),o.toString()))});break;default:return e.destroy(new Error(`Invalid property ${t} value: ${r}`)),!1}}function C(e,t,r){S(e,r);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&null!=t[r]){const s=t[r];if(Array.isArray(s))for(let t=0;t<s.length;t++)T(e,r,s[t]);else T(e,r,s)}}function R(e){return e?e instanceof n?e.length:n.byteLength(e):0}function B(e){return"string"==typeof e||e instanceof n}e.exports=_},3141:(e,t,r)=>{"use strict";var s=r(2861).Buffer,n=s.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(s.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var s=r.charCodeAt(r.length-1);if(s>=55296&&s<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},i.prototype.text=function(e,t){var r=function(e,t,r){var s=t.length-1;if(s<r)return 0;var n=o(t[s]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--s<r||-2===n?0:(n=o(t[s]))>=0?(n>0&&(e.lastNeed=n-2),n):--s<r||-2===n?0:(n=o(t[s]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var s=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,s),e.toString("utf8",t,s)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},3175:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(7732));t.default=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,t){this.client=e,this.timer="object"==typeof t&&"set"in t&&"clear"in t?t:(0,n.default)(t),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;const e=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}}},3225:e=>{"use strict";"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?e.exports={nextTick:function(e,t,r,s){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,i,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,s)});default:for(n=new Array(o-1),i=0;i<n.length;)n[i++]=arguments[i];return process.nextTick(function(){e.apply(null,n)})}}}:e.exports=process},3338:(e,t,r)=>{"use strict";const{EMPTY_BUFFER:s}=r(2614),n=Buffer[Symbol.species];function i(e,t,r,s,n){for(let i=0;i<n;i++)r[s+i]=e[i]^t[3&i]}function o(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}if(e.exports={concat:function(e,t){if(0===e.length)return s;if(1===e.length)return e[0];const r=Buffer.allocUnsafe(t);let i=0;for(let t=0;t<e.length;t++){const s=e[t];r.set(s,i),i+=s.length}return i<t?new n(r.buffer,r.byteOffset,i):r},mask:i,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){if(e.readOnly=!0,Buffer.isBuffer(t))return t;let r;return t instanceof ArrayBuffer?r=new n(t):ArrayBuffer.isView(t)?r=new n(t.buffer,t.byteOffset,t.byteLength):(r=Buffer.from(t),e.readOnly=!1),r},unmask:o},!process.env.WS_NO_BUFFER_UTIL)try{const t=r(9727);e.exports.mask=function(e,r,s,n,o){o<48?i(e,r,s,n,o):t.mask(e,r,s,n,o)},e.exports.unmask=function(e,r){e.length<32?o(e,r):t.unmask(e,r)}}catch(e){}},3370:(e,t,r)=>{"use strict";const{ObjectDefineProperties:s,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:i,ObjectSetPrototypeOf:o}=r(4134);e.exports=l;const a=r(7576),c=r(8584);o(l.prototype,a.prototype),o(l,a);{const e=i(c.prototype);for(let t=0;t<e.length;t++){const r=e[t];l.prototype[r]||(l.prototype[r]=c.prototype[r])}}function l(e){if(!(this instanceof l))return new l(e);a.call(this,e),c.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,h;function d(){return void 0===u&&(u={}),u}s(l.prototype,{writable:{__proto__:null,...n(c.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(c.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(c.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(c.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(c.prototype,"writableLength")},writableFinished:{__proto__:null,...n(c.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(c.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(c.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(c.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),l.fromWeb=function(e,t){return d().newStreamDuplexFromReadableWritablePair(e,t)},l.toWeb=function(e){return d().newReadableWritablePairFromDuplex(e)},l.from=function(e){return h||(h=r(6706)),h(e,"body")}},3497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(9096),n=r(720);t.default=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(e){e>0&&(this.aliasToTopic=new s.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new n.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,t){if(0===t||t>this.max)return!1;const r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){const t=this.topicToAlias[e];return void 0!==t&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}},3719:(e,t,r)=>{"use strict";r(1060);const{Duplex:s}=r(2203);function n(e){e.emit("close")}function i(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let r=!0;const a=new s({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){const s=!r&&a._readableState.objectMode?t.toString():t;a.push(s)||e.pause()}),e.once("error",function(e){a.destroyed||(r=!1,a.destroy(e))}),e.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(t,s){if(e.readyState===e.CLOSED)return s(t),void process.nextTick(n,a);let i=!1;e.once("error",function(e){i=!0,s(e)}),e.once("close",function(){i||s(t),process.nextTick(n,a)}),r&&e.terminate()},a._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),a._readableState.endEmitted&&a.destroy()):(e._socket.once("finish",function(){t()}),e.close())):e.once("open",function(){a._final(t)})},a._read=function(){e.isPaused&&e.resume()},a._write=function(t,r,s){e.readyState!==e.CONNECTING?e.send(t,s):e.once("open",function(){a._write(t,r,s)})},a.on("end",i),a.on("error",o),a}},3763:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleArray=t.SocksClientError=void 0;class r extends Error{constructor(e,t){super(e),this.options=t}}t.SocksClientError=r,t.shuffleArray=function(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}}},3885:(e,t,r)=>{"use strict";e.exports=r(9844)()},3936:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(4756),i=s(r(9278)),o=s(r(8539)),a=s(r(6968)),c=(0,o.default)("mqttjs:tls");t.default=(e,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===i.default.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,c("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const r=function(e){const{host:t,port:r,socksProxy:s,...i}=e;if(void 0!==s){const o=(0,a.default)(t,r,s,{timeout:e.socksTimeout});return(0,n.connect)({...i,socket:o})}return(0,n.connect)(e)}(t);function s(s){t.rejectUnauthorized&&e.emit("error",s),r.end()}return r.on("secureConnect",()=>{t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",s)}),r.on("error",s),r}},4134:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},4147:(e,t,r)=>{"use strict";const{SymbolDispose:s}=r(4134),{AbortError:n,codes:i}=r(6371),{isNodeStream:o,isWebStream:a,kControllerErrorFunction:c}=r(6115),l=r(6238),{ERR_INVALID_ARG_TYPE:u}=i;let h;e.exports.addAbortSignal=function(t,r){if((e=>{if("object"!=typeof e||!("aborted"in e))throw new u("signal","AbortSignal",e)})(t),!o(r)&&!a(r))throw new u("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const i=o(t)?()=>{t.destroy(new n(void 0,{cause:e.reason}))}:()=>{t[c](new n(void 0,{cause:e.reason}))};if(e.aborted)i();else{h=h||r(7760).addAbortListener;const n=h(e,i);l(t,n[s])}return t}},4152:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=void 0;const n=s(r(4434)),i=r(4723);class o{}t.TypedEventEmitter=o,(0,i.applyMixin)(o,n.default)},4259:(e,t,r)=>{"use strict";const{ArrayIsArray:s,ObjectSetPrototypeOf:n}=r(4134),{EventEmitter:i}=r(4434);function o(e){i.call(this,e)}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}n(o.prototype,i.prototype),n(o,i),o.prototype.pipe=function(e,t){const r=this;function s(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function n(){r.readable&&r.resume&&r.resume()}r.on("data",s),e.on("drain",n),e._isStdio||t&&!1===t.end||(r.on("end",c),r.on("close",l));let o=!1;function c(){o||(o=!0,e.end())}function l(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){h(),0===i.listenerCount(this,"error")&&this.emit("error",e)}function h(){r.removeListener("data",s),e.removeListener("drain",n),r.removeListener("end",c),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return a(r,"error",u),a(e,"error",u),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e},e.exports={Stream:o,prependListener:a}},4264:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t,r)=>{e.log("handling pubrel packet");const s=void 0!==r?r:e.noop,{messageId:n}=t,i={cmd:"pubcomp",messageId:n};e.incomingStore.get(t,(t,r)=>{t?e._sendPacket(i,s):(e.emit("message",r.topic,r.payload,r),e.handleMessage(r,t=>{if(t)return s(t);e.incomingStore.del(r,e.noop),e._sendPacket(i,s)}))})}},4422:e=>{e.exports=global.process},4434:e=>{"use strict";e.exports=require("events")},4478:(e,t,r)=>{"use strict";const s=r(2203);if(s&&"disable"===process.env.READABLE_STREAM){const t=s.promises;e.exports._uint8ArrayToBuffer=s._uint8ArrayToBuffer,e.exports._isUint8Array=s._isUint8Array,e.exports.isDisturbed=s.isDisturbed,e.exports.isErrored=s.isErrored,e.exports.isReadable=s.isReadable,e.exports.Readable=s.Readable,e.exports.Writable=s.Writable,e.exports.Duplex=s.Duplex,e.exports.Transform=s.Transform,e.exports.PassThrough=s.PassThrough,e.exports.addAbortSignal=s.addAbortSignal,e.exports.finished=s.finished,e.exports.destroy=s.destroy,e.exports.pipeline=s.pipeline,e.exports.compose=s.compose,Object.defineProperty(s,"promises",{configurable:!0,enumerable:!0,get:()=>t}),e.exports.Stream=s.Stream}else{const t=r(5506),s=r(3095),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>s}),e.exports.Stream=t.Stream}e.exports.default=e.exports},4723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQTTJS_VERSION=t.nextTick=t.ErrorWithSubackPacket=t.ErrorWithReasonCode=void 0,t.applyMixin=function(e,t,r=!1){const s=[t];for(;;){const e=s[0],t=Object.getPrototypeOf(e);if(!t?.prototype)break;s.unshift(t)}for(const t of s)for(const s of Object.getOwnPropertyNames(t.prototype))(r||"constructor"!==s)&&Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)??Object.create(null))};class s extends Error{code;constructor(e,t){super(e),this.code=t,Object.setPrototypeOf(this,s.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}}t.ErrorWithReasonCode=s;class n extends Error{packet;constructor(e,t){super(e),this.packet=t,Object.setPrototypeOf(this,n.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}}t.ErrorWithSubackPacket=n,t.nextTick="function"==typeof process?.nextTick?process.nextTick:e=>{setTimeout(e,0)},t.MQTTJS_VERSION=r(2860).version},4756:e=>{"use strict";e.exports=require("tls")},4759:e=>{"use strict";const t=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[t])}}}},4829:(e,t,r)=>{"use strict";const s=r(4478).Duplex,n=r(2017),i=r(7813);function o(e){if(!(this instanceof o))return new o(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}i._init.call(this,e),s.call(this)}n(o,s),Object.assign(o.prototype,i.prototype),o.prototype._new=function(e){return new o(e)},o.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},o.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},o.prototype.end=function(e){s.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},o.prototype._isBufferList=function(e){return e instanceof o||e instanceof i||o.isBufferList(e)},o.isBufferList=i.isBufferList,e.exports=o,e.exports.BufferListStream=o,e.exports.BufferList=i},4959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=[0,16,128,131,135,144,145,151,153];t.default=(e,t,s)=>{e.log("handlePublish: packet %o",t),s=void 0!==s?s:e.noop;let n=t.topic.toString();const i=t.payload,{qos:o}=t,{messageId:a}=t,{options:c}=e;if(5===e.options.protocolVersion){let r;if(t.properties&&(r=t.properties.topicAlias),void 0!==r)if(0===n.length){if(!(r>0&&r<=65535))return e.log("handlePublish :: topic alias out of range. alias: %d",r),void e.emit("error",new Error("Received Topic Alias is out of range"));{const t=e.topicAliasRecv.getTopicByAlias(r);if(!t)return e.log("handlePublish :: unregistered topic alias. alias: %d",r),void e.emit("error",new Error("Received unregistered Topic Alias"));n=t,e.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,r)}}else{if(!e.topicAliasRecv.put(n,r))return e.log("handlePublish :: topic alias out of range. alias: %d",r),void e.emit("error",new Error("Received Topic Alias is out of range"));e.log("handlePublish :: registered topic: %s - alias: %d",n,r)}}switch(e.log("handlePublish: qos %d",o),o){case 2:c.customHandleAcks(n,i,t,(n,i)=>("number"==typeof n&&(i=n,n=null),n?e.emit("error",n):-1===r.indexOf(i)?e.emit("error",new Error("Wrong reason code for pubrec")):void(i?e._sendPacket({cmd:"pubrec",messageId:a,reasonCode:i},s):e.incomingStore.put(t,()=>{e._sendPacket({cmd:"pubrec",messageId:a},s)}))));break;case 1:c.customHandleAcks(n,i,t,(o,c)=>("number"==typeof o&&(c=o,o=null),o?e.emit("error",o):-1===r.indexOf(c)?e.emit("error",new Error("Wrong reason code for puback")):(c||e.emit("message",n,i,t),void e.handleMessage(t,t=>{if(t)return s&&s(t);e._sendPacket({cmd:"puback",messageId:a,reasonCode:c},s)}))));break;case 0:e.emit("message",n,i,t),e.handleMessage(t,s);break;default:e.log("handlePublish: unknown QoS. Doing nothing.")}}},4988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=new WeakMap,s=new WeakMap;function n(e){const t=r.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function i(e){null==e.passiveListener?e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault()):"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener)}function o(e,t){r.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});const s=Object.keys(t);for(let e=0;e<s.length;++e){const t=s[e];t in this||Object.defineProperty(this,t,a(t))}}function a(e){return{get(){return n(this).event[e]},set(t){n(this).event[e]=t},configurable:!0,enumerable:!0}}function c(e){return{value(){const t=n(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function l(e){if(null==e||e===Object.prototype)return o;let t=s.get(e);return null==t&&(t=function(e,t){const r=Object.keys(t);if(0===r.length)return e;function s(t,r){e.call(this,t,r)}s.prototype=Object.create(e.prototype,{constructor:{value:s,configurable:!0,writable:!0}});for(let n=0;n<r.length;++n){const i=r[n];if(!(i in e.prototype)){const e="function"==typeof Object.getOwnPropertyDescriptor(t,i).value;Object.defineProperty(s.prototype,i,e?c(i):a(i))}}return s}(l(Object.getPrototypeOf(e)),e),s.set(e,t)),t}function u(e){return n(e).immediateStopped}function h(e,t){n(e).passiveListener=t}o.prototype={get type(){return n(this).event.type},get target(){return n(this).eventTarget},get currentTarget(){return n(this).currentTarget},composedPath(){const e=n(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return n(this).eventPhase},stopPropagation(){const e=n(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){const e=n(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return Boolean(n(this).event.bubbles)},get cancelable(){return Boolean(n(this).event.cancelable)},preventDefault(){i(n(this))},get defaultPrevented(){return n(this).canceled},get composed(){return Boolean(n(this).event.composed)},get timeStamp(){return n(this).timeStamp},get srcElement(){return n(this).eventTarget},get cancelBubble(){return n(this).stopped},set cancelBubble(e){if(!e)return;const t=n(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!n(this).canceled},set returnValue(e){e||i(n(this))},initEvent(){}},Object.defineProperty(o.prototype,"constructor",{value:o,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(o.prototype,window.Event.prototype),s.set(window.Event.prototype,o));const d=new WeakMap;function f(e){return null!==e&&"object"==typeof e}function p(e){const t=d.get(e);if(null==t)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return t}function g(e,t){Object.defineProperty(e,`on${t}`,function(e){return{get(){let t=p(this).get(e);for(;null!=t;){if(3===t.listenerType)return t.listener;t=t.next}return null},set(t){"function"==typeof t||f(t)||(t=null);const r=p(this);let s=null,n=r.get(e);for(;null!=n;)3===n.listenerType?null!==s?s.next=n.next:null!==n.next?r.set(e,n.next):r.delete(e):s=n,n=n.next;if(null!==t){const n={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===s?r.set(e,n):s.next=n}},configurable:!0,enumerable:!0}}(t))}function b(e){function t(){_.call(this)}t.prototype=Object.create(_.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)g(t.prototype,e[r]);return t}function _(){if(!(this instanceof _)){if(1===arguments.length&&Array.isArray(arguments[0]))return b(arguments[0]);if(arguments.length>0){const e=new Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return b(e)}throw new TypeError("Cannot call a class as a function")}d.set(this,new Map)}_.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!f(t))throw new TypeError("'listener' should be a function or an object.");const s=p(this),n=f(r),i=(n?Boolean(r.capture):Boolean(r))?1:2,o={listener:t,listenerType:i,passive:n&&Boolean(r.passive),once:n&&Boolean(r.once),next:null};let a=s.get(e);if(void 0===a)return void s.set(e,o);let c=null;for(;null!=a;){if(a.listener===t&&a.listenerType===i)return;c=a,a=a.next}c.next=o},removeEventListener(e,t,r){if(null==t)return;const s=p(this),n=(f(r)?Boolean(r.capture):Boolean(r))?1:2;let i=null,o=s.get(e);for(;null!=o;){if(o.listener===t&&o.listenerType===n)return void(null!==i?i.next=o.next:null!==o.next?s.set(e,o.next):s.delete(e));i=o,o=o.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw new TypeError('"event.type" should be a string.');const t=p(this),r=e.type;let s=t.get(r);if(null==s)return!0;const i=function(e,t){return new(l(Object.getPrototypeOf(t)))(e,t)}(this,e);let o=null;for(;null!=s;){if(s.once?null!==o?o.next=s.next:null!==s.next?t.set(r,s.next):t.delete(r):o=s,h(i,s.passive?s.listener:null),"function"==typeof s.listener)try{s.listener.call(this,i)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==s.listenerType&&"function"==typeof s.listener.handleEvent&&s.listener.handleEvent(i);if(u(i))break;s=s.next}return h(i,null),function(e){n(e).eventPhase=0}(i),function(e){n(e).currentTarget=null}(i),!i.defaultPrevented}},Object.defineProperty(_.prototype,"constructor",{value:_,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(_.prototype,window.EventTarget.prototype),t.defineEventAttribute=g,t.EventTarget=_,t.default=_,e.exports=_,e.exports.EventTarget=e.exports.default=_,e.exports.defineEventAttribute=g},5228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(4723),n=r(1021);t.default=(e,t)=>{const{options:r}=e,i=r.protocolVersion,o=5===i?t.reasonCode:t.returnCode;if(5!==i){const t=new s.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${i}`,o);return void e.emit("error",t)}e.handleAuth(t,(t,r)=>{if(t)e.emit("error",t);else if(24===o)e.reconnecting=!1,e._sendPacket(r);else{const t=new s.ErrorWithReasonCode(`Connection refused: ${n.ReasonCodes[o]}`,o);e.emit("error",t)}})}},5291:(e,t,r)=>{"use strict";const{MathFloor:s,NumberIsInteger:n}=r(4134),{validateInteger:i}=r(277),{ERR_INVALID_ARG_VALUE:o}=r(6371).codes;let a=16384,c=16;function l(e){return e?c:a}e.exports={getHighWaterMark:function(e,t,r,i){const a=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=a){if(!n(a)||a<0)throw new o(i?`options.${r}`:"options.highWaterMark",a);return s(a)}return l(e.objectMode)},getDefaultHighWaterMark:l,setDefaultHighWaterMark:function(e,t){i(t,"value",0),e?c=t:a=t}}},5399:(e,t,r)=>{const s=e.exports,{Buffer:n}=r(181);s.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},s.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},s.requiredHeaderFlagsErrors={};for(const e in s.requiredHeaderFlags){const t=s.requiredHeaderFlags[e];s.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+s.types[e]+" packet"}s.codes={};for(const e in s.types){const t=s.types[e];s.codes[t]=e}s.CMD_SHIFT=4,s.CMD_MASK=240,s.DUP_MASK=8,s.QOS_MASK=3,s.QOS_SHIFT=1,s.RETAIN_MASK=1,s.VARBYTEINT_MASK=127,s.VARBYTEINT_FIN_MASK=128,s.VARBYTEINT_MAX=268435455,s.SESSIONPRESENT_MASK=1,s.SESSIONPRESENT_HEADER=n.from([s.SESSIONPRESENT_MASK]),s.CONNACK_HEADER=n.from([s.codes.connack<<s.CMD_SHIFT]),s.USERNAME_MASK=128,s.PASSWORD_MASK=64,s.WILL_RETAIN_MASK=32,s.WILL_QOS_MASK=24,s.WILL_QOS_SHIFT=3,s.WILL_FLAG_MASK=4,s.CLEAN_SESSION_MASK=2,s.CONNECT_HEADER=n.from([s.codes.connect<<s.CMD_SHIFT]),s.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},s.propertiesCodes={};for(const e in s.properties){const t=s.properties[e];s.propertiesCodes[t]=e}function i(e){return[0,1,2].map(t=>[0,1].map(r=>[0,1].map(i=>{const o=n.alloc(1);return o.writeUInt8(s.codes[e]<<s.CMD_SHIFT|(r?s.DUP_MASK:0)|t<<s.QOS_SHIFT|i,0,!0),o})))}s.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},s.PUBLISH_HEADER=i("publish"),s.SUBSCRIBE_HEADER=i("subscribe"),s.SUBSCRIBE_OPTIONS_QOS_MASK=3,s.SUBSCRIBE_OPTIONS_NL_MASK=1,s.SUBSCRIBE_OPTIONS_NL_SHIFT=2,s.SUBSCRIBE_OPTIONS_RAP_MASK=1,s.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,s.SUBSCRIBE_OPTIONS_RH_MASK=3,s.SUBSCRIBE_OPTIONS_RH_SHIFT=4,s.SUBSCRIBE_OPTIONS_RH=[0,16,32],s.SUBSCRIBE_OPTIONS_NL=4,s.SUBSCRIBE_OPTIONS_RAP=8,s.SUBSCRIBE_OPTIONS_QOS=[0,1,2],s.UNSUBSCRIBE_HEADER=i("unsubscribe"),s.ACKS={unsuback:i("unsuback"),puback:i("puback"),pubcomp:i("pubcomp"),pubrel:i("pubrel"),pubrec:i("pubrec")},s.SUBACK_HEADER=n.from([s.codes.suback<<s.CMD_SHIFT]),s.VERSION3=n.from([3]),s.VERSION4=n.from([4]),s.VERSION5=n.from([5]),s.VERSION131=n.from([131]),s.VERSION132=n.from([132]),s.QOS=[0,1,2].map(e=>n.from([e])),s.EMPTY={pingreq:n.from([s.codes.pingreq<<4,0]),pingresp:n.from([s.codes.pingresp<<4,0]),disconnect:n.from([s.codes.disconnect<<4,0])},s.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},s.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},s.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},s.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},s.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},s.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}},5419:(e,t,r)=>{const s=r(2018),n=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(r){const{namespace:s,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),i=`  ${n};1m${s} [0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(7442)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},5438:(e,t)=>{"use strict";var r,s,n,i,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKS5_NO_ACCEPTABLE_AUTH=t.SOCKS5_CUSTOM_AUTH_END=t.SOCKS5_CUSTOM_AUTH_START=t.SOCKS_INCOMING_PACKET_SIZES=t.SocksClientState=t.Socks5Response=t.Socks5HostType=t.Socks5Auth=t.Socks4Response=t.SocksCommand=t.ERRORS=t.DEFAULT_TIMEOUT=void 0,t.DEFAULT_TIMEOUT=3e4,t.ERRORS={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"},t.SOCKS_INCOMING_PACKET_SIZES={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:e=>e+7,Socks4Response:8},function(e){e[e.connect=1]="connect",e[e.bind=2]="bind",e[e.associate=3]="associate"}(r||(t.SocksCommand=r={})),function(e){e[e.Granted=90]="Granted",e[e.Failed=91]="Failed",e[e.Rejected=92]="Rejected",e[e.RejectedIdent=93]="RejectedIdent"}(s||(t.Socks4Response=s={})),function(e){e[e.NoAuth=0]="NoAuth",e[e.GSSApi=1]="GSSApi",e[e.UserPass=2]="UserPass"}(n||(t.Socks5Auth=n={})),t.SOCKS5_CUSTOM_AUTH_START=128,t.SOCKS5_CUSTOM_AUTH_END=254,t.SOCKS5_NO_ACCEPTABLE_AUTH=255,function(e){e[e.Granted=0]="Granted",e[e.Failure=1]="Failure",e[e.NotAllowed=2]="NotAllowed",e[e.NetworkUnreachable=3]="NetworkUnreachable",e[e.HostUnreachable=4]="HostUnreachable",e[e.ConnectionRefused=5]="ConnectionRefused",e[e.TTLExpired=6]="TTLExpired",e[e.CommandNotSupported=7]="CommandNotSupported",e[e.AddressNotSupported=8]="AddressNotSupported"}(i||(t.Socks5Response=i={})),function(e){e[e.IPv4=1]="IPv4",e[e.Hostname=3]="Hostname",e[e.IPv6=4]="IPv6"}(o||(t.Socks5HostType=o={})),function(e){e[e.Created=0]="Created",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.SentInitialHandshake=3]="SentInitialHandshake",e[e.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",e[e.SentAuthentication=5]="SentAuthentication",e[e.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",e[e.SentFinalHandshake=7]="SentFinalHandshake",e[e.ReceivedFinalResponse=8]="ReceivedFinalResponse",e[e.BoundWaitingForConnection=9]="BoundWaitingForConnection",e[e.Established=10]="Established",e[e.Disconnected=11]="Disconnected",e[e.Error=99]="Error"}(a||(t.SocksClientState=a={}))},5506:(e,t,r)=>{"use strict";const{Buffer:s}=r(181),{ObjectDefineProperty:n,ObjectKeys:i,ReflectApply:o}=r(4134),{promisify:{custom:a}}=r(7760),{streamReturningOperators:c,promiseReturningOperators:l}=r(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=r(6371),h=r(7830),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:f}=r(5291),{pipeline:p}=r(7758),{destroyer:g}=r(5896),b=r(6238),_=r(3095),m=r(6115),y=e.exports=r(4259).Stream;y.isDestroyed=m.isDestroyed,y.isDisturbed=m.isDisturbed,y.isErrored=m.isErrored,y.isReadable=m.isReadable,y.isWritable=m.isWritable,y.Readable=r(7576);for(const w of i(c)){const v=c[w];function E(...e){if(new.target)throw u();return y.Readable.from(o(v,this,e))}n(E,"name",{__proto__:null,value:v.name}),n(E,"length",{__proto__:null,value:v.length}),n(y.Readable.prototype,w,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}for(const k of i(l)){const I=l[k];function A(...e){if(new.target)throw u();return o(I,this,e)}n(A,"name",{__proto__:null,value:I.name}),n(A,"length",{__proto__:null,value:I.length}),n(y.Readable.prototype,k,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}y.Writable=r(8584),y.Duplex=r(3370),y.Transform=r(7382),y.PassThrough=r(6524),y.pipeline=p;const{addAbortSignal:S}=r(4147);y.addAbortSignal=S,y.finished=b,y.destroy=g,y.compose=h,y.setDefaultHighWaterMark=d,y.getDefaultHighWaterMark=f,n(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>_}),n(p,a,{__proto__:null,enumerable:!0,get:()=>_.pipeline}),n(b,a,{__proto__:null,enumerable:!0,get:()=>_.finished}),y.Stream=y,y._isUint8Array=function(e){return e instanceof Uint8Array},y._uint8ArrayToBuffer=function(e){return s.from(e.buffer,e.byteOffset,e.byteLength)}},5670:(e,t,r)=>{"use strict";const s=r(181),n=r(4478),i=r(2635);let o,a,c;t.A=(e,t)=>{if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(t);const l=function(e,t){const r="wxs"===e.protocol?"wss":"ws";let s=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(s=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(s=e.transformWsUrl(s,e,t)),s}(t,e);o=wx.connectSocket({url:l,protocols:[r]}),a=function(){const e=new n.Transform;return e._write=(e,t,r)=>{o.send({data:e.buffer,success(){r()},fail(e){r(new Error(e))}})},e._flush=e=>{o.close({success(){e()}})},e}(),c=new i.BufferedDuplex(t,a,o),c._destroy=(e,t)=>{o.close({success(){t&&t(e)}})};const u=c.destroy;return c.destroy=(e,t)=>(c.destroy=u,setTimeout(()=>{o.close({fail(){c._destroy(e,t)}})},0),c),o.onOpen(()=>{c.socketReady()}),o.onMessage(e=>{let{data:t}=e;t=t instanceof ArrayBuffer?s.Buffer.from(t):s.Buffer.from(t,"utf8"),a.push(t)}),o.onClose(()=>{c.emit("close"),c.end(),c.destroy()}),o.onError(e=>{const t=new Error(e.errMsg);c.destroy(t)}),c}},5692:e=>{"use strict";e.exports=require("https")},5753:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(7833):e.exports=r(6033)},5861:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7631),t)},5880:(e,t,r)=>{"use strict";const{isUtf8:s}=r(181),{hasBlob:n}=r(2614);function i(e){const t=e.length;let r=0;for(;r<t;)if(128&e[r])if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}else r++;return!0}if(e.exports={isBlob:function(e){return n&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:i,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},s)e.exports.isValidUTF8=function(e){return e.length<24?i(e):s(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const t=r(7990);e.exports.isValidUTF8=function(e){return e.length<32?i(e):t(e)}}catch(e){}},5884:e=>{"use strict";e.exports=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return-1!==s&&(-1===n||s<n)}},5896:(e,t,r)=>{"use strict";const s=r(4422),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:o}=r(6371),{Symbol:a}=r(4134),{kIsDestroyed:c,isDestroyed:l,isFinished:u,isServerRequest:h}=r(6115),d=a("kDestroy"),f=a("kConstruct");function p(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function g(e,t,r){let n=!1;function i(t){if(n)return;n=!0;const i=e._readableState,o=e._writableState;p(t,o,i),o&&(o.closed=!0),i&&(i.closed=!0),"function"==typeof r&&r(t),t?s.nextTick(b,e,t):s.nextTick(_,e)}try{e._destroy(t||null,i)}catch(t){i(t)}}function b(e,t){m(e,t),_(e)}function _(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function m(e,t){const r=e._readableState,s=e._writableState;null!=s&&s.errorEmitted||null!=r&&r.errorEmitted||(s&&(s.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function y(e,t,r){const n=e._readableState,i=e._writableState;if(null!=i&&i.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=i&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?s.nextTick(m,e,t):m(e,t))}function S(e){let t=!1;function r(r){if(t)return void y(e,null!=r?r:new i);t=!0;const n=e._readableState,o=e._writableState,a=o||n;n&&(n.constructed=!0),o&&(o.constructed=!0),a.destroyed?e.emit(d,r):r?y(e,r,!0):s.nextTick(w,e)}try{e._construct(e=>{s.nextTick(r,e)})}catch(e){s.nextTick(r,e)}}function w(e){e.emit(f)}function v(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function E(e){e.emit("close")}function k(e,t){e.emit("error",t),s.nextTick(E,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(f,t),e.listenerCount(f)>1||s.nextTick(S,e)},destroyer:function(e,t){e&&!l(e)&&(t||u(e)||(t=new o),h(e)?(e.socket=null,e.destroy(t)):v(e)?e.abort():v(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?s.nextTick(k,e,t):s.nextTick(E,e),e.destroyed||(e[c]=!0))},destroy:function(e,t){const r=this._readableState,s=this._writableState,i=s||r;return null!=s&&s.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(p(e,s,r),s&&(s.destroyed=!0),r&&(r.destroyed=!0),i.constructed?g(this,e,t):this.once(d,function(r){g(this,n(r,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:y}},5926:(e,t,r)=>{"use strict";const{tokenChars:s}=r(5880);function n(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}e.exports={format:function(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);let r,i,o=Object.create(null),a=!1,c=!1,l=!1,u=-1,h=-1,d=-1,f=0;for(;f<e.length;f++)if(h=e.charCodeAt(f),void 0===r)if(-1===d&&1===s[h])-1===u&&(u=f);else if(0===f||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);const s=e.slice(u,d);44===h?(n(t,s,o),o=Object.create(null)):r=s,u=d=-1}}else-1===d&&-1!==u&&(d=f);else if(void 0===i)if(-1===d&&1===s[h])-1===u&&(u=f);else if(32===h||9===h)-1===d&&-1!==u&&(d=f);else if(59===h||44===h){if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f),n(o,e.slice(u,d),!0),44===h&&(n(t,r,o),o=Object.create(null),r=void 0),u=d=-1}else{if(61!==h||-1===u||-1!==d)throw new SyntaxError(`Unexpected character at index ${f}`);i=e.slice(u,f),u=d=-1}else if(c){if(1!==s[h])throw new SyntaxError(`Unexpected character at index ${f}`);-1===u?u=f:a||(a=!0),c=!1}else if(l)if(1===s[h])-1===u&&(u=f);else if(34===h&&-1!==u)l=!1,d=f;else{if(92!==h)throw new SyntaxError(`Unexpected character at index ${f}`);c=!0}else if(34===h&&61===e.charCodeAt(f-1))l=!0;else if(-1===d&&1===s[h])-1===u&&(u=f);else if(-1===u||32!==h&&9!==h){if(59!==h&&44!==h)throw new SyntaxError(`Unexpected character at index ${f}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${f}`);-1===d&&(d=f);let s=e.slice(u,d);a&&(s=s.replace(/\\/g,""),a=!1),n(o,i,s),44===h&&(n(t,r,o),o=Object.create(null),r=void 0),i=void 0,u=d=-1}}else-1===d&&(d=f);if(-1===u||l||32===h||9===h)throw new SyntaxError("Unexpected end of input");-1===d&&(d=f);const p=e.slice(u,d);return void 0===r?n(t,p,o):(void 0===i?n(o,p,!0):n(o,i,a?p.replace(/\\/g,""):p),n(t,r,o)),t}}},6033:(e,t,r)=>{const s=r(2018),n=r(9023);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:s,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),i=`  ${n};1m${s} [0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=n.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(7687);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e},{}),e.exports=r(736)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},6115:(e,t,r)=>{"use strict";const{SymbolAsyncIterator:s,SymbolIterator:n,SymbolFor:i}=r(4134),o=i("nodejs.stream.destroyed"),a=i("nodejs.stream.errored"),c=i("nodejs.stream.readable"),l=i("nodejs.stream.writable"),u=i("nodejs.stream.disturbed"),h=i("nodejs.webstream.isClosedPromise"),d=i("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function p(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function g(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function b(e){return!(!e||g(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function _(e){return!(!e||g(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function m(e){return!(!e||g(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function y(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,s=t||r;return!!(e.destroyed||e[o]||null!=s&&s.destroyed)}function S(e){if(!p(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function w(e,t){if(!f(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function v(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!y(e)&&f(e)&&e.readable&&!w(e)}function E(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!y(e)&&p(e)&&e.writable&&!S(e)}function k(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&k(e)}e.exports={isDestroyed:y,kIsDestroyed:o,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,r,s,n,i,o,c,l,u,h;return!(!e||!(null!==(t=null!==(r=null!==(s=null!==(n=null!==(i=null!==(o=e[a])&&void 0!==o?o:e.readableErrored)&&void 0!==i?i:e.writableErrored)&&void 0!==n?n:null===(c=e._readableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==s?s:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(h=e._writableState)||void 0===h?void 0:h.errored))},kIsErrored:a,isReadable:v,kIsReadable:c,kIsClosedPromise:h,kControllerErrorFunction:d,kIsWritable:l,isClosed:function(e){if(!g(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&k(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return g(e)?!(!y(e)&&(!1!==(null==t?void 0:t.readable)&&v(e)||!1!==(null==t?void 0:t.writable)&&E(e))):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[s]:!1===t?"function"==typeof e[n]:"function"==typeof e[s]||"function"==typeof e[n])},isReadableNodeStream:f,isReadableStream:b,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:w,isReadableErrored:function(e){var t,r;return g(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:g,isWebStream:function(e){return b(e)||_(e)||m(e)},isWritable:E,isWritableNodeStream:p,isWritableStream:_,isWritableEnded:S,isWritableFinished:function(e,t){if(!p(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return g(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){if(!g(e))return null;const t=e._writableState,r=e._readableState,s=t||r;return!s&&I(e)||!!(s&&s.autoDestroy&&s.emitClose&&!1===s.closed)},isTransformStream:m}},6172:(e,t,r)=>{const{Buffer:s}=r(181),n={},i=s.isBuffer(s.from([1,2]).subarray(0,1));function o(e){const t=s.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}e.exports={cache:n,generateCache:function(){for(let e=0;e<65536;e++)n[e]=o(e)},generateNumber:o,genBufVariableByteInt:function(e){let t=0,r=0;const n=s.allocUnsafe(4);do{t=e%128|0,(e=e/128|0)>0&&(t|=128),n.writeUInt8(t,r++)}while(e>0&&r<4);return e>0&&(r=0),i?n.subarray(0,r):n.slice(0,r)},generate4ByteBuffer:function(e){const t=s.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}},6238:(e,t,r)=>{"use strict";const s=r(4422),{AbortError:n,codes:i}=r(6371),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:a}=i,{kEmptyObject:c,once:l}=r(7760),{validateAbortSignal:u,validateFunction:h,validateObject:d,validateBoolean:f}=r(277),{Promise:p,PromisePrototypeThen:g,SymbolDispose:b}=r(4134),{isClosed:_,isReadable:m,isReadableNodeStream:y,isReadableStream:S,isReadableFinished:w,isReadableErrored:v,isWritable:E,isWritableNodeStream:k,isWritableStream:I,isWritableFinished:A,isWritableErrored:O,isNodeStream:T,willEmitClose:C,kIsClosedPromise:R}=r(6115);let B;const x=()=>{};function P(e,t,i){var f,p;if(2===arguments.length?(i=t,t=c):null==t?t=c:d(t,"options"),h(i,"callback"),u(t.signal,"options.signal"),i=l(i),S(e)||I(e))return function(e,t,i){let o=!1,a=x;if(t.signal)if(a=()=>{o=!0,i.call(e,new n(void 0,{cause:t.signal.reason}))},t.signal.aborted)s.nextTick(a);else{B=B||r(7760).addAbortListener;const s=B(t.signal,a),n=i;i=l((...t)=>{s[b](),n.apply(e,t)})}const c=(...t)=>{o||s.nextTick(()=>i.apply(e,t))};return g(e[R].promise,c,c),x}(e,t,i);if(!T(e))throw new o("stream",["ReadableStream","WritableStream","Stream"],e);const P=null!==(f=t.readable)&&void 0!==f?f:y(e),N=null!==(p=t.writable)&&void 0!==p?p:k(e),M=e._writableState,L=e._readableState,U=()=>{e.writable||F()};let j=C(e)&&y(e)===P&&k(e)===N,D=A(e,!1);const F=()=>{D=!0,e.destroyed&&(j=!1),(!j||e.readable&&!P)&&(P&&!W||i.call(e))};let W=w(e,!1);const $=()=>{W=!0,e.destroyed&&(j=!1),(!j||e.writable&&!N)&&(N&&!D||i.call(e))},V=t=>{i.call(e,t)};let H=_(e);const z=()=>{H=!0;const t=O(e)||v(e);return t&&"boolean"!=typeof t?i.call(e,t):P&&!W&&y(e,!0)&&!w(e,!1)?i.call(e,new a):!N||D||A(e,!1)?void i.call(e):i.call(e,new a)},K=()=>{H=!0;const t=O(e)||v(e);if(t&&"boolean"!=typeof t)return i.call(e,t);i.call(e)},q=()=>{e.req.on("finish",F)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?N&&!M&&(e.on("end",U),e.on("close",U)):(e.on("complete",F),j||e.on("abort",z),e.req?q():e.on("request",q)),j||"boolean"!=typeof e.aborted||e.on("aborted",z),e.on("end",$),e.on("finish",F),!1!==t.error&&e.on("error",V),e.on("close",z),H?s.nextTick(z):null!=M&&M.errorEmitted||null!=L&&L.errorEmitted?j||s.nextTick(K):(P||j&&!m(e)||!D&&!1!==E(e))&&(N||j&&!E(e)||!W&&!1!==m(e))?L&&e.req&&e.aborted&&s.nextTick(K):s.nextTick(K);const G=()=>{i=x,e.removeListener("aborted",z),e.removeListener("complete",F),e.removeListener("abort",z),e.removeListener("request",q),e.req&&e.req.removeListener("finish",F),e.removeListener("end",U),e.removeListener("close",U),e.removeListener("finish",F),e.removeListener("end",$),e.removeListener("error",V),e.removeListener("close",z)};if(t.signal&&!H){const o=()=>{const r=i;G(),r.call(e,new n(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)s.nextTick(o);else{B=B||r(7760).addAbortListener;const s=B(t.signal,o),n=i;i=l((...t)=>{s[b](),n.apply(e,t)})}}return G}e.exports=P,e.exports.finished=function(e,t){var r;let s=!1;return null===t&&(t=c),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),s=t.cleanup),new p((r,n)=>{const i=P(e,t,e=>{s&&i(),e?n(e):r()})})}},6286:(e,t,r)=>{"use strict";const{Writable:s}=r(2203),n=r(2971),{BINARY_TYPES:i,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=r(2614),{concat:l,toArrayBuffer:u,unmask:h}=r(3338),{isValidStatusCode:d,isValidUTF8:f}=r(5880),p=Buffer[Symbol.species];e.exports=class extends s{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||i[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[c]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new p(t.buffer,t.byteOffset+e,t.length-e),new p(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0],s=t.length-e;e>=r.length?t.set(this._buffers.shift(),s):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),s),this._buffers[0]=new p(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(48&t[0])return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));const r=!(64&~t[0]);if(!r||this._extensions[n.extensionName]){if(this._fin=!(128&~t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11))return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(r)return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~t[1]),this._isServer){if(!this._masked)return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}else e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),r=t.readUInt32BE(0);r>Math.pow(2,21)-1?e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=r*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e))}haveLength(e){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!==(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&h(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,t){this._extensions[n.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void t(e)}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let s;s="nodebuffer"===this._binaryType?l(r,t):"arraybuffer"===this._binaryType?u(l(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!0),this._state=0,this.startLoop(e)}))}else{const s=l(r,t);if(!this._skipUTF8Validation&&!f(s)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",s,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,o),this.end();else{const r=e.readUInt16BE(0);if(!d(r)){const e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const s=new p(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!f(s)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",r,s),this.end()}this._state=0}}createError(e,t,r,s,n){this._loop=!1,this._errored=!0;const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,this.createError),i.code=n,i[a]=s,i}}},6329:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Address6=void 0;const o=i(r(837)),a=i(r(9576)),c=i(r(8914)),l=i(r(2846)),u=r(2839),h=r(321),d=r(2437),f=r(837);function p(e){if(!e)throw new Error("Assertion failed.")}function g(e){return(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function b(e){return parseInt(e,16).toString(16).padStart(4,"0")}function _(e){return 255&e}class m{constructor(e,t){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=o.isInSubnet,this.isCorrect=o.isCorrect(c.BITS),this.groups=void 0===t?c.GROUPS:t,this.address=e;const r=c.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>c.BITS)throw new d.AddressError("Invalid subnet mask.");e=e.replace(c.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new d.AddressError("Invalid subnet mask.");const s=c.RE_ZONE_STRING.exec(e);s&&(this.zone=s[0],e=e.replace(c.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new m(e),!0}catch(e){return!1}}static fromBigInt(e){const t=e.toString(16).padStart(32,"0"),r=[];let s;for(s=0;s<c.GROUPS;s++)r.push(t.slice(4*s,4*(s+1)));return new m(r.join(":"))}static fromURL(e){let t,r,s=null;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(r=c.RE_URL_WITH_PORT.exec(e),null===r)return{error:"failed to parse address with port",address:null,port:null};t=r[1],s=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),r=c.RE_URL.exec(e),null===r)return{error:"failed to parse address from URL",address:null,port:null};t=r[1]}else t=e;return s?(s=parseInt(s,10),(s<0||s>65536)&&(s=null)):s=null,{address:new m(t),port:s}}static fromAddress4(e){const t=new u.Address4(e),r=c.BITS-(a.BITS-t.subnetMask);return new m(`::ffff:${t.correctForm()}/${r}`)}static fromArpa(e){let t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)throw new d.AddressError("Invalid 'ip6.arpa' form.");const r=t.split(".").reverse();for(let e=7;e>0;e--){const t=4*e;r.splice(t,0,":")}return t=r.join(""),new m(t)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){const t=c.BITS-this.subnetMask-Math.abs(e-c.BITS);return t<0?"0":function(e){const t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}((BigInt("2")**BigInt(t)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(c.BITS-this.subnetMask)}`)}startAddress(){return m.fromBigInt(this._startAddress())}startAddressExclusive(){const e=BigInt("1");return m.fromBigInt(this._startAddress()+e)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(c.BITS-this.subnetMask)}`)}endAddress(){return m.fromBigInt(this._endAddress())}endAddressExclusive(){const e=BigInt("1");return m.fromBigInt(this._endAddress()-e)}getScope(){let e=c.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e||"Unknown"}getType(){for(const e of Object.keys(c.TYPES))if(this.isInSubnet(new m(e)))return c.TYPES[e];return"Global unicast"}getBits(e,t){return BigInt(`0b${this.getBitsBase2(e,t)}`)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}getBitsBase16(e,t){const r=t-e;if(r%4!=0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,t).toString(16).padStart(r/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,c.BITS)}reverseForm(e){e||(e={});const t=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?r:`${r}.ip6.arpa.`:e.omitSuffix?"":"ip6.arpa."}correctForm(){let e,t=[],r=0;const s=[];for(e=0;e<this.parsedAddress.length;e++){const t=parseInt(this.parsedAddress[e],16);0===t&&r++,0!==t&&r>0&&(r>1&&s.push([e-r,e-1]),r=0)}r>1&&s.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);const n=s.map(e=>e[1]-e[0]+1);if(s.length>0){const e=n.indexOf(Math.max(...n));t=function(e,t){const r=[],s=[];let n;for(n=0;n<e.length;n++)n<t[0]?r.push(e[n]):n>t[1]&&s.push(e[n]);return r.concat(["compact"]).concat(s)}(this.parsedAddress,s[e])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));let i=t.join(":");return i=i.replace(/^compact$/,"::"),i=i.replace(/(^compact)|(compact$)/,":"),i=i.replace(/compact/,""),i}binaryZeroPad(){return this.bigInt().toString(2).padStart(c.BITS,"0")}parse4in6(e){const t=e.split(":"),r=t.slice(-1)[0].match(a.RE_ADDRESS);if(r){this.parsedAddress4=r[0],this.address4=new u.Address4(this.parsedAddress4);for(let t=0;t<this.address4.groups;t++)if(/^0[0-9]+/.test(this.address4.parsedAddress[t]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(g).join(".")));this.v4=!0,t[t.length-1]=this.address4.toGroup6(),e=t.join(":")}return e}parse(e){const t=(e=this.parse4in6(e)).match(c.RE_BAD_CHARACTERS);if(t)throw new d.AddressError(`Bad character${t.length>1?"s":""} detected in address: ${t.join("")}`,e.replace(c.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));const r=e.match(c.RE_BAD_ADDRESS);if(r)throw new d.AddressError(`Address failed regex: ${r.join("")}`,e.replace(c.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let s=[];const n=e.split("::");if(2===n.length){let e=n[0].split(":"),t=n[1].split(":");1===e.length&&""===e[0]&&(e=[]),1===t.length&&""===t[0]&&(t=[]);const r=this.groups-(e.length+t.length);if(!r)throw new d.AddressError("Error parsing groups");this.elidedGroups=r,this.elisionBegin=e.length,this.elisionEnd=e.length+this.elidedGroups,s=s.concat(e);for(let e=0;e<r;e++)s.push("0");s=s.concat(t)}else{if(1!==n.length)throw new d.AddressError("Too many :: groups found");s=e.split(":"),this.elidedGroups=0}if(s=s.map(e=>parseInt(e,16).toString(16)),s.length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return s}canonicalForm(){return this.parsedAddress.map(b).join(":")}decimal(){return this.parsedAddress.map(e=>parseInt(e,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(b).join("")}`)}to4(){const e=this.binaryZeroPad().split("");return u.Address4.fromHex(BigInt(`0b${e.slice(96,128).join("")}`).toString(16))}to4in6(){const e=this.to4(),t=new m(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let r="";return/:$/.test(t)||(r=":"),t+r+e.address}inspectTeredo(){const e=this.getBitsBase16(0,32),t=(this.getBits(80,96)^BigInt("0xffff")).toString(),r=u.Address4.fromHex(this.getBitsBase16(32,64)),s=this.getBits(96,128),n=u.Address4.fromHex((s^BigInt("0xffffffff")).toString(16)),i=this.getBitsBase2(64,80),o=(0,f.testBit)(i,15),a=(0,f.testBit)(i,14),c=(0,f.testBit)(i,8),l=(0,f.testBit)(i,9),h=BigInt(`0b${i.slice(2,6)+i.slice(8,16)}`).toString(10);return{prefix:`${e.slice(0,4)}:${e.slice(4,8)}`,server4:r.address,client4:n.address,flags:i,coneNat:o,microsoft:{reserved:a,universalLocal:l,groupIndividual:c,nonce:h},udpPort:t}}inspect6to4(){const e=this.getBitsBase16(0,16),t=u.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:e.slice(0,4),gateway:t.address}}to6to4(){if(!this.is4())return null;const e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new m(e)}toByteArray(){const e=this.bigInt().toString(16),t=`${"0".repeat(e.length%2)}${e}`,r=[];for(let e=0,s=t.length;e<s;e+=2)r.push(parseInt(t.substring(e,e+2),16));return r}toUnsignedByteArray(){return this.toByteArray().map(_)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(_))}static fromUnsignedByteArray(e){const t=BigInt("256");let r=BigInt("0"),s=BigInt("1");for(let n=e.length-1;n>=0;n--)r+=s*BigInt(e[n].toString(10)),s*=t;return m.fromBigInt(r)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new m("2001::/32"))}is6to4(){return this.isInSubnet(new m("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(e){return e=void 0===e?"":`:${e}`,`http://[${this.correctForm()}]${e}/`}link(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);let t=this.correctForm;e.v4&&(t=this.to4in6);const r=t.call(this);return e.className?`<a href="${e.prefix}${r}" class="${e.className}">${r}</a>`:`<a href="${e.prefix}${r}">${r}</a>`}group(){if(0===this.elidedGroups)return l.simpleGroup(this.address).join(":");p("number"==typeof this.elidedGroups),p("number"==typeof this.elisionBegin);const e=[],[t,r]=this.address.split("::");t.length?e.push(...l.simpleGroup(t)):e.push("");const s=["hover-group"];for(let e=this.elisionBegin;e<this.elisionBegin+this.elidedGroups;e++)s.push(`group-${e}`);return e.push(`<span class="${s.join(" ")}"></span>`),r.length?e.push(...l.simpleGroup(r,this.elisionEnd)):e.push(""),this.is4()&&(p(this.address4 instanceof u.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let t=[];const r=new m(this.correctForm());if(0===r.elidedGroups)t.push((0,h.simpleRegularExpression)(r.parsedAddress));else if(r.elidedGroups===c.GROUPS)t.push((0,h.possibleElisions)(c.GROUPS));else{const e=r.address.split("::");e[0].length&&t.push((0,h.simpleRegularExpression)(e[0].split(":"))),p("number"==typeof r.elidedGroups),t.push((0,h.possibleElisions)(r.elidedGroups,0!==e[0].length,0!==e[1].length)),e[1].length&&t.push((0,h.simpleRegularExpression)(e[1].split(":"))),t=[t.join(":")]}return e||(t=["(?=^|",h.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...t,")(?=[^\\w\\:]|",h.ADDRESS_BOUNDARY,"|$)"]),t.join("")}regularExpression(e=!1){return new RegExp(this.regularExpressionString(e),"i")}}t.Address6=m},6371:(e,t,r)=>{"use strict";const{format:s,inspect:n}=r(9231),{AggregateError:i}=r(4134),o=globalThis.AggregateError||i,a=Symbol("kIsNodeError"),c=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,u={};function h(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function d(e){let t="",r=e.length;const s="-"===e[0]?1:0;for(;r>=s+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,r){r||(r=Error);class n extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return h(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return h(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),0===r.length?t:s(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[a]=!0,u[e]=n}function p(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class g extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(e,t,r)=>{h("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let s="The ";e.endsWith(" argument")?s+=`${e} `:s+=`"${e}" ${e.includes(".")?"property":"argument"} `,s+="must be ";const i=[],o=[],a=[];for(const e of t)h("string"==typeof e,"All expected entries have to be of type string"),c.includes(e)?i.push(e.toLowerCase()):l.test(e)?o.push(e):(h("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(o.length>0){const e=i.indexOf("object");-1!==e&&(i.splice(i,e,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:s+=`of type ${i[0]}`;break;case 2:s+=`one of type ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();s+=`one of type ${i.join(", ")}, or ${e}`}}(o.length>0||a.length>0)&&(s+=" or ")}if(o.length>0){switch(o.length){case 1:s+=`an instance of ${o[0]}`;break;case 2:s+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();s+=`an instance of ${o.join(", ")}, or ${e}`}}a.length>0&&(s+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(s+="an "),s+=`${a[0]}`;break;case 2:s+=`one of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();s+=`one of ${a.join(", ")}, or ${e}`}}if(null==r)s+=`. Received ${r}`;else if("function"==typeof r&&r.name)s+=`. Received function ${r.name}`;else if("object"==typeof r){var u;null!==(u=r.constructor)&&void 0!==u&&u.name?s+=`. Received an instance of ${r.constructor.name}`:s+=`. Received ${n(r,{depth:-1})}`}else{let e=n(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),s+=`. Received type ${typeof r} (${e})`}return s},TypeError),f("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let s=n(t);return s.length>128&&(s=s.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${s}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var s;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(s=r.constructor)&&void 0!==s&&s.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`},TypeError),f("ERR_MISSING_ARGS",(...e)=>{let t;h(e.length>0,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(e,t,r)=>{let s;if(h(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32)s=d(String(r));else if("bigint"==typeof r){s=String(r);const e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(s=d(s)),s+="n"}else s=n(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${s}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:g,aggregateTwoErrors:p(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new o([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:p,codes:u}},6524:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:s}=r(4134);e.exports=i;const n=r(7382);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}s(i.prototype,n.prototype),s(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},6532:(e,t,r)=>{"use strict";const s=r(4422),{PromisePrototypeThen:n,SymbolAsyncIterator:i,SymbolIterator:o}=r(4134),{Buffer:a}=r(181),{ERR_INVALID_ARG_TYPE:c,ERR_STREAM_NULL_VALUES:l}=r(6371).codes;e.exports=function(e,t,r){let u,h;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[i])h=!0,u=t[i]();else{if(!t||!t[o])throw new c("iterable",["Iterable"],t);h=!1,u=t[o]()}const d=new e({objectMode:!0,highWaterMark:1,...r});let f=!1;return d._read=function(){f||(f=!0,async function(){for(;;){try{const{value:e,done:t}=h?await u.next():u.next();if(t)d.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw f=!1,new l;if(d.push(t))continue;f=!1}}catch(e){d.destroy(e)}break}}())},d._destroy=function(e,t){n(async function(e){const t=null!=e,r="function"==typeof u.throw;if(t&&r){const{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),()=>s.nextTick(t,e),r=>s.nextTick(t,r||e))},d}},6584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(4988);class n extends s.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){const e=i.get(this);if("boolean"!=typeof e)throw new TypeError("Expected 'this' to be an 'AbortSignal' object, but got "+(null===this?"null":typeof this));return e}}s.defineEventAttribute(n.prototype,"abort");const i=new WeakMap;Object.defineProperties(n.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(n.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class o{constructor(){a.set(this,function(){const e=Object.create(n.prototype);return s.EventTarget.call(e),i.set(e,!1),e}())}get signal(){return c(this)}abort(){var e;e=c(this),!1===i.get(e)&&(i.set(e,!0),e.dispatchEvent({type:"abort"}))}}const a=new WeakMap;function c(e){const t=a.get(e);if(null==t)throw new TypeError("Expected 'this' to be an 'AbortController' object, but got "+(null===e?"null":typeof e));return t}Object.defineProperties(o.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(o.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),t.AbortController=o,t.AbortSignal=n,t.default=o,e.exports=o,e.exports.AbortController=e.exports.default=o,e.exports.AbortSignal=n},6585:e=>{var t=1e3,r=60*t,s=60*r,n=24*s,i=7*n;function o(e,t,r,s){var n=t>=1.5*r;return Math.round(e/r)+" "+s+(n?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*i;case"days":case"day":case"d":return a*n;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=n?o(c,l,n,"day"):l>=s?o(c,l,s,"hour"):l>=r?o(c,l,r,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var i=Math.abs(e);return i>=n?Math.round(e/n)+"d":i>=s?Math.round(e/s)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6698:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},6706:(e,t,r)=>{const s=r(4422),n=r(181),{isReadable:i,isWritable:o,isIterable:a,isNodeStream:c,isReadableNodeStream:l,isWritableNodeStream:u,isDuplexNodeStream:h,isReadableStream:d,isWritableStream:f}=r(6115),p=r(6238),{AbortError:g,codes:{ERR_INVALID_ARG_TYPE:b,ERR_INVALID_RETURN_VALUE:_}}=r(6371),{destroyer:m}=r(5896),y=r(3370),S=r(7576),w=r(8584),{createDeferredPromise:v}=r(7760),E=r(6532),k=globalThis.Blob||n.Blob,I=void 0!==k?function(e){return e instanceof k}:function(e){return!1},A=globalThis.AbortController||r(6584).AbortController,{FunctionPrototypeCall:O}=r(4134);class T extends y{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function C(e){const t=e.readable&&"function"!=typeof e.readable.read?S.wrap(e.readable):e.readable,r=e.writable;let s,n,a,c,l,u=!!i(t),h=!!o(r);function d(e){const t=c;c=null,t?t(e):e&&l.destroy(e)}return l=new T({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==r||!r.writableObjectMode),readable:u,writable:h}),h&&(p(r,e=>{h=!1,e&&m(t,e),d(e)}),l._write=function(e,t,n){r.write(e,t)?n():s=n},l._final=function(e){r.end(),n=e},r.on("drain",function(){if(s){const e=s;s=null,e()}}),r.on("finish",function(){if(n){const e=n;n=null,e()}})),u&&(p(t,e=>{u=!1,e&&m(t,e),d(e)}),t.on("readable",function(){if(a){const e=a;a=null,e()}}),t.on("end",function(){l.push(null)}),l._read=function(){for(;;){const e=t.read();if(null===e)return void(a=l._read);if(!l.push(e))return}}),l._destroy=function(e,i){e||null===c||(e=new g),a=null,s=null,n=null,null===c?i(e):(c=i,m(r,e),m(t,e))},l}e.exports=function e(t,r){if(h(t))return t;if(l(t))return C({readable:t});if(u(t))return C({writable:t});if(c(t))return C({writable:!1,readable:!1});if(d(t))return C({readable:S.fromWeb(t)});if(f(t))return C({writable:w.fromWeb(t)});if("function"==typeof t){const{value:e,write:n,final:i,destroy:o}=function(e){let{promise:t,resolve:r}=v();const n=new A,i=n.signal;return{value:e(async function*(){for(;;){const e=t;t=null;const{chunk:n,done:o,cb:a}=await e;if(s.nextTick(a),o)return;if(i.aborted)throw new g(void 0,{cause:i.reason});({promise:t,resolve:r}=v()),yield n}}(),{signal:i}),write(e,t,s){const n=r;r=null,n({chunk:e,done:!1,cb:s})},final(e){const t=r;r=null,t({done:!0,cb:e})},destroy(e,t){n.abort(),t(e)}}}(t);if(a(e))return E(T,e,{objectMode:!0,write:n,final:i,destroy:o});const c=null==e?void 0:e.then;if("function"==typeof c){let t;const r=O(c,e,e=>{if(null!=e)throw new _("nully","body",e)},e=>{m(t,e)});return t=new T({objectMode:!0,readable:!1,write:n,final(e){i(async()=>{try{await r,s.nextTick(e,null)}catch(t){s.nextTick(e,t)}})},destroy:o})}throw new _("Iterable, AsyncIterable or AsyncFunction",r,e)}if(I(t))return e(t.arrayBuffer());if(a(t))return E(T,t,{objectMode:!0,writable:!1});if(d(null==t?void 0:t.readable)&&f(null==t?void 0:t.writable))return T.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return C({readable:null!=t&&t.readable?l(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});const n=null==t?void 0:t.then;if("function"==typeof n){let e;return O(n,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{m(e,t)}),e=new T({objectMode:!0,writable:!1,read(){}})}throw new b(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},6803:e=>{var t=1e3,r=60*t,s=60*r,n=24*s,i=7*n;function o(e,t,r,s){var n=t>=1.5*r;return Math.round(e/r)+" "+s+(n?"s":"")}e.exports=function(e,a){a=a||{};var c,l,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*i;case"days":case"day":case"d":return a*n;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===u&&isFinite(e))return a.long?(c=e,(l=Math.abs(c))>=n?o(c,l,n,"day"):l>=s?o(c,l,s,"hour"):l>=r?o(c,l,r,"minute"):l>=t?o(c,l,t,"second"):c+" ms"):function(e){var i=Math.abs(e);return i>=n?Math.round(e/n)+"d":i>=s?Math.round(e/s)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeBrowser=t.isWebWorker=void 0;const r=()=>Boolean("object"==typeof self&&self?.constructor?.name?.includes("WorkerGlobalScope")&&"undefined"==typeof Deno),s=()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product,n="undefined"!=typeof window&&("undefined"!=typeof navigator&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&process?.versions?!Object.prototype.hasOwnProperty.call(process.versions,"electron"):void 0!==window.document)||r()||s();t.isWebWorker=r(),t.isReactNativeBrowser=s(),t.default=n},6912:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=s(r(4959)),i=s(r(5228)),o=s(r(495)),a=s(r(1021)),c=s(r(4264));t.default=(e,t,r)=>{const{options:s}=e;if(5===s.protocolVersion&&s.properties&&s.properties.maximumPacketSize&&s.properties.maximumPacketSize<t.length)return e.emit("error",new Error(`exceeding packets size ${t.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,n.default)(e,t,r);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,a.default)(e,t),r();break;case"pubrel":e.reschedulePing(),(0,c.default)(e,t,r);break;case"connack":(0,o.default)(e,t),r();break;case"auth":e.reschedulePing(),(0,i.default)(e,t),r();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),r();break;case"disconnect":e.emit("disconnect",t),r();break;default:e.log("_handlePacket :: unknown command"),r()}}},6968:function(e,t,r){"use strict";var s,n=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(s=function(e){return s=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},s(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=s(e),o=0;o<r.length;o++)"default"!==r[o]&&n(t,e,r[o]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,s){p("SOCKS connection to %s:%d via %s",e,t,r);const n=new g;return async function(e,t,r,s,n={}){const i=n.lookup??(0,d.promisify)(h.lookup),[o,a]=function(e){const t=new URL(e);if(t.pathname||t.hash||t.search)throw b(new Error("bad SOCKS URL"));const[r,s]=function(e){switch(e){case"socks5h:":return[5,!0];case"socks4a:":return[4,!0];case"socks5:":return[5,!1];case"socks4:":return[4,!1];default:return[void 0,!1]}}(t.protocol);if(!r)throw b(new Error("bad SOCKS URL: invalid protocol"));const n=parseInt(t.port,10);if(Number.isNaN(n))throw b(new Error("bad SOCKS URL: invalid port"));return[{host:t.hostname,port:n,type:r},s]}(r);a||(p("resolving %s locally",e),e=(await i(e,{family:4===o.type?4:0})).address),p("establishing SOCKS%d connection to %s:%d via %s:%d",o.type,e,t,o.host,o.port);const c=new u.SocksClient({command:"connect",destination:{host:e,port:t},proxy:{...o},timeout:n.timeout});c.connect(),c.on("established",({socket:e})=>s._start(e)),c.on("error",e=>{p("SOCKS failed: %s",e),s.destroy(b(e))})}(e,t,r,n,s).catch(e=>{p("SOCKS failed: %s",e),n.destroy(e)}),n};const c=a(r(8539)),l=r(2203),u=r(5861),h=o(r(2250)),d=r(9023),f=a(r(2613)),p=(0,c.default)("mqttjs:socks");class g extends l.Duplex{_flowing=!1;_socket;constructor(){super({autoDestroy:!1}),this.cork()}_start(e){p("proxy stream started"),(0,f.default)(!this._socket),this.destroyed?e.destroy(this.errored):(this._socket=e,this._flowing||e.pause(),e.on("data",this._onData),e.on("end",this._onEnd),e.on("error",this._onError),e.on("close",this._onClose),e.emit("connect"),this.uncork())}_write(e,t,r){(0,f.default)(this._socket),this._socket.write(e,r)}_read(e){this._flowing=!0,this._socket?.resume?.()}_destroy(e,t){this._socket?.destroy?.(e),t(e)}_onData=e=>{(0,f.default)(this._socket),this._flowing=this.push(e),this._flowing||this._socket.pause()};_onEnd=()=>{p("proxy stream received EOF"),this.push(null)};_onClose=()=>{p("proxy stream closed"),this.destroy()};_onError=e=>{p("proxy stream died with error %s",e),this.destroy(e)}}function b(e){try{return void 0===e.code&&(e.code="SOCKS"),e}catch{return e}}},6982:e=>{"use strict";e.exports=require("crypto")},7016:e=>{"use strict";e.exports=require("url")},7130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ipToBuffer=t.int32ToIpv4=t.ipv4ToInt32=t.validateSocksClientChainOptions=t.validateSocksClientOptions=void 0;const s=r(3763),n=r(5438),i=r(2203),o=r(9424),a=r(9278);function c(e,t){if(void 0!==e.custom_auth_method){if(e.custom_auth_method<n.SOCKS5_CUSTOM_AUTH_START||e.custom_auth_method>n.SOCKS5_CUSTOM_AUTH_END)throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsCustomAuthRange,t);if(void 0===e.custom_auth_request_handler||"function"!=typeof e.custom_auth_request_handler)throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t);if(void 0===e.custom_auth_response_size)throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t);if(void 0===e.custom_auth_response_handler||"function"!=typeof e.custom_auth_response_handler)throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t)}}function l(e){return e&&"string"==typeof e.host&&Buffer.byteLength(e.host)<256&&"number"==typeof e.port&&e.port>=0&&e.port<=65535}function u(e){return e&&("string"==typeof e.host||"string"==typeof e.ipaddress)&&"number"==typeof e.port&&e.port>=0&&e.port<=65535&&(4===e.type||5===e.type)}function h(e){return"number"==typeof e&&e>0}t.validateSocksClientOptions=function(e,t=["connect","bind","associate"]){if(!n.SocksCommand[e.command])throw new s.SocksClientError(n.ERRORS.InvalidSocksCommand,e);if(-1===t.indexOf(e.command))throw new s.SocksClientError(n.ERRORS.InvalidSocksCommandForOperation,e);if(!l(e.destination))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsDestination,e);if(!u(e.proxy))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsProxy,e);if(c(e.proxy,e),e.timeout&&!h(e.timeout))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsTimeout,e);if(e.existing_socket&&!(e.existing_socket instanceof i.Duplex))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsExistingSocket,e)},t.validateSocksClientChainOptions=function(e){if("connect"!==e.command)throw new s.SocksClientError(n.ERRORS.InvalidSocksCommandChain,e);if(!l(e.destination))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsDestination,e);if(!(e.proxies&&Array.isArray(e.proxies)&&e.proxies.length>=2))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsProxiesLength,e);if(e.proxies.forEach(t=>{if(!u(t))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsProxy,e);c(t,e)}),e.timeout&&!h(e.timeout))throw new s.SocksClientError(n.ERRORS.InvalidSocksClientOptionsTimeout,e)},t.ipv4ToInt32=function(e){return new o.Address4(e).toArray().reduce((e,t)=>(e<<8)+t,0)>>>0},t.int32ToIpv4=function(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e].join(".")},t.ipToBuffer=function(e){if(a.isIPv4(e)){const t=new o.Address4(e);return Buffer.from(t.toArray())}if(a.isIPv6(e)){const t=new o.Address6(e);return Buffer.from(t.canonicalForm().split(":").map(e=>e.padStart(4,"0")).join(""),"hex")}throw new Error("Invalid IP address format")}},7382:(e,t,r)=>{"use strict";const{ObjectSetPrototypeOf:s,Symbol:n}=r(4134);e.exports=l;const{ERR_METHOD_NOT_IMPLEMENTED:i}=r(6371).codes,o=r(3370),{getHighWaterMark:a}=r(5291);s(l.prototype,o.prototype),s(l,o);const c=n("kCallback");function l(e){if(!(this instanceof l))return new l(e);const t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),o.call(this,e),this._readableState.sync=!1,this[c]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function h(){this._final!==u&&u.call(this)}l.prototype._final=u,l.prototype._transform=function(e,t,r){throw new i("_transform()")},l.prototype._write=function(e,t,r){const s=this._readableState,n=this._writableState,i=s.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),n.ended||i===s.length||s.length<s.highWaterMark?r():this[c]=r)})},l.prototype._read=function(){if(this[c]){const e=this[c];this[c]=null,e()}}},7442:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,i,o=null;function a(...e){if(!a.enabled)return;const s=a,n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";o++;const i=t.formatters[n];if("function"==typeof i){const t=e[o];r=i.call(s,t),e.splice(o,1),o--}return r}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){const s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e,t){let r=0,s=0,n=-1,i=0;for(;r<e.length;)if(s<t.length&&(t[s]===e[r]||"*"===t[s]))"*"===t[s]?(n=s,i=r,s++):(r++,s++);else{if(-1===n)return!1;s=n+1,i++,r=i}for(;s<t.length&&"*"===t[s];)s++;return s===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of r)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const r of t.skips)if(n(e,r))return!1;for(const r of t.names)if(n(e,r))return!0;return!1},t.humanize=r(6803),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},7575:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(1725);class n{constructor(e){if(this.length=0,this._encoding="utf8",this._writeOffset=0,this._readOffset=0,n.isSmartBufferOptions(e))if(e.encoding&&(s.checkEncoding(e.encoding),this._encoding=e.encoding),e.size){if(!(s.isFiniteInteger(e.size)&&e.size>0))throw new Error(s.ERRORS.INVALID_SMARTBUFFER_SIZE);this._buff=Buffer.allocUnsafe(e.size)}else if(e.buff){if(!Buffer.isBuffer(e.buff))throw new Error(s.ERRORS.INVALID_SMARTBUFFER_BUFFER);this._buff=e.buff,this.length=e.buff.length}else this._buff=Buffer.allocUnsafe(4096);else{if(void 0!==e)throw new Error(s.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(4096)}}static fromSize(e,t){return new this({size:e,encoding:t})}static fromBuffer(e,t){return new this({buff:e,encoding:t})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){const t=e;return t&&(void 0!==t.encoding||void 0!==t.size||void 0!==t.buff)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){return s.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){return s.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,t),this}insertInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,t)}writeInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}insertInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}writeInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}insertInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}writeInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}insertInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}writeInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}insertInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}writeBigInt64BE(e,t){return s.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}insertBigInt64BE(e,t){return s.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}writeBigInt64LE(e,t){return s.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}insertBigInt64LE(e,t){return s.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){return s.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){return s.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,t)}insertUInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,t)}writeUInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}insertUInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}writeUInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}insertUInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}writeUInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}insertUInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}writeUInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}insertUInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}writeBigUInt64BE(e,t){return s.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}insertBigUInt64BE(e,t){return s.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}writeBigUInt64LE(e,t){return s.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}insertBigUInt64LE(e,t){return s.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}insertFloatBE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}writeFloatLE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}insertFloatLE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}insertDoubleBE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}writeDoubleLE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}insertDoubleLE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}readString(e,t){let r;"number"==typeof e?(s.checkLengthValue(e),r=Math.min(e,this.length-this._readOffset)):(t=e,r=this.length-this._readOffset),void 0!==t&&s.checkEncoding(t);const n=this._buff.slice(this._readOffset,this._readOffset+r).toString(t||this._encoding);return this._readOffset+=r,n}insertString(e,t,r){return s.checkOffsetValue(t),this._handleString(e,!0,t,r)}writeString(e,t,r){return this._handleString(e,!1,t,r)}readStringNT(e){void 0!==e&&s.checkEncoding(e);let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}const r=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,r.toString(e||this._encoding)}insertStringNT(e,t,r){return s.checkOffsetValue(t),this.insertString(e,t,r),this.insertUInt8(0,t+e.length),this}writeStringNT(e,t,r){return this.writeString(e,t,r),this.writeUInt8(0,"number"==typeof t?t+e.length:this.writeOffset),this}readBuffer(e){void 0!==e&&s.checkLengthValue(e);const t="number"==typeof e?e:this.length,r=Math.min(this.length,this._readOffset+t),n=this._buff.slice(this._readOffset,r);return this._readOffset=r,n}insertBuffer(e,t){return s.checkOffsetValue(t),this._handleBuffer(e,!0,t)}writeBuffer(e,t){return this._handleBuffer(e,!1,t)}readBufferNT(){let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}const t=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,t}insertBufferNT(e,t){return s.checkOffsetValue(t),this.insertBuffer(e,t),this.insertUInt8(0,t+e.length),this}writeBufferNT(e,t){return void 0!==t&&s.checkOffsetValue(t),this.writeBuffer(e,t),this.writeUInt8(0,"number"==typeof t?t+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){s.checkOffsetValue(e),s.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){s.checkOffsetValue(e),s.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){s.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){const t="string"==typeof e?e:this._encoding;return s.checkEncoding(t),this._buff.toString(t,0,this.length)}destroy(){return this.clear(),this}_handleString(e,t,r,n){let i=this._writeOffset,o=this._encoding;"number"==typeof r?i=r:"string"==typeof r&&(s.checkEncoding(r),o=r),"string"==typeof n&&(s.checkEncoding(n),o=n);const a=Buffer.byteLength(e,o);return t?this.ensureInsertable(a,i):this._ensureWriteable(a,i),this._buff.write(e,i,a,o),t?this._writeOffset+=a:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,i+a):this._writeOffset+=a,this}_handleBuffer(e,t,r){const s="number"==typeof r?r:this._writeOffset;return t?this.ensureInsertable(e.length,s):this._ensureWriteable(e.length,s),e.copy(this._buff,s),t?this._writeOffset+=e.length:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,s+e.length):this._writeOffset+=e.length,this}ensureReadable(e,t){let r=this._readOffset;if(void 0!==t&&(s.checkOffsetValue(t),r=t),r<0||r+e>this.length)throw new Error(s.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,t){s.checkOffsetValue(t),this._ensureCapacity(this.length+e),t<this.length&&this._buff.copy(this._buff,t+e,t,this._buff.length),t+e>this.length?this.length=t+e:this.length+=e}_ensureWriteable(e,t){const r="number"==typeof t?t:this._writeOffset;this._ensureCapacity(r+e),r+e>this.length&&(this.length=r+e)}_ensureCapacity(e){const t=this._buff.length;if(e>t){let r=this._buff,s=3*t/2+1;s<e&&(s=e),this._buff=Buffer.allocUnsafe(s),r.copy(this._buff,0,0,t)}}_readNumberValue(e,t,r){this.ensureReadable(t,r);const s=e.call(this._buff,"number"==typeof r?r:this._readOffset);return void 0===r&&(this._readOffset+=t),s}_insertNumberValue(e,t,r,n){return s.checkOffsetValue(n),this.ensureInsertable(t,n),e.call(this._buff,r,n),this._writeOffset+=t,this}_writeNumberValue(e,t,r,n){if("number"==typeof n){if(n<0)throw new Error(s.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);s.checkOffsetValue(n)}const i="number"==typeof n?n:this._writeOffset;return this._ensureWriteable(t,i),e.call(this._buff,r,i),"number"==typeof n?this._writeOffset=Math.max(this._writeOffset,i+t):this._writeOffset+=t,this}}t.SmartBuffer=n},7576:(e,t,r)=>{"use strict";const s=r(4422),{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:o,NumberParseInt:a,ObjectDefineProperties:c,ObjectKeys:l,ObjectSetPrototypeOf:u,Promise:h,SafeSet:d,SymbolAsyncDispose:f,SymbolAsyncIterator:p,Symbol:g}=r(4134);e.exports=q,q.ReadableState=K;const{EventEmitter:b}=r(4434),{Stream:_,prependListener:m}=r(4259),{Buffer:y}=r(181),{addAbortSignal:S}=r(4147),w=r(6238);let v=r(7760).debuglog("stream",e=>{v=e});const E=r(345),k=r(5896),{getHighWaterMark:I,getDefaultHighWaterMark:A}=r(5291),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_OUT_OF_RANGE:R,ERR_STREAM_PUSH_AFTER_EOF:B,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:x},AbortError:P}=r(6371),{validateObject:N}=r(277),M=g("kPaused"),{StringDecoder:L}=r(3141),U=r(6532);u(q.prototype,_.prototype),u(q,_);const j=()=>{},{errorOrDestroy:D}=k,F=1,W=16,$=32,V=2048,H=4096;function z(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function K(e,t,s){"boolean"!=typeof s&&(s=t instanceof r(3370)),this.state=V|H|W|$,e&&e.objectMode&&(this.state|=F),s&&e&&e.readableObjectMode&&(this.state|=F),this.highWaterMark=e?I(this,e,"readableHighWaterMark",s):A(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[M]=null,e&&!1===e.emitClose&&(this.state&=~V),e&&!1===e.autoDestroy&&(this.state&=~H),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new L(e.encoding),this.encoding=e.encoding)}function q(e){if(!(this instanceof q))return new q(e);const t=this instanceof r(3370);this._readableState=new K(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&S(e.signal,this)),_.call(this,e),k.construct(this,()=>{this._readableState.needReadable&&X(this,this._readableState)})}function G(e,t,r,s){v("readableAddChunk",t);const n=e._readableState;let i;if(0===(n.state&F)&&("string"==typeof t?(r=r||n.defaultEncoding,n.encoding!==r&&(s&&n.encoding?t=y.from(t,r).toString(n.encoding):(t=y.from(t,r),r=""))):t instanceof y?r="":_._isUint8Array(t)?(t=_._uint8ArrayToBuffer(t),r=""):null!=t&&(i=new T("chunk",["string","Buffer","Uint8Array"],t))),i)D(e,i);else if(null===t)n.state&=-9,function(e,t){if(v("onEofChunk"),!t.ended){if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Z(e):(t.needReadable=!1,t.emittedReadable=!0,J(e))}}(e,n);else if(0!==(n.state&F)||t&&t.length>0)if(s)if(4&n.state)D(e,new x);else{if(n.destroyed||n.errored)return!1;Q(e,n,t,!0)}else if(n.ended)D(e,new B);else{if(n.destroyed||n.errored)return!1;n.state&=-9,n.decoder&&!r?(t=n.decoder.write(t),n.objectMode||0!==t.length?Q(e,n,t,!1):X(e,n)):Q(e,n,t,!1)}else s||(n.state&=-9,X(e,n));return!n.ended&&(n.length<n.highWaterMark||0===n.length)}function Q(e,t,r,s){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,s?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&Z(e)),X(e,t)}function Y(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&F)?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function Z(e){const t=e._readableState;v("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(v("emitReadable",t.flowing),t.emittedReadable=!0,s.nextTick(J,e))}function J(e){const t=e._readableState;v("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ne(e)}function X(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,s.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(v("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[M]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function re(e){v("readable nexttick read 0"),e.read(0)}function se(e,t){v("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ne(e),t.flowing&&!t.reading&&e.read(0)}function ne(e){const t=e._readableState;for(v("flow",t.flowing);t.flowing&&null!==e.read(););}function ie(e,t){"function"!=typeof e.read&&(e=q.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,s=j;function n(t){this===e?(s(),s=j):s=t}e.on("readable",n);const i=w(e,{writable:!1},e=>{r=e?O(r,e):null,s(),s=j});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new h(n)}}}catch(e){throw r=O(r,e),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",n),i()):k.destroyer(e,null)}}(e,t);return r.stream=e,r}function oe(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ae(e){const t=e._readableState;v("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,s.nextTick(ce,t,e))}function ce(e,t){if(v("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)s.nextTick(le,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function le(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function he(){return void 0===ue&&(ue={}),ue}c(K.prototype,{objectMode:z(F),ended:z(2),endEmitted:z(4),reading:z(8),constructed:z(W),sync:z($),needReadable:z(64),emittedReadable:z(128),readableListening:z(256),resumeScheduled:z(512),errorEmitted:z(1024),emitClose:z(V),autoDestroy:z(H),destroyed:z(8192),closed:z(16384),closeEmitted:z(32768),multiAwaitDrain:z(65536),readingMore:z(1<<17),dataEmitted:z(1<<18)}),q.prototype.destroy=k.destroy,q.prototype._undestroy=k.undestroy,q.prototype._destroy=function(e,t){t(e)},q.prototype[b.captureRejectionSymbol]=function(e){this.destroy(e)},q.prototype[f]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new P,this.destroy(e)),new h((t,r)=>w(this,s=>s&&s!==e?r(s):t(null)))},q.prototype.push=function(e,t){return G(this,e,t,!1)},q.prototype.unshift=function(e,t){return G(this,e,t,!0)},q.prototype.isPaused=function(){const e=this._readableState;return!0===e[M]||!1===e.flowing},q.prototype.setEncoding=function(e){const t=new L(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let s="";for(const e of r)s+=t.write(e);return r.clear(),""!==s&&r.push(s),this._readableState.length=s.length,this},q.prototype.read=function(e){v("read",e),void 0===e?e=NaN:i(e)||(e=a(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new R("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return v("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ae(this):Z(this),null;if(0===(e=Y(e,t))&&t.ended)return 0===t.length&&ae(this),null;let s,n=!!(64&t.state);if(v("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,v("length less than watermark",n)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)n=!1,v("reading, ended or constructing",n);else if(n){v("do read"),t.state|=8|$,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){D(this,e)}t.state&=~$,t.reading||(e=Y(r,t))}return s=e>0?oe(e,t):null,null===s?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ae(this)),null===s||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",s)),s},q.prototype._read=function(e){throw new C("_read()")},q.prototype.pipe=function(e,t){const r=this,n=this._readableState;1===n.pipes.length&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new d(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(e),v("pipe count=%d opts=%j",n.pipes.length,t);const i=t&&!1===t.end||e===s.stdout||e===s.stderr?g:o;function o(){v("onend"),e.end()}let a;n.endEmitted?s.nextTick(i):r.once("end",i),e.on("unpipe",function t(s,i){v("onunpipe"),s===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,v("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),a&&e.removeListener("drain",a),e.removeListener("error",h),e.removeListener("unpipe",t),r.removeListener("end",o),r.removeListener("end",g),r.removeListener("data",u),c=!0,a&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&a())});let c=!1;function l(){c||(1===n.pipes.length&&n.pipes[0]===e?(v("false write response, pause",0),n.awaitDrainWriters=e,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(e)&&(v("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(e)),r.pause()),a||(a=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(v("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(v("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(r,e),e.on("drain",a))}function u(t){v("ondata");const r=e.write(t);v("dest.write",r),!1===r&&l()}function h(t){if(v("onerror",t),g(),e.removeListener("error",h),0===e.listenerCount("error")){const r=e._writableState||e._readableState;r&&!r.errorEmitted?D(e,t):e.emit("error",t)}}function f(){e.removeListener("finish",p),g()}function p(){v("onfinish"),e.removeListener("close",f),g()}function g(){v("unpipe"),r.unpipe(e)}return r.on("data",u),m(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",r),!0===e.writableNeedDrain?l():n.flowing||(v("pipe resume"),r.resume()),e},q.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=n(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},q.prototype.on=function(e,t){const r=_.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,v("on readable",n.length,n.reading),n.length?Z(this):n.reading||s.nextTick(re,this))),r},q.prototype.addListener=q.prototype.on,q.prototype.removeListener=function(e,t){const r=_.prototype.removeListener.call(this,e,t);return"readable"===e&&s.nextTick(te,this),r},q.prototype.off=q.prototype.removeListener,q.prototype.removeAllListeners=function(e){const t=_.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||s.nextTick(te,this),t},q.prototype.resume=function(){const e=this._readableState;return e.flowing||(v("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,s.nextTick(se,e,t))}(this,e)),e[M]=!1,this},q.prototype.pause=function(){return v("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(v("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[M]=!0,this},q.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{D(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=l(e);for(let t=1;t<r.length;t++){const s=r[t];void 0===this[s]&&"function"==typeof e[s]&&(this[s]=e[s].bind(e))}return this},q.prototype[p]=function(){return ie(this)},q.prototype.iterator=function(e){return void 0!==e&&N(e,"options"),ie(this,e)},c(q.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),c(K.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[M]},set(e){this[M]=!!e}}}),q._fromList=oe,q.from=function(e,t){return U(q,e,t)},q.fromWeb=function(e,t){return he().newStreamReadableFromReadableStream(e,t)},q.toWeb=function(e,t){return he().newReadableStreamFromStreamReadable(e,t)},q.wrap=function(e,t){var r,s;return new q({objectMode:null===(r=null!==(s=e.readableObjectMode)&&void 0!==s?s:e.objectMode)||void 0===r||r,...t,destroy(t,r){k.destroyer(e,t),r(t)}}).wrap(e)}},7631:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))(function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SocksClientError=t.SocksClient=void 0;const n=r(4434),i=r(9278),o=r(7575),a=r(5438),c=r(7130),l=r(7736),u=r(3763);Object.defineProperty(t,"SocksClientError",{enumerable:!0,get:function(){return u.SocksClientError}});const h=r(9424);class d extends n.EventEmitter{constructor(e){super(),this.options=Object.assign({},e),(0,c.validateSocksClientOptions)(e),this.setState(a.SocksClientState.Created)}static createConnection(e,t){return new Promise((r,s)=>{try{(0,c.validateSocksClientOptions)(e,["connect"])}catch(e){return"function"==typeof t?(t(e),r(e)):s(e)}const n=new d(e);n.connect(e.existing_socket),n.once("established",e=>{n.removeAllListeners(),"function"==typeof t?(t(null,e),r(e)):r(e)}),n.once("error",e=>{n.removeAllListeners(),"function"==typeof t?(t(e),r(e)):s(e)})})}static createConnectionChain(e,t){return new Promise((r,n)=>s(this,void 0,void 0,function*(){try{(0,c.validateSocksClientChainOptions)(e)}catch(e){return"function"==typeof t?(t(e),r(e)):n(e)}e.randomizeChain&&(0,u.shuffleArray)(e.proxies);try{let s;for(let t=0;t<e.proxies.length;t++){const r=e.proxies[t],n=t===e.proxies.length-1?e.destination:{host:e.proxies[t+1].host||e.proxies[t+1].ipaddress,port:e.proxies[t+1].port},i=yield d.createConnection({command:"connect",proxy:r,destination:n,existing_socket:s});s=s||i.socket}"function"==typeof t?(t(null,{socket:s}),r({socket:s})):r({socket:s})}catch(e){"function"==typeof t?(t(e),r(e)):n(e)}}))}static createUDPFrame(e){const t=new o.SmartBuffer;return t.writeUInt16BE(0),t.writeUInt8(e.frameNumber||0),i.isIPv4(e.remoteHost.host)?(t.writeUInt8(a.Socks5HostType.IPv4),t.writeUInt32BE((0,c.ipv4ToInt32)(e.remoteHost.host))):i.isIPv6(e.remoteHost.host)?(t.writeUInt8(a.Socks5HostType.IPv6),t.writeBuffer((0,c.ipToBuffer)(e.remoteHost.host))):(t.writeUInt8(a.Socks5HostType.Hostname),t.writeUInt8(Buffer.byteLength(e.remoteHost.host)),t.writeString(e.remoteHost.host)),t.writeUInt16BE(e.remoteHost.port),t.writeBuffer(e.data),t.toBuffer()}static parseUDPFrame(e){const t=o.SmartBuffer.fromBuffer(e);t.readOffset=2;const r=t.readUInt8(),s=t.readUInt8();let n;return n=s===a.Socks5HostType.IPv4?(0,c.int32ToIpv4)(t.readUInt32BE()):s===a.Socks5HostType.IPv6?h.Address6.fromByteArray(Array.from(t.readBuffer(16))).canonicalForm():t.readString(t.readUInt8()),{frameNumber:r,remoteHost:{host:n,port:t.readUInt16BE()},data:t.readBuffer()}}setState(e){this.state!==a.SocksClientState.Error&&(this.state=e)}connect(e){this.onDataReceived=e=>this.onDataReceivedHandler(e),this.onClose=()=>this.onCloseHandler(),this.onError=e=>this.onErrorHandler(e),this.onConnect=()=>this.onConnectHandler();const t=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||a.DEFAULT_TIMEOUT);t.unref&&"function"==typeof t.unref&&t.unref(),this.socket=e||new i.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(a.SocksClientState.Connecting),this.receiveBuffer=new l.ReceiveBuffer,e?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),void 0!==this.options.set_tcp_nodelay&&null!==this.options.set_tcp_nodelay&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",e=>{setImmediate(()=>{if(this.receiveBuffer.length>0){const t=this.receiveBuffer.get(this.receiveBuffer.length);e.socket.emit("data",t)}e.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.BoundWaitingForConnection&&this.closeSocket(a.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(a.SocksClientState.Connected),4===this.options.proxy.type?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(a.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(e){this.receiveBuffer.append(e),this.processData()}processData(){for(;this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===a.SocksClientState.SentInitialHandshake)4===this.options.proxy.type?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===a.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===a.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else{if(this.state!==a.SocksClientState.BoundWaitingForConnection){this.closeSocket(a.ERRORS.InternalError);break}4===this.options.proxy.type?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse()}}onCloseHandler(){this.closeSocket(a.ERRORS.SocketClosed)}onErrorHandler(e){this.closeSocket(e.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(e){this.state!==a.SocksClientState.Error&&(this.setState(a.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new u.SocksClientError(e,this.options)))}sendSocks4InitialHandshake(){const e=this.options.proxy.userId||"",t=new o.SmartBuffer;t.writeUInt8(4),t.writeUInt8(a.SocksCommand[this.options.command]),t.writeUInt16BE(this.options.destination.port),i.isIPv4(this.options.destination.host)?(t.writeBuffer((0,c.ipToBuffer)(this.options.destination.host)),t.writeStringNT(e)):(t.writeUInt8(0),t.writeUInt8(0),t.writeUInt8(0),t.writeUInt8(1),t.writeStringNT(e),t.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(t.toBuffer())}handleSocks4FinalHandshakeResponse(){const e=this.receiveBuffer.get(8);if(e[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedConnection} - (${a.Socks4Response[e[1]]})`);else if(a.SocksCommand[this.options.command]===a.SocksCommand.bind){const t=o.SmartBuffer.fromBuffer(e);t.readOffset=2;const r={port:t.readUInt16BE(),host:(0,c.int32ToIpv4)(t.readUInt32BE())};"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress),this.setState(a.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:r,socket:this.socket})}else this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){const e=this.receiveBuffer.get(8);if(e[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${a.Socks4Response[e[1]]})`);else{const t=o.SmartBuffer.fromBuffer(e);t.readOffset=2;const r={port:t.readUInt16BE(),host:(0,c.int32ToIpv4)(t.readUInt32BE())};this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})}}sendSocks5InitialHandshake(){const e=new o.SmartBuffer,t=[a.Socks5Auth.NoAuth];(this.options.proxy.userId||this.options.proxy.password)&&t.push(a.Socks5Auth.UserPass),void 0!==this.options.proxy.custom_auth_method&&t.push(this.options.proxy.custom_auth_method),e.writeUInt8(5),e.writeUInt8(t.length);for(const r of t)e.writeUInt8(r);this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(e.toBuffer()),this.setState(a.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){const e=this.receiveBuffer.get(2);5!==e[0]?this.closeSocket(a.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):e[1]===a.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):e[1]===a.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=a.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):e[1]===a.Socks5Auth.UserPass?(this.socks5ChosenAuthType=a.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):e[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){const e=this.options.proxy.userId||"",t=this.options.proxy.password||"",r=new o.SmartBuffer;r.writeUInt8(1),r.writeUInt8(Buffer.byteLength(e)),r.writeString(e),r.writeUInt8(Buffer.byteLength(t)),r.writeString(t),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(r.toBuffer()),this.setState(a.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return s(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(a.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(e){return s(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(e)})}handleSocks5AuthenticationNoAuthHandshakeResponse(e){return s(this,void 0,void 0,function*(){return 0===e[1]})}handleSocks5AuthenticationUserPassHandshakeResponse(e){return s(this,void 0,void 0,function*(){return 0===e[1]})}handleInitialSocks5AuthenticationHandshakeResponse(){return s(this,void 0,void 0,function*(){this.setState(a.SocksClientState.ReceivedAuthenticationResponse);let e=!1;this.socks5ChosenAuthType===a.Socks5Auth.NoAuth?e=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===a.Socks5Auth.UserPass?e=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(e=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),e?this.sendSocks5CommandRequest():this.closeSocket(a.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){const e=new o.SmartBuffer;e.writeUInt8(5),e.writeUInt8(a.SocksCommand[this.options.command]),e.writeUInt8(0),i.isIPv4(this.options.destination.host)?(e.writeUInt8(a.Socks5HostType.IPv4),e.writeBuffer((0,c.ipToBuffer)(this.options.destination.host))):i.isIPv6(this.options.destination.host)?(e.writeUInt8(a.Socks5HostType.IPv6),e.writeBuffer((0,c.ipToBuffer)(this.options.destination.host))):(e.writeUInt8(a.Socks5HostType.Hostname),e.writeUInt8(this.options.destination.host.length),e.writeString(this.options.destination.host)),e.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(e.toBuffer()),this.setState(a.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){const e=this.receiveBuffer.peek(5);if(5!==e[0]||e[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${a.Socks5Response[e[1]]}`);else{const t=e[3];let r,s;if(t===a.Socks5HostType.IPv4){const e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<e)return void(this.nextRequiredPacketBufferSize=e);s=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),r={host:(0,c.int32ToIpv4)(s.readUInt32BE()),port:s.readUInt16BE()},"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress)}else if(t===a.Socks5HostType.Hostname){const t=e[4],n=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(t);if(this.receiveBuffer.length<n)return void(this.nextRequiredPacketBufferSize=n);s=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(n).slice(5)),r={host:s.readString(t),port:s.readUInt16BE()}}else if(t===a.Socks5HostType.IPv6){const e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<e)return void(this.nextRequiredPacketBufferSize=e);s=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),r={host:h.Address6.fromByteArray(Array.from(s.readBuffer(16))).canonicalForm(),port:s.readUInt16BE()}}this.setState(a.SocksClientState.ReceivedFinalResponse),a.SocksCommand[this.options.command]===a.SocksCommand.connect?(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.bind?(this.setState(a.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:r,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.associate&&(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){const e=this.receiveBuffer.peek(5);if(5!==e[0]||e[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${a.Socks5Response[e[1]]}`);else{const t=e[3];let r,s;if(t===a.Socks5HostType.IPv4){const e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<e)return void(this.nextRequiredPacketBufferSize=e);s=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),r={host:(0,c.int32ToIpv4)(s.readUInt32BE()),port:s.readUInt16BE()},"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress)}else if(t===a.Socks5HostType.Hostname){const t=e[4],n=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(t);if(this.receiveBuffer.length<n)return void(this.nextRequiredPacketBufferSize=n);s=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(n).slice(5)),r={host:s.readString(t),port:s.readUInt16BE()}}else if(t===a.Socks5HostType.IPv6){const e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<e)return void(this.nextRequiredPacketBufferSize=e);s=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),r={host:h.Address6.fromByteArray(Array.from(s.readBuffer(16))).canonicalForm(),port:s.readUInt16BE()}}this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}}t.SocksClient=d},7687:(e,t,r)=>{"use strict";const s=r(857),n=r(2018),i=r(5884),{env:o}=process;let a;function c(e,t={}){return 0!==(r=function(e,{streamIsTTY:t,sniffFlags:r=!0}={}){const n=function(){if("FORCE_COLOR"in o)return"true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(Number.parseInt(o.FORCE_COLOR,10),3)}();void 0!==n&&(a=n);const c=r?a:n;if(0===c)return 0;if(r){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===c)return 0;const l=c||0;if("dumb"===o.TERM)return l;if("win32"===process.platform){const e=s.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(e=>e in o)||"codeship"===o.CI_NAME?1:l;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=Number.parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:l}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3};var r}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?a=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=1),e.exports={supportsColor:c,stdout:c({isTTY:n.isatty(1)}),stderr:c({isTTY:n.isatty(2)})}},7699:(e,t,r)=>{"use strict";const s=r(1060);s.createWebSocketStream=r(3719),s.Server=r(1722),s.Receiver=r(6286),s.Sender=r(914),s.WebSocket=s,s.WebSocketServer=s.Server,e.exports=s},7732:function(e,t,r){"use strict";var s,n=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(s=function(e){return s=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},s(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=s(e),o=0;o<r.length;o++)"default"!==r[o]&&n(t,e,r[o]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});const a=r(67),c=o(r(6887)),l={set:a.setInterval,clear:a.clearInterval},u={set:(e,t)=>setInterval(e,t),clear:e=>clearInterval(e)};t.default=e=>{switch(e){case"native":return u;case"worker":return l;default:return!c.default||c.isWebWorker||c.isReactNativeBrowser?u:l}}},7736:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReceiveBuffer=void 0,t.ReceiveBuffer=class{constructor(e=4096){this.buffer=Buffer.allocUnsafe(e),this.offset=0,this.originalSize=e}get length(){return this.offset}append(e){if(!Buffer.isBuffer(e))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+e.length>=this.buffer.length){const t=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+e.length)),t.copy(this.buffer)}return e.copy(this.buffer,this.offset),this.offset+=e.length}peek(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,e)}get(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");const t=Buffer.allocUnsafe(e);return this.buffer.slice(0,e).copy(t),this.buffer.copyWithin(0,e,e+this.offset-e),this.offset-=e,t}}},7758:(e,t,r)=>{const s=r(4422),{ArrayIsArray:n,Promise:i,SymbolAsyncIterator:o,SymbolDispose:a}=r(4134),c=r(6238),{once:l}=r(7760),u=r(5896),h=r(3370),{aggregateTwoErrors:d,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:g,ERR_STREAM_DESTROYED:b,ERR_STREAM_PREMATURE_CLOSE:_},AbortError:m}=r(6371),{validateFunction:y,validateAbortSignal:S}=r(277),{isIterable:w,isReadable:v,isReadableNodeStream:E,isNodeStream:k,isTransformStream:I,isWebStream:A,isReadableStream:O,isReadableFinished:T}=r(6115),C=globalThis.AbortController||r(6584).AbortController;let R,B,x;function P(e,t,r){let s=!1;return e.on("close",()=>{s=!0}),{destroy:t=>{s||(s=!0,u.destroyer(e,t||new b("pipe")))},cleanup:c(e,{readable:t,writable:r},e=>{s=!e})}}function N(e){if(w(e))return e;if(E(e))return async function*(e){B||(B=r(7576)),yield*B.prototype[o].call(e)}(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function M(e,t,r,{end:s}){let n,o=null;const a=e=>{if(e&&(n=e),o){const e=o;o=null,e()}},l=()=>new i((e,t)=>{n?t(n):o=()=>{n?t(n):e()}});t.on("drain",a);const u=c(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(const r of e)t.write(r)||await l();s&&(t.end(),await l()),r()}catch(e){r(n!==e?d(n,e):e)}finally{u(),t.off("drain",a)}}async function L(e,t,r,{end:s}){I(t)&&(t=t.writable);const n=t.getWriter();try{for await(const t of e)await n.ready,n.write(t).catch(()=>{});await n.ready,s&&await n.close(),r()}catch(e){try{await n.abort(e),r(e)}catch(e){r(e)}}}function U(e,t,i){if(1===e.length&&n(e[0])&&(e=e[0]),e.length<2)throw new g("streams");const o=new C,c=o.signal,l=null==i?void 0:i.signal,u=[];function d(){F(new m)}let b,_,y;S(l,"options.signal"),x=x||r(7760).addAbortListener,l&&(b=x(l,d));const T=[];let B,U=0;function D(e){F(e,0===--U)}function F(e,r){var n;if(!e||_&&"ERR_STREAM_PREMATURE_CLOSE"!==_.code||(_=e),_||r){for(;T.length;)T.shift()(_);null===(n=b)||void 0===n||n[a](),o.abort(),r&&(_||u.forEach(e=>e()),s.nextTick(t,_,y))}}for(let H=0;H<e.length;H++){const z=e[H],K=H<e.length-1,q=H>0,G=K||!1!==(null==i?void 0:i.end),Q=H===e.length-1;if(k(z)){if(G){const{destroy:Y,cleanup:Z}=P(z,K,q);T.push(Y),v(z)&&Q&&u.push(Z)}function W(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&D(e)}z.on("error",W),v(z)&&Q&&u.push(()=>{z.removeListener("error",W)})}if(0===H)if("function"==typeof z){if(B=z({signal:c}),!w(B))throw new p("Iterable, AsyncIterable or Stream","source",B)}else B=w(z)||E(z)||I(z)?z:h.from(z);else if("function"==typeof z){var $;if(B=I(B)?N(null===($=B)||void 0===$?void 0:$.readable):N(B),B=z(B,{signal:c}),K){if(!w(B,!0))throw new p("AsyncIterable",`transform[${H-1}]`,B)}else{var V;R||(R=r(6524));const J=new R({objectMode:!0}),X=null===(V=B)||void 0===V?void 0:V.then;if("function"==typeof X)U++,X.call(B,e=>{y=e,null!=e&&J.write(e),G&&J.end(),s.nextTick(D)},e=>{J.destroy(e),s.nextTick(D,e)});else if(w(B,!0))U++,M(B,J,D,{end:G});else{if(!O(B)&&!I(B))throw new p("AsyncIterable or Promise","destination",B);{const re=B.readable||B;U++,M(re,J,D,{end:G})}}B=J;const{destroy:ee,cleanup:te}=P(B,!1,!0);T.push(ee),Q&&u.push(te)}}else if(k(z)){if(E(B)){U+=2;const se=j(B,z,D,{end:G});v(z)&&Q&&u.push(se)}else if(I(B)||O(B)){const ne=B.readable||B;U++,M(ne,z,D,{end:G})}else{if(!w(B))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],B);U++,M(B,z,D,{end:G})}B=z}else if(A(z)){if(E(B))U++,L(N(B),z,D,{end:G});else if(O(B)||w(B))U++,L(B,z,D,{end:G});else{if(!I(B))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],B);U++,L(B.readable,z,D,{end:G})}B=z}else B=h.from(z)}return(null!=c&&c.aborted||null!=l&&l.aborted)&&s.nextTick(d),B}function j(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new _)}),e.pipe(t,{end:!1}),n){function o(){i=!0,t.end()}T(e)?s.nextTick(o):e.once("end",o)}else r();return c(e,{readable:!0,writable:!1},t=>{const s=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&s&&s.ended&&!s.errored&&!s.errorEmitted?e.once("end",r).once("error",r):r(t)}),c(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl:U,pipeline:function(...e){return U(e,l(function(e){return y(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},7759:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(7442)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7760:(e,t,r)=>{"use strict";const s=r(181),{format:n,inspect:i}=r(9231),{codes:{ERR_INVALID_ARG_TYPE:o}}=r(6371),{kResistStopPropagation:a,AggregateError:c,SymbolDispose:l}=r(4134),u=globalThis.AbortSignal||r(6584).AbortSignal,h=globalThis.AbortController||r(6584).AbortController,d=Object.getPrototypeOf(async function(){}).constructor,f=globalThis.Blob||s.Blob,p=void 0!==f?function(e){return e instanceof f}:function(e){return!1},g=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new o(t,"AbortSignal",e)};e.exports={AggregateError:c,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...s)=>e?r(e):t(...s))}),debuglog:()=>function(){},format:n,inspect:i,types:{isAsyncFunction:e=>e instanceof d,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:p,deprecate:(e,t)=>e,addAbortListener:r(4434).addAbortListener||function(e,t){if(void 0===e)throw new o("signal","AbortSignal",e);let r;return g(e,"signal"),(e=>{if("function"!=typeof e)throw new o("listener","Function",e)})(t),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[l](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new h,r=()=>t.abort();return e.forEach(e=>{g(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},7813:(e,t,r)=>{"use strict";const{Buffer:s}=r(181),n=Symbol.for("BufferList");function i(e){if(!(this instanceof i))return new i(e);i._init.call(this,e)}i._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},i.prototype._new=function(e){return new i(e)},i.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const s=t+this._bufs[r].length;if(e<s||r===this._bufs.length-1)return[r,e-t];t=s}},i.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},i.prototype.getBuffers=function(){return this._bufs},i.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},i.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},i.prototype.copy=function(e,t,r,n){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof n||n>this.length)&&(n=this.length),r>=this.length)return e||s.alloc(0);if(n<=0)return e||s.alloc(0);const i=!!e,o=this._offset(r),a=n-r;let c=a,l=i&&t||0,u=o[1];if(0===r&&n===this.length){if(!i)return 1===this._bufs.length?this._bufs[0]:s.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,l),l+=this._bufs[t].length;return e}if(c<=this._bufs[o[0]].length-u)return i?this._bufs[o[0]].copy(e,t,u,u+c):this._bufs[o[0]].slice(u,u+c);i||(e=s.allocUnsafe(a));for(let t=o[0];t<this._bufs.length;t++){const r=this._bufs[t].length-u;if(!(c>r)){this._bufs[t].copy(e,l,u,u+c),l+=r;break}this._bufs[t].copy(e,l,u),l+=r,c-=r,u&&(u=0)}return e.length>l?e.slice(0,l):e},i.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const r=this._offset(e),s=this._offset(t),n=this._bufs.slice(r[0],s[0]+1);return 0===s[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,s[1]),0!==r[1]&&(n[0]=n[0].slice(r[1])),this._new(n)},i.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},i.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},i.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},i.prototype.append=function(e){return this._attach(e,i.prototype._appendBuffer)},i.prototype.prepend=function(e){return this._attach(e,i.prototype._prependBuffer,!0)},i.prototype._attach=function(e,t,r){if(null==e)return this;if(e.buffer)t.call(this,s.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){const[s,n]=r?[e.length-1,-1]:[0,1];for(let i=s;i>=0&&i<e.length;i+=n)this._attach(e[i],t,r)}else if(this._isBufferList(e)){const[s,n]=r?[e._bufs.length-1,-1]:[0,1];for(let i=s;i>=0&&i<e._bufs.length;i+=n)this._attach(e._bufs[i],t,r)}else"number"==typeof e&&(e=e.toString()),t.call(this,s.from(e));return this},i.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},i.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},i.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=s.from([e]):"string"==typeof e?e=s.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=s.from(e.buffer,e.byteOffset,e.byteLength):s.isBuffer(e)||(e=s.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const n=this._offset(t);let i=n[0],o=n[1];for(;i<this._bufs.length;i++){const t=this._bufs[i];for(;o<t.length;)if(t.length-o>=e.length){const r=t.indexOf(e,o);if(-1!==r)return this._reverseOffset([i,r]);o=t.length-e.length+1}else{const t=this._reverseOffset([i,o]);if(this._match(t,e))return t;o++}o=0}return-1},i.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)(function(t){i.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}})(t)}(),i.prototype._isBufferList=function(e){return e instanceof i||i.isBufferList(e)},i.isBufferList=function(e){return null!=e&&e[n]},e.exports=i},7830:(e,t,r)=>{"use strict";const{pipeline:s}=r(7758),n=r(3370),{destroyer:i}=r(5896),{isNodeStream:o,isReadable:a,isWritable:c,isWebStream:l,isTransformStream:u,isWritableStream:h,isReadableStream:d}=r(6115),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:p,ERR_MISSING_ARGS:g}}=r(6371),b=r(6238);e.exports=function(...e){if(0===e.length)throw new g("streams");if(1===e.length)return n.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=n.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=n.from(e[t])}for(let r=0;r<e.length;++r)if(o(e[r])||l(e[r])){if(r<e.length-1&&!(a(e[r])||d(e[r])||u(e[r])))throw new p(`streams[${r}]`,t[r],"must be readable");if(r>0&&!(c(e[r])||h(e[r])||u(e[r])))throw new p(`streams[${r}]`,t[r],"must be writable")}let r,_,m,y,S;const w=e[0],v=s(e,function(e){const t=y;y=null,t?t(e):e?S.destroy(e):k||E||S.destroy()}),E=!!(c(w)||h(w)||u(w)),k=!!(a(v)||d(v)||u(v));if(S=new n({writableObjectMode:!(null==w||!w.writableObjectMode),readableObjectMode:!(null==v||!v.readableObjectMode),writable:E,readable:k}),E){if(o(w))S._write=function(e,t,s){w.write(e,t)?s():r=s},S._final=function(e){w.end(),_=e},w.on("drain",function(){if(r){const e=r;r=null,e()}});else if(l(w)){const e=(u(w)?w.writable:w).getWriter();S._write=async function(t,r,s){try{await e.ready,e.write(t).catch(()=>{}),s()}catch(e){s(e)}},S._final=async function(t){try{await e.ready,e.close().catch(()=>{}),_=t}catch(e){t(e)}}}const e=u(v)?v.readable:v;b(e,()=>{if(_){const e=_;_=null,e()}})}if(k)if(o(v))v.on("readable",function(){if(m){const e=m;m=null,e()}}),v.on("end",function(){S.push(null)}),S._read=function(){for(;;){const e=v.read();if(null===e)return void(m=S._read);if(!S.push(e))return}};else if(l(v)){const e=(u(v)?v.readable:v).getReader();S._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!S.push(t))return;if(r)return void S.push(null)}catch{return}}}return S._destroy=function(e,t){e||null===y||(e=new f),m=null,r=null,_=null,null===y?t(e):(y=t,o(v)&&i(v,e))},S}},7833:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))}),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(736)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(4478),n={objectMode:!0},i={clean:!0};t.default=class{options;_inflights;constructor(e){this.options=e||{},this.options={...i,...e},this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){const e=new s.Readable(n),t=[];let r=!1,i=0;return this._inflights.forEach((e,r)=>{t.push(e)}),e._read=()=>{!r&&i<t.length?e.push(t[i++]):e.push(null)},e.destroy=t=>{if(!r)return r=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,t){const r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(e,t){const r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}}},7990:()=>{},8194:(e,t,r)=>{"use strict";r.d(t,{CD:()=>S});var s,n=(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},s(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(){function e(e,t){this.ee=1,this.u=void 0,this.p=void 0,this.K=void 0,this.N=void 0,this.rr=void 0,this.u=e,this.p=t}return e.prototype.L=function(){var e=this;if(1===e.ee&&e.rr.rr===e)e=e.N;else if(e.K)for(e=e.K;e.N;)e=e.N;else{for(var t=e.rr;t.K===e;)t=(e=t).rr;e=t}return e},e.prototype.m=function(){var e=this;if(e.N){for(e=e.N;e.K;)e=e.K;return e}for(var t=e.rr;t.N===e;)t=(e=t).rr;return e.N!==t?t:e},e.prototype.ne=function(){var e=this.rr,t=this.N,r=t.K;return e.rr===this?e.rr=t:e.K===this?e.K=t:e.N=t,t.rr=e,t.K=this,this.rr=t,this.N=r,r&&(r.rr=this),t},e.prototype.te=function(){var e=this.rr,t=this.K,r=t.N;return e.rr===this?e.rr=t:e.K===this?e.K=t:e.N=t,t.rr=e,t.N=this,this.rr=t,this.K=r,r&&(r.rr=this),t},e}(),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tr=1,t}return n(t,e),t.prototype.ne=function(){var t=e.prototype.ne.call(this);return this.ie(),t.ie(),t},t.prototype.te=function(){var t=e.prototype.te.call(this);return this.ie(),t.ie(),t},t.prototype.ie=function(){this.tr=1,this.K&&(this.tr+=this.K.tr),this.N&&(this.tr+=this.N.tr)},t}(i),a=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),c=function(){function e(e){void 0===e&&(e=0),this.iteratorType=e}return e.prototype.equals=function(e){return this.o===e.o},e}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(function(){function e(){this.M=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this.M},enumerable:!1,configurable:!0}),e.prototype.size=function(){return this.M},e.prototype.empty=function(){return 0===this.M},e}());function u(){throw new RangeError("Iterator access denied!")}var h=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),d=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,n,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};const p=function(e){function t(t,r){void 0===t&&(t=function(e,t){return e<t?-1:e>t?1:0}),void 0===r&&(r=!1);var s=e.call(this)||this;return s.W=void 0,s.$=t,r?(s.re=o,s.v=function(e,t,r){var s=this.se(e,t,r);if(s){for(var n=s.rr;n!==this.h;)n.tr+=1,n=n.rr;var i=this.fe(s);if(i){var o=i,a=o.parentNode,c=o.grandParent,l=o.curNode;a.ie(),c.ie(),l.ie()}}return this.M},s.G=function(e){for(var t=this.he(e);t!==this.h;)t.tr-=1,t=t.rr}):(s.re=i,s.v=function(e,t,r){var s=this.se(e,t,r);return s&&this.fe(s),this.M},s.G=s.he),s.h=new s.re,s}return h(t,e),t.prototype.U=function(e,t){for(var r=this.h;e;){var s=this.$(e.u,t);if(s<0)e=e.N;else{if(!(s>0))return e;r=e,e=e.K}}return r},t.prototype.X=function(e,t){for(var r=this.h;e;)this.$(e.u,t)<=0?e=e.N:(r=e,e=e.K);return r},t.prototype.Y=function(e,t){for(var r=this.h;e;){var s=this.$(e.u,t);if(s<0)r=e,e=e.N;else{if(!(s>0))return e;e=e.K}}return r},t.prototype.Z=function(e,t){for(var r=this.h;e;)this.$(e.u,t)<0?(r=e,e=e.N):e=e.K;return r},t.prototype.ue=function(e){for(;;){var t,r=e.rr;if(r===this.h)return;if(1===e.ee)return void(e.ee=0);if(e===r.K)if(1===(t=r.N).ee)t.ee=0,r.ee=1,r===this.W?this.W=r.ne():r.ne();else{if(t.N&&1===t.N.ee)return t.ee=r.ee,r.ee=0,t.N.ee=0,void(r===this.W?this.W=r.ne():r.ne());t.K&&1===t.K.ee?(t.ee=1,t.K.ee=0,t.te()):(t.ee=1,e=r)}else if(1===(t=r.K).ee)t.ee=0,r.ee=1,r===this.W?this.W=r.te():r.te();else{if(t.K&&1===t.K.ee)return t.ee=r.ee,r.ee=0,t.K.ee=0,void(r===this.W?this.W=r.te():r.te());t.N&&1===t.N.ee?(t.ee=1,t.N.ee=0,t.ne()):(t.ee=1,e=r)}}},t.prototype.he=function(e){var t,r;if(1===this.M)return this.clear(),this.h;for(var s=e;s.K||s.N;){if(s.N)for(s=s.N;s.K;)s=s.K;else s=s.K;t=d([s.u,e.u],2),e.u=t[0],s.u=t[1],r=d([s.p,e.p],2),e.p=r[0],s.p=r[1],e=s}this.h.K===s?this.h.K=s.rr:this.h.N===s&&(this.h.N=s.rr),this.ue(s);var n=s.rr;return s===n.K?n.K=void 0:n.N=void 0,this.M-=1,this.W.ee=0,n},t.prototype.ae=function(e,t){return void 0!==e&&(!!this.ae(e.K,t)||!!t(e)||this.ae(e.N,t))},t.prototype.fe=function(e){for(;;){var t=e.rr;if(0===t.ee)return;var r=t.rr;if(t===r.K){if((s=r.N)&&1===s.ee){if(s.ee=t.ee=0,r===this.W)return;r.ee=1,e=r;continue}if(e===t.N)return e.ee=0,e.K&&(e.K.rr=t),e.N&&(e.N.rr=r),t.N=e.K,r.K=e.N,e.K=t,e.N=r,r===this.W?(this.W=e,this.h.rr=e):(n=r.rr).K===r?n.K=e:n.N=e,e.rr=r.rr,t.rr=e,r.rr=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e};t.ee=0,r===this.W?this.W=r.te():r.te(),r.ee=1}else{var s,n;if((s=r.K)&&1===s.ee){if(s.ee=t.ee=0,r===this.W)return;r.ee=1,e=r;continue}if(e===t.K)return e.ee=0,e.K&&(e.K.rr=r),e.N&&(e.N.rr=t),r.N=e.K,t.K=e.N,e.K=r,e.N=t,r===this.W?(this.W=e,this.h.rr=e):(n=r.rr).K===r?n.K=e:n.N=e,e.rr=r.rr,t.rr=e,r.rr=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e};t.ee=0,r===this.W?this.W=r.ne():r.ne(),r.ee=1}return}},t.prototype.se=function(e,t,r){if(void 0===this.W)return this.M+=1,this.W=new this.re(e,t),this.W.ee=0,this.W.rr=this.h,this.h.rr=this.W,this.h.K=this.W,void(this.h.N=this.W);var s,n=this.h.K,i=this.$(n.u,e);if(0!==i){if(i>0)n.K=new this.re(e,t),n.K.rr=n,s=n.K,this.h.K=s;else{var o=this.h.N,a=this.$(o.u,e);if(0===a)return void(o.p=t);if(a<0)o.N=new this.re(e,t),o.N.rr=o,s=o.N,this.h.N=s;else{if(void 0!==r){var c=r.o;if(c!==this.h){var l=this.$(c.u,e);if(0===l)return void(c.p=t);if(l>0){var u=c.L(),h=this.$(u.u,e);if(0===h)return void(u.p=t);h<0&&(s=new this.re(e,t),void 0===u.N?(u.N=s,s.rr=u):(c.K=s,s.rr=c))}}}if(void 0===s)for(s=this.W;;){var d=this.$(s.u,e);if(d>0){if(void 0===s.K){s.K=new this.re(e,t),s.K.rr=s,s=s.K;break}s=s.K}else{if(!(d<0))return void(s.p=t);if(void 0===s.N){s.N=new this.re(e,t),s.N.rr=s,s=s.N;break}s=s.N}}}}return this.M+=1,s}n.p=t},t.prototype.g=function(e,t){for(;e;){var r=this.$(e.u,t);if(r<0)e=e.N;else{if(!(r>0))return e;e=e.K}}return e||this.h},t.prototype.clear=function(){this.M=0,this.W=void 0,this.h.rr=void 0,this.h.K=this.h.N=void 0},t.prototype.updateKeyByIterator=function(e,t){var r=e.o;if(r===this.h&&u(),1===this.M)return r.u=t,!0;if(r===this.h.K)return this.$(r.m().u,t)>0&&(r.u=t,!0);if(r===this.h.N)return this.$(r.L().u,t)<0&&(r.u=t,!0);var s=r.L().u;if(this.$(s,t)>=0)return!1;var n=r.m().u;return!(this.$(n,t)<=0||(r.u=t,0))},t.prototype.eraseElementByPos=function(e){if(e<0||e>this.M-1)throw new RangeError;var t=0,r=this;return this.ae(this.W,function(s){return e===t?(r.G(s),!0):(t+=1,!1)}),this.M},t.prototype.eraseElementByKey=function(e){if(0===this.M)return!1;var t=this.g(this.W,e);return t!==this.h&&(this.G(t),!0)},t.prototype.eraseElementByIterator=function(e){var t=e.o;t===this.h&&u();var r=void 0===t.N;return 0===e.iteratorType?r&&e.next():r&&void 0!==t.K||e.next(),this.G(t),e},t.prototype.forEach=function(e){var t,r,s=0;try{for(var n=f(this),i=n.next();!i.done;i=n.next())e(i.value,s++,this)}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},t.prototype.getElementByPos=function(e){var t,r,s;if(e<0||e>this.M-1)throw new RangeError;var n=0;try{for(var i=f(this),o=i.next();!o.done;o=i.next()){var a=o.value;if(n===e){s=a;break}n+=1}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return s},t.prototype.getHeight=function(){if(0===this.M)return 0;var e=function(t){return t?Math.max(e(t.K),e(t.N))+1:0};return e(this.W)},t}(l);var g=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}();const b=function(e){function t(t,r,s){var n=e.call(this,s)||this;return n.o=t,n.h=r,0===n.iteratorType?(n.pre=function(){return this.o===this.h.K&&u(),this.o=this.o.L(),this},n.next=function(){return this.o===this.h&&u(),this.o=this.o.m(),this}):(n.pre=function(){return this.o===this.h.N&&u(),this.o=this.o.m(),this},n.next=function(){return this.o===this.h&&u(),this.o=this.o.L(),this}),n}return g(t,e),Object.defineProperty(t.prototype,"index",{get:function(){var e=this.o,t=this.h.rr;if(e===this.h)return t?t.tr-1:0;var r=0;for(e.K&&(r+=e.K.tr);e!==t;){var s=e.rr;e===s.N&&(r+=1,s.K&&(r+=s.K.tr)),e=s}return r},enumerable:!1,configurable:!0}),t}(c);var _=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(s.prototype=r.prototype,new s)}}(),m=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},y=function(e){function t(t,r,s,n){var i=e.call(this,t,r,n)||this;return i.container=s,i}return _(t,e),Object.defineProperty(t.prototype,"pointer",{get:function(){return this.o===this.h&&u(),this.o.u},enumerable:!1,configurable:!0}),t.prototype.copy=function(){return new t(this.o,this.h,this.container,this.iteratorType)},t}(b);const S=function(e){function t(t,r,s){void 0===t&&(t=[]);var n=e.call(this,r,s)||this,i=n;return t.forEach(function(e){i.insert(e)}),n}return _(t,e),t.prototype.P=function(e){return function(e,t){var r,s,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(e){return function(t){return c([e,t])}}function c(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(n=2&i[0]?s.return:i[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,i[1])).done)return n;switch(s=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,s=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],s=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}(this,function(t){switch(t.label){case 0:return void 0===e?[2]:[5,m(this.P(e.K))];case 1:return t.sent(),[4,e.u];case 2:return t.sent(),[5,m(this.P(e.N))];case 3:return t.sent(),[2]}})},t.prototype.begin=function(){return new y(this.h.K||this.h,this.h,this)},t.prototype.end=function(){return new y(this.h,this.h,this)},t.prototype.rBegin=function(){return new y(this.h.N||this.h,this.h,this,1)},t.prototype.rEnd=function(){return new y(this.h,this.h,this,1)},t.prototype.front=function(){return this.h.K?this.h.K.u:void 0},t.prototype.back=function(){return this.h.N?this.h.N.u:void 0},t.prototype.insert=function(e,t){return this.v(e,void 0,t)},t.prototype.find=function(e){var t=this.g(this.W,e);return new y(t,this.h,this)},t.prototype.lowerBound=function(e){var t=this.U(this.W,e);return new y(t,this.h,this)},t.prototype.upperBound=function(e){var t=this.X(this.W,e);return new y(t,this.h,this)},t.prototype.reverseLowerBound=function(e){var t=this.Y(this.W,e);return new y(t,this.h,this)},t.prototype.reverseUpperBound=function(e){var t=this.Z(this.W,e);return new y(t,this.h,this)},t.prototype.union=function(e){var t=this;return e.forEach(function(e){t.insert(e)}),this.M},t.prototype[Symbol.iterator]=function(){return this.P(this.W)},t}(p)},8203:function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.streamBuilder=t.browserStreamBuilder=void 0;const n=r(181),i=s(r(7699)),o=s(r(8539)),a=r(4478),c=s(r(6887)),l=r(2635),u=(0,o.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function d(e,t){let r=`${e.protocol}://${e.hostname}:${e.port}${e.path}`;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function f(e){const t=e;return e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),c.default||e.forceNativeWebSocket||"wss"!==e.protocol||h.forEach(r=>{Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,r)&&(t.wsOptions[r]=e[r])}),t}t.streamBuilder=(e,t)=>{u("streamBuilder");const r=f(t);r.hostname=r.hostname||r.host||"localhost";const s=d(r,e),n=function(e,t,r){u("createWebSocket"),u(`protocol: ${r.protocolId} ${r.protocolVersion}`);const s="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";let n;return u(`creating new Websocket for url: ${t} and protocol: ${s}`),n=r.createWebsocket?r.createWebsocket(t,[s],r):new i.default(t,[s],r.wsOptions),n}(0,s,r),o=i.default.createWebSocketStream(n,r.wsOptions);return o.url=s,n.on("close",()=>{o.destroy()}),o},t.browserStreamBuilder=(e,t)=>{let r;u("browserStreamBuilder");const s=function(e){const t=f(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=Number(e.port))}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t),i=s.browserBufferSize||524288,o=t.browserBufferTimeout||1e3,c=!t.objectMode,h=function(e,t){const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",s=d(t,e);let n;return n=t.createWebsocket?t.createWebsocket(s,[r],t):new WebSocket(s,[r]),n.binaryType="arraybuffer",n}(e,t),p=function(e){const t=new a.Transform({objectMode:e.objectMode});return t._write=function e(t,r,s){if(h.bufferedAmount>i)return void setTimeout(e,o,t,r,s);c&&"string"==typeof t&&(t=n.Buffer.from(t,"utf8"));try{h.send(t)}catch(e){return s(e)}s()},t._flush=function(e){h.close(),e()},t}(t);t.objectMode||(p._writev=l.writev.bind(p)),p.on("close",()=>{h.close()});const g=void 0!==h.addEventListener;function b(){u("WebSocket onOpen"),r instanceof l.BufferedDuplex&&r.socketReady()}function _(e){u("WebSocket onClose",e),r.end(),r.destroy()}function m(e){u("WebSocket onError",e);const t=new Error("WebSocket error");t.event=e,r.destroy(t)}async function y(e){if(!p||!p.readable||!p.writable)return;let{data:t}=e;t=t instanceof ArrayBuffer?n.Buffer.from(t):t instanceof Blob?n.Buffer.from(await new Response(t).arrayBuffer()):n.Buffer.from(t,"utf8"),p.push(t)}return h.readyState===h.OPEN?(r=p,r.socket=h):(r=new l.BufferedDuplex(t,p,h),g?h.addEventListener("open",b):h.onopen=b),g?(h.addEventListener("close",_),h.addEventListener("error",m),h.addEventListener("message",y)):(h.onclose=_,h.onerror=m,h.onmessage=y),r}},8237:(e,t,r)=>{"use strict";const{tokenChars:s}=r(5880);e.exports={parse:function(e){const t=new Set;let r=-1,n=-1,i=0;for(;i<e.length;i++){const o=e.charCodeAt(i);if(-1===n&&1===s[o])-1===r&&(r=i);else if(0===i||32!==o&&9!==o){if(44!==o)throw new SyntaxError(`Unexpected character at index ${i}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${i}`);-1===n&&(n=i);const s=e.slice(r,n);if(t.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);t.add(s),r=n=-1}}else-1===n&&-1!==r&&(n=i)}if(-1===r||-1!==n)throw new SyntaxError("Unexpected end of input");const o=e.slice(r,i);if(t.has(o))throw new SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}}},8539:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(7759):e.exports=r(5419)},8584:(e,t,r)=>{"use strict";const s=r(4422),{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:a,ObjectDefineProperties:c,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:u,Symbol:h,SymbolHasInstance:d}=r(4134);e.exports=N,N.WritableState=x;const{EventEmitter:f}=r(4434),p=r(4259).Stream,{Buffer:g}=r(181),b=r(5896),{addAbortSignal:_}=r(4147),{getHighWaterMark:m,getDefaultHighWaterMark:y}=r(5291),{ERR_INVALID_ARG_TYPE:S,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:A,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:T}=r(6371).codes,{errorOrDestroy:C}=b;function R(){}l(N.prototype,p.prototype),l(N,p);const B=h("kOnFinished");function x(e,t,s){"boolean"!=typeof s&&(s=t instanceof r(3370)),this.objectMode=!(!e||!e.objectMode),s&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?m(this,e,"writableHighWaterMark",s):y(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const n=!(!e||!1!==e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=j.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,P(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[B]=[]}function P(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function N(e){const t=this instanceof r(3370);if(!t&&!o(N,this))return new N(e);this._writableState=new x(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&_(e.signal,this)),p.call(this,e),b.construct(this,()=>{const e=this._writableState;e.writing||$(this,e),H(this,e)})}function M(e,t,r,n){const i=e._writableState;if("function"==typeof r)n=r,r=i.defaultEncoding;else{if(r){if("buffer"!==r&&!g.isEncoding(r))throw new T(r)}else r=i.defaultEncoding;"function"!=typeof n&&(n=R)}if(null===t)throw new A;if(!i.objectMode)if("string"==typeof t)!1!==i.decodeStrings&&(t=g.from(t,r),r="buffer");else if(t instanceof g)r="buffer";else{if(!p._isUint8Array(t))throw new S("chunk",["string","Buffer","Uint8Array"],t);t=p._uint8ArrayToBuffer(t),r="buffer"}let o;return i.ending?o=new O:i.destroyed&&(o=new k("write")),o?(s.nextTick(n,o),C(e,o,!0),o):(i.pendingcb++,function(e,t,r,s,n){const i=t.objectMode?1:r.length;t.length+=i;const o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:s,callback:n}),t.allBuffers&&"buffer"!==s&&(t.allBuffers=!1),t.allNoop&&n!==R&&(t.allNoop=!1)):(t.writelen=i,t.writecb=n,t.writing=!0,t.sync=!0,e._write(r,s,t.onwrite),t.sync=!1),o&&!t.errored&&!t.destroyed}(e,i,t,r,n))}function L(e,t,r,s,n,i,o){t.writelen=s,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new k("write")):r?e._writev(n,t.onwrite):e._write(n,i,t.onwrite),t.sync=!1}function U(e,t,r,s){--t.pendingcb,s(r),W(t),C(e,r)}function j(e,t){const r=e._writableState,n=r.sync,i=r.writecb;"function"==typeof i?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?s.nextTick(U,e,r,t,i):U(e,r,t,i)):(r.buffered.length>r.bufferedIndex&&$(e,r),n?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:e,state:r},s.nextTick(D,r.afterWriteTickInfo)):F(e,r,1,i))):C(e,new v)}function D({stream:e,state:t,count:r,cb:s}){return t.afterWriteTickInfo=null,F(e,t,r,s)}function F(e,t,r,s){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,s();t.destroyed&&W(t),H(e,t)}function W(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;const{chunk:s,callback:n}=e.buffered[r],i=e.objectMode?1:s.length;e.length-=i,n(null!==(t=e.errored)&&void 0!==t?t:new k("write"))}const r=e[B].splice(0);for(let t=0;t<r.length;t++){var s;r[t](null!==(s=e.errored)&&void 0!==s?s:new k("end"))}P(e)}function $(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:s,objectMode:i}=t,o=r.length-s;if(!o)return;let a=s;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;const s=t.allNoop?R:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},i=t.allNoop&&0===a?r:n(r,a);i.allBuffers=t.allBuffers,L(e,t,!0,t.length,i,"",s),P(t)}else{do{const{chunk:s,encoding:n,callback:o}=r[a];r[a++]=null,L(e,t,!1,i?1:s.length,s,n,o)}while(a<r.length&&!t.writing);a===r.length?P(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function V(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function H(e,t,r){V(t)&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let r=!1;function n(n){if(r)C(e,null!=n?n:v());else if(r=!0,t.pendingcb--,n){const r=t[B].splice(0);for(let e=0;e<r.length;e++)r[e](n);C(e,n,t.sync)}else V(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,s.nextTick(z,e,t))}t.sync=!0,t.pendingcb++;try{e._final(n)}catch(e){n(e)}t.sync=!1}(e,t)))}(e,t),0===t.pendingcb&&(r?(t.pendingcb++,s.nextTick((e,t)=>{V(t)?z(e,t):t.pendingcb--},e,t)):V(t)&&(t.pendingcb++,z(e,t))))}function z(e,t){t.pendingcb--,t.finished=!0;const r=t[B].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}x.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},a(x.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),a(N,d,{__proto__:null,value:function(e){return!!o(this,e)||this===N&&e&&e._writableState instanceof x}}),N.prototype.pipe=function(){C(this,new E)},N.prototype.write=function(e,t,r){return!0===M(this,e,t,r)},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||$(this,e))},N.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!g.isEncoding(e))throw new T(e);return this._writableState.defaultEncoding=e,this},N.prototype._write=function(e,t,r){if(!this._writev)throw new w("_write()");this._writev([{chunk:e,encoding:t}],r)},N.prototype._writev=null,N.prototype.end=function(e,t,r){const n=this._writableState;let o;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){const r=M(this,e,t);r instanceof i&&(o=r)}return n.corked&&(n.corked=1,this.uncork()),o||(n.errored||n.ending?n.finished?o=new I("end"):n.destroyed&&(o=new k("end")):(n.ending=!0,H(this,n,!0),n.ended=!0)),"function"==typeof r&&(o||n.finished?s.nextTick(r,o):n[B].push(r)),this},c(N.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const K=b.destroy;let q;function G(){return void 0===q&&(q={}),q}N.prototype.destroy=function(e,t){const r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[B].length)&&s.nextTick(W,r),K.call(this,e,t),this},N.prototype._undestroy=b.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},N.fromWeb=function(e,t){return G().newStreamWritableFromWritableStream(e,t)},N.toWeb=function(e){return G().newWritableStreamFromStreamWritable(e)}},8611:e=>{"use strict";e.exports=require("http")},8914:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_URL_WITH_PORT=t.RE_URL=t.RE_ZONE_STRING=t.RE_SUBNET_STRING=t.RE_BAD_ADDRESS=t.RE_BAD_CHARACTERS=t.TYPES=t.SCOPES=t.GROUPS=t.BITS=void 0,t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/,t.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/},9023:e=>{"use strict";e.exports=require("util")},9096:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,s=new Set,n="object"==typeof process&&process?process:{},i=(e,t,r,s)=>{"function"==typeof n.emitWarning?n.emitWarning(e,t,r,s):console.error(`[${r}] ${t}: ${e}`)};let o=globalThis.AbortController,a=globalThis.AbortSignal;if(void 0===o){a=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},o=class{constructor(){t()}signal=new a;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(const t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==n.env?.LRU_CACHE_IGNORE_AC_WARNING;const t=()=>{e&&(e=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");const c=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),l=e=>c(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?u:null:null;class u extends Array{constructor(e){super(e),this.fill(0)}}class h{heap;length;static#e=!1;static create(e){const t=l(e);if(!t)return[];h.#e=!0;const r=new h(e,t);return h.#e=!1,r}constructor(e,t){if(!h.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class d{#t;#r;#s;#n;#i;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#c;#l;#u;#h;#d;#f;#p;#g;#b;#_;#m;#y;#S;#w;#v;#E;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#S,sizes:e.#m,keyMap:e.#l,keyList:e.#u,valList:e.#h,next:e.#d,prev:e.#f,get head(){return e.#p},get tail(){return e.#g},free:e.#b,isBackgroundFetch:t=>e.#k(t),backgroundFetch:(t,r,s,n)=>e.#I(t,r,s,n),moveToTail:t=>e.#A(t),indexes:t=>e.#O(t),rindexes:t=>e.#T(t),isStale:t=>e.#C(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#c}get size(){return this.#a}get fetchMethod(){return this.#i}get memoMethod(){return this.#o}get dispose(){return this.#s}get disposeAfter(){return this.#n}constructor(e){const{max:t=0,ttl:r,ttlResolution:n=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:f,dispose:p,disposeAfter:g,noDisposeOnSet:b,noUpdateTTL:_,maxSize:m=0,maxEntrySize:y=0,sizeCalculation:S,fetchMethod:w,memoMethod:v,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:k,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:A,ignoreFetchAbort:O}=e;if(0!==t&&!c(t))throw new TypeError("max option must be a nonnegative integer");const T=t?l(t):Array;if(!T)throw new Error("invalid max value: "+t);if(this.#t=t,this.#r=m,this.maxEntrySize=y||this.#r,this.sizeCalculation=S,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==v&&"function"!=typeof v)throw new TypeError("memoMethod must be a function if defined");if(this.#o=v,void 0!==w&&"function"!=typeof w)throw new TypeError("fetchMethod must be a function if specified");if(this.#i=w,this.#v=!!w,this.#l=new Map,this.#u=new Array(t).fill(void 0),this.#h=new Array(t).fill(void 0),this.#d=new T(t),this.#f=new T(t),this.#p=0,this.#g=0,this.#b=h.create(t),this.#a=0,this.#c=0,"function"==typeof p&&(this.#s=p),"function"==typeof g?(this.#n=g,this.#_=[]):(this.#n=void 0,this.#_=void 0),this.#w=!!this.#s,this.#E=!!this.#n,this.noDisposeOnSet=!!b,this.noUpdateTTL=!!_,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!O,0!==this.maxEntrySize){if(0!==this.#r&&!c(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!c(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#R()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!k,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=c(n)||0===n?n:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!c(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#B()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){const e="LRU_CACHE_UNBOUNDED";(e=>!s.has(e))(e)&&(s.add(e),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,d))}}getRemainingTTL(e){return this.#l.has(e)?1/0:0}#B(){const e=new u(this.#t),t=new u(this.#t);this.#S=e,this.#y=t,this.#x=(s,n,i=r.now())=>{if(t[s]=0!==n?i:0,e[s]=n,0!==n&&this.ttlAutopurge){const e=setTimeout(()=>{this.#C(s)&&this.#P(this.#u[s],"expire")},n+1);e.unref&&e.unref()}},this.#N=s=>{t[s]=0!==e[s]?r.now():0},this.#M=(r,i)=>{if(e[i]){const o=e[i],a=t[i];if(!o||!a)return;r.ttl=o,r.start=a,r.now=s||n();const c=r.now-a;r.remainingTTL=o-c}};let s=0;const n=()=>{const e=r.now();if(this.ttlResolution>0){s=e;const t=setTimeout(()=>s=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{const i=this.#l.get(r);if(void 0===i)return 0;const o=e[i],a=t[i];return o&&a?o-((s||n())-a):1/0},this.#C=r=>{const i=t[r],o=e[r];return!!o&&!!i&&(s||n())-i>o}}#N=()=>{};#M=()=>{};#x=()=>{};#C=()=>!1;#R(){const e=new u(this.#t);this.#c=0,this.#m=e,this.#L=t=>{this.#c-=e[t],e[t]=0},this.#U=(e,t,r,s)=>{if(this.#k(t))return 0;if(!c(r)){if(!s)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof s)throw new TypeError("sizeCalculation must be a function");if(r=s(t,e),!c(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#j=(t,r,s)=>{if(e[t]=r,this.#r){const r=this.#r-e[t];for(;this.#c>r;)this.#D(!0)}this.#c+=e[t],s&&(s.entrySize=r,s.totalCalculatedSize=this.#c)}}#L=e=>{};#j=(e,t,r)=>{};#U=(e,t,r,s)=>{if(r||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#g;this.#F(t)&&(!e&&this.#C(t)||(yield t),t!==this.#p);)t=this.#f[t]}*#T({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#p;this.#F(t)&&(!e&&this.#C(t)||(yield t),t!==this.#g);)t=this.#d[t]}#F(e){return void 0!==e&&this.#l.get(this.#u[e])===e}*entries(){for(const e of this.#O())void 0===this.#h[e]||void 0===this.#u[e]||this.#k(this.#h[e])||(yield[this.#u[e],this.#h[e]])}*rentries(){for(const e of this.#T())void 0===this.#h[e]||void 0===this.#u[e]||this.#k(this.#h[e])||(yield[this.#u[e],this.#h[e]])}*keys(){for(const e of this.#O()){const t=this.#u[e];void 0===t||this.#k(this.#h[e])||(yield t)}}*rkeys(){for(const e of this.#T()){const t=this.#u[e];void 0===t||this.#k(this.#h[e])||(yield t)}}*values(){for(const e of this.#O())void 0===this.#h[e]||this.#k(this.#h[e])||(yield this.#h[e])}*rvalues(){for(const e of this.#T())void 0===this.#h[e]||this.#k(this.#h[e])||(yield this.#h[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(const r of this.#O()){const s=this.#h[r],n=this.#k(s)?s.__staleWhileFetching:s;if(void 0!==n&&e(n,this.#u[r],this))return this.get(this.#u[r],t)}}forEach(e,t=this){for(const r of this.#O()){const s=this.#h[r],n=this.#k(s)?s.__staleWhileFetching:s;void 0!==n&&e.call(t,n,this.#u[r],this)}}rforEach(e,t=this){for(const r of this.#T()){const s=this.#h[r],n=this.#k(s)?s.__staleWhileFetching:s;void 0!==n&&e.call(t,n,this.#u[r],this)}}purgeStale(){let e=!1;for(const t of this.#T({allowStale:!0}))this.#C(t)&&(this.#P(this.#u[t],"expire"),e=!0);return e}info(e){const t=this.#l.get(e);if(void 0===t)return;const s=this.#h[t],n=this.#k(s)?s.__staleWhileFetching:s;if(void 0===n)return;const i={value:n};if(this.#S&&this.#y){const e=this.#S[t],s=this.#y[t];if(e&&s){const t=e-(r.now()-s);i.ttl=t,i.start=Date.now()}}return this.#m&&(i.size=this.#m[t]),i}dump(){const e=[];for(const t of this.#O({allowStale:!0})){const s=this.#u[t],n=this.#h[t],i=this.#k(n)?n.__staleWhileFetching:n;if(void 0===i||void 0===s)continue;const o={value:i};if(this.#S&&this.#y){o.ttl=this.#S[t];const e=r.now()-this.#y[t];o.start=Math.floor(Date.now()-e)}this.#m&&(o.size=this.#m[t]),e.unshift([s,o])}return e}load(e){this.clear();for(const[t,s]of e){if(s.start){const e=Date.now()-s.start;s.start=r.now()-e}this.set(t,s.value,s)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;const{ttl:s=this.ttl,start:n,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const l=this.#U(e,t,r.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#P(e,"set"),this;let u=0===this.#a?void 0:this.#l.get(e);if(void 0===u)u=0===this.#a?this.#g:0!==this.#b.length?this.#b.pop():this.#a===this.#t?this.#D(!1):this.#a,this.#u[u]=e,this.#h[u]=t,this.#l.set(e,u),this.#d[this.#g]=u,this.#f[u]=this.#g,this.#g=u,this.#a++,this.#j(u,l,a),a&&(a.set="add"),c=!1;else{this.#A(u);const r=this.#h[u];if(t!==r){if(this.#v&&this.#k(r)){r.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:t}=r;void 0===t||i||(this.#w&&this.#s?.(t,e,"set"),this.#E&&this.#_?.push([t,e,"set"]))}else i||(this.#w&&this.#s?.(r,e,"set"),this.#E&&this.#_?.push([r,e,"set"]));if(this.#L(u),this.#j(u,l,a),this.#h[u]=t,a){a.set="replace";const e=r&&this.#k(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===s||this.#S||this.#B(),this.#S&&(c||this.#x(u,s,n),a&&this.#M(a,u)),!i&&this.#E&&this.#_){const e=this.#_;let t;for(;t=e?.shift();)this.#n?.(...t)}return this}pop(){try{for(;this.#a;){const e=this.#h[this.#p];if(this.#D(!0),this.#k(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#E&&this.#_){const e=this.#_;let t;for(;t=e?.shift();)this.#n?.(...t)}}}#D(e){const t=this.#p,r=this.#u[t],s=this.#h[t];return this.#v&&this.#k(s)?s.__abortController.abort(new Error("evicted")):(this.#w||this.#E)&&(this.#w&&this.#s?.(s,r,"evict"),this.#E&&this.#_?.push([s,r,"evict"])),this.#L(t),e&&(this.#u[t]=void 0,this.#h[t]=void 0,this.#b.push(t)),1===this.#a?(this.#p=this.#g=0,this.#b.length=0):this.#p=this.#d[t],this.#l.delete(r),this.#a--,t}has(e,t={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:s}=t,n=this.#l.get(e);if(void 0!==n){const e=this.#h[n];if(this.#k(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#C(n))return r&&this.#N(n),s&&(s.has="hit",this.#M(s,n)),!0;s&&(s.has="stale",this.#M(s,n))}else s&&(s.has="miss");return!1}peek(e,t={}){const{allowStale:r=this.allowStale}=t,s=this.#l.get(e);if(void 0===s||!r&&this.#C(s))return;const n=this.#h[s];return this.#k(n)?n.__staleWhileFetching:n}#I(e,t,r,s){const n=void 0===t?void 0:this.#h[t];if(this.#k(n))return n;const i=new o,{signal:a}=r;a?.addEventListener("abort",()=>i.abort(a.reason),{signal:i.signal});const c={signal:i.signal,options:r,context:s},l=(s,n=!1)=>{const{aborted:o}=i.signal,a=r.ignoreFetchAbort&&void 0!==s;if(r.status&&(o&&!n?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),o&&!a&&!n)return u(i.signal.reason);const l=h;return this.#h[t]===h&&(void 0===s?l.__staleWhileFetching?this.#h[t]=l.__staleWhileFetching:this.#P(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,s,c.options))),s},u=s=>{const{aborted:n}=i.signal,o=n&&r.allowStaleOnFetchAbort,a=o||r.allowStaleOnFetchRejection,c=a||r.noDeleteOnFetchRejection,l=h;if(this.#h[t]===h&&(c&&void 0!==l.__staleWhileFetching?o||(this.#h[t]=l.__staleWhileFetching):this.#P(e,"fetch")),a)return r.status&&void 0!==l.__staleWhileFetching&&(r.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw s};r.status&&(r.status.fetchDispatched=!0);const h=new Promise((t,s)=>{const o=this.#i?.(e,n,c);o&&o instanceof Promise&&o.then(e=>t(void 0===e?void 0:e),s),i.signal.addEventListener("abort",()=>{r.ignoreFetchAbort&&!r.allowStaleOnFetchAbort||(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>l(e,!0)))})}).then(l,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),u(e))),d=Object.assign(h,{__abortController:i,__staleWhileFetching:n,__returned:void 0});return void 0===t?(this.set(e,d,{...c.options,status:void 0}),t=this.#l.get(e)):this.#h[t]=d,d}#k(e){if(!this.#v)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof o}async fetch(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:f=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:b,signal:_}=t;if(!this.#v)return b&&(b.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:s,noDeleteOnStaleGet:n,status:b});const m={allowStale:r,updateAgeOnGet:s,noDeleteOnStaleGet:n,ttl:i,noDisposeOnSet:o,size:a,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:f,ignoreFetchAbort:d,status:b,signal:_};let y=this.#l.get(e);if(void 0===y){b&&(b.fetch="miss");const t=this.#I(e,y,m,p);return t.__returned=t}{const t=this.#h[y];if(this.#k(t)){const e=r&&void 0!==t.__staleWhileFetching;return b&&(b.fetch="inflight",e&&(b.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const n=this.#C(y);if(!g&&!n)return b&&(b.fetch="hit"),this.#A(y),s&&this.#N(y),b&&this.#M(b,y),t;const i=this.#I(e,y,m,p),o=void 0!==i.__staleWhileFetching&&r;return b&&(b.fetch=n?"stale":"refresh",o&&n&&(b.returnedStale=!0)),o?i.__staleWhileFetching:i.__returned=i}}async forceFetch(e,t={}){const r=await this.fetch(e,t);if(void 0===r)throw new Error("fetch() returned undefined");return r}memo(e,t={}){const r=this.#o;if(!r)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:n,...i}=t,o=this.get(e,i);if(!n&&void 0!==o)return o;const a=r(e,o,{options:i,context:s});return this.set(e,a,i),a}get(e,t={}){const{allowStale:r=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:i}=t,o=this.#l.get(e);if(void 0!==o){const t=this.#h[o],a=this.#k(t);return i&&this.#M(i,o),this.#C(o)?(i&&(i.get="stale"),a?(i&&r&&void 0!==t.__staleWhileFetching&&(i.returnedStale=!0),r?t.__staleWhileFetching:void 0):(n||this.#P(e,"expire"),i&&r&&(i.returnedStale=!0),r?t:void 0)):(i&&(i.get="hit"),a?t.__staleWhileFetching:(this.#A(o),s&&this.#N(o),t))}i&&(i.get="miss")}#W(e,t){this.#f[t]=e,this.#d[e]=t}#A(e){e!==this.#g&&(e===this.#p?this.#p=this.#d[e]:this.#W(this.#f[e],this.#d[e]),this.#W(this.#g,e),this.#g=e)}delete(e){return this.#P(e,"delete")}#P(e,t){let r=!1;if(0!==this.#a){const s=this.#l.get(e);if(void 0!==s)if(r=!0,1===this.#a)this.#$(t);else{this.#L(s);const r=this.#h[s];if(this.#k(r)?r.__abortController.abort(new Error("deleted")):(this.#w||this.#E)&&(this.#w&&this.#s?.(r,e,t),this.#E&&this.#_?.push([r,e,t])),this.#l.delete(e),this.#u[s]=void 0,this.#h[s]=void 0,s===this.#g)this.#g=this.#f[s];else if(s===this.#p)this.#p=this.#d[s];else{const e=this.#f[s];this.#d[e]=this.#d[s];const t=this.#d[s];this.#f[t]=this.#f[s]}this.#a--,this.#b.push(s)}}if(this.#E&&this.#_?.length){const e=this.#_;let t;for(;t=e?.shift();)this.#n?.(...t)}return r}clear(){return this.#$("delete")}#$(e){for(const t of this.#T({allowStale:!0})){const r=this.#h[t];if(this.#k(r))r.__abortController.abort(new Error("deleted"));else{const s=this.#u[t];this.#w&&this.#s?.(r,s,e),this.#E&&this.#_?.push([r,s,e])}}if(this.#l.clear(),this.#h.fill(void 0),this.#u.fill(void 0),this.#S&&this.#y&&(this.#S.fill(0),this.#y.fill(0)),this.#m&&this.#m.fill(0),this.#p=0,this.#g=0,this.#b.length=0,this.#c=0,this.#a=0,this.#E&&this.#_){const e=this.#_;let t;for(;t=e?.shift();)this.#n?.(...t)}}}t.LRUCache=d},9231:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){const s=t.shift();return"f"===r?s.toFixed(6):"j"===r?JSON.stringify(s):"s"===r&&"object"==typeof s?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},9278:e=>{"use strict";e.exports=require("net")},9291:(e,t,r)=>{"use strict";const s=r(8194).CD,n=r(5753)("number-allocator:trace"),i=r(5753)("number-allocator:error");function o(e,t){this.low=e,this.high=t}function a(e,t){if(!(this instanceof a))return new a(e,t);this.min=e,this.max=t,this.ss=new s([],(e,t)=>e.compare(t)),n("Create"),this.clear()}o.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},o.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},a.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},a.prototype.alloc=function(){if(0===this.ss.size())return n("alloc():empty"),null;const e=this.ss.begin(),t=e.pointer.low,r=e.pointer.high,s=t;return s+1<=r?this.ss.updateKeyByIterator(e,new o(t+1,r)):this.ss.eraseElementByPos(0),n("alloc():"+s),s},a.prototype.use=function(e){const t=new o(e,e),r=this.ss.lowerBound(t);if(!r.equals(this.ss.end())){const s=r.pointer.low,i=r.pointer.high;return r.pointer.equals(t)?(this.ss.eraseElementByIterator(r),n("use():"+e),!0):!(s>e||(s===e?(this.ss.updateKeyByIterator(r,new o(s+1,i)),n("use():"+e),0):i===e?(this.ss.updateKeyByIterator(r,new o(s,i-1)),n("use():"+e),0):(this.ss.updateKeyByIterator(r,new o(e+1,i)),this.ss.insert(new o(s,e-1)),n("use():"+e),0)))}return n("use():failed"),!1},a.prototype.free=function(e){if(e<this.min||e>this.max)return void i("free():"+e+" is out of range");const t=new o(e,e),r=this.ss.upperBound(t);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin()))return void this.ss.insert(t);r.pre();const s=r.pointer.high;r.pointer.high+1===e?this.ss.updateKeyByIterator(r,new o(s,e)):this.ss.insert(t)}else if(r.equals(this.ss.begin()))if(e+1===r.pointer.low){const t=r.pointer.high;this.ss.updateKeyByIterator(r,new o(e,t))}else this.ss.insert(t);else{const s=r.pointer.low,n=r.pointer.high;r.pre();const i=r.pointer.low;r.pointer.high+1===e?e+1===s?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new o(i,n))):this.ss.updateKeyByIterator(r,new o(i,e)):e+1===s?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new o(e,n))):this.ss.insert(t)}n("free():"+e)},a.prototype.clear=function(){n("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},a.prototype.intervalCount=function(){return this.ss.size()},a.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},e.exports=a},9372:function(e,t,r){"use strict";var s,n=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(s=function(e){return s=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},s(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=s(e),o=0;o<r.length;o++)"default"!==r[o]&&n(t,e,r[o]);return i(t,e),t}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const c=o(r(1676));t.default=c,a(r(1676),t)},9424:function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;var o=r(2839);Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return o.Address4}});var a=r(6329);Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return a.Address6}});var c=r(2437);Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return c.AddressError}});const l=i(r(2846));t.v6={helpers:l}},9576:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_SUBNET_STRING=t.RE_ADDRESS=t.GROUPS=t.BITS=void 0,t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/},9727:()=>{},9777:function(e,t,r){"use strict";var s,n=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(s=function(e){return s=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},s(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=s(e),o=0;o<r.length;o++)"default"!==r[o]&&n(t,e,r[o]);return i(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const c=a(r(1278)),l=r(4478),u=a(r(3885)),h=a(r(8539)),d=o(r(128)),f=a(r(7969)),p=a(r(6912)),g=a(r(579)),b=a(r(2639)),_=r(4723),m=r(4152),y=a(r(3175)),S=o(r(6887)),w=globalThis.setImmediate||((...e)=>{const t=e.shift();(0,_.nextTick)(()=>{t(...e)})}),v={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"};class E extends m.TypedEventEmitter{static VERSION=_.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(e,t){super(),this.options=t||{};for(const e in v)void 0===this.options[e]?this.options[e]=v[e]:this.options[e]=t[e];this.log=this.options.log||(0,h.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",E.VERSION),S.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",S.default?"browser":"node"),this.log("MqttClient :: options.protocol",t.protocol),this.log("MqttClient :: options.protocolVersion",t.protocolVersion),this.log("MqttClient :: options.username",t.username),this.log("MqttClient :: options.keepalive",t.keepalive),this.log("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",t.properties?t.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof t.clientId?t.clientId:E.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:(...e)=>{e[3](null,0)},this.options.writeCache||(c.default.writeToStream.cacheNumbers=!1),this.streamBuilder=e,this.messageIdProvider=void 0===this.options.messageIdProvider?new g.default:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new f.default,this.incomingStore=t.incomingStore||new f.default,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,t.properties&&t.properties.topicAliasMaximum>0&&(t.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new b.default(t.properties.topicAliasMaximum)),this.on("connect",()=>{const{queue:e}=this,t=()=>{const r=e.shift();this.log("deliver :: entry %o",r);let s=null;if(!r)return void this._resubscribe();s=r.packet,this.log("deliver :: call _sendPacket for %o",s);let n=!0;s.messageId&&0!==s.messageId&&(this.messageIdProvider.register(s.messageId)||(n=!1)),n?this._sendPacket(s,e=>{r.cb&&r.cb(e),t()}):(this.log("messageId: %d has already used. The message is skipped and removed.",s.messageId),t())};this.log("connect :: sending queued packets"),t()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,t){t()}handleMessage(e,t){t()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){const e=new l.Writable,t=c.default.parser(this.options);let r=null;const s=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),t.on("packet",e=>{this.log("parser :: on packet push to packets array."),s.push(e)});const n=()=>{this.log("work :: getting next packet in queue");const e=s.shift();if(e)this.log("work :: packet pulled from queue"),(0,p.default)(this,e,i);else{this.log("work :: no packets in queue");const e=r;r=null,this.log("work :: done flag is %s",!!e),e&&e()}},i=()=>{if(s.length)(0,_.nextTick)(n);else{const e=r;r=null,e()}};e._write=(e,s,i)=>{r=i,this.log("writable stream :: parsing buffer"),t.parse(e),n()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",e=>{this.log("streamErrorHandler :: error",e.message),e.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",e)):this.noop(e)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");const o={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(o.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(o.properties||(o.properties={}),this.topicAliasRecv&&(o.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(o),t.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){const e={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(e)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(e,t,r,s){this.log("publish :: message `%s` to topic `%s`",t,e);const{options:n}=this;"function"==typeof r&&(s=r,r=null),r=r||{},r={qos:0,retain:!1,dup:!1,...r};const{qos:i,retain:o,dup:a,properties:c,cbStorePut:l}=r;if(this._checkDisconnecting(s))return this;const u=()=>{let r=0;if((1===i||2===i)&&(r=this._nextId(),null===r))return this.log("No messageId left"),!1;const u={cmd:"publish",topic:e,payload:t,qos:i,retain:o,messageId:r,dup:a};switch(5===n.protocolVersion&&(u.properties=c),this.log("publish :: qos",i),i){case 1:case 2:this.outgoing[u.messageId]={volatile:!1,cb:s||this.noop},this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,void 0,l);break;default:this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,s,l)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!u())&&this._storeProcessingQueue.push({invoke:u,cbStorePut:r.cbStorePut,callback:s}),this}publishAsync(e,t,r){return new Promise((s,n)=>{this.publish(e,t,r,(e,t)=>{e?n(e):s(t)})})}subscribe(e,t,r){const s=this.options.protocolVersion;"function"==typeof t&&(r=t),r=r||this.noop;let n=!1,i=[];"string"==typeof e?i=e=[e]:Array.isArray(e)?i=e:"object"==typeof e&&(n=e.resubscribe,delete e.resubscribe,i=Object.keys(e));const o=d.validateTopics(i);if(null!==o)return w(r,new Error(`Invalid topic ${o}`)),this;if(this._checkDisconnecting(r))return this.log("subscribe: discconecting true"),this;const a={qos:0};5===s&&(a.nl=!1,a.rap=!1,a.rh=0),t={...a,...t};const{properties:c}=t,l=[],u=(e,r)=>{if(r=r||t,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,e)||this._resubscribeTopics[e].qos<r.qos||n){const t={topic:e,qos:r.qos};5===s&&(t.nl=r.nl,t.rap=r.rap,t.rh=r.rh,t.properties=c),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),l.push(t)}};if(Array.isArray(e)?e.forEach(e=>{this.log("subscribe: array topic %s",e),u(e)}):Object.keys(e).forEach(t=>{this.log("subscribe: object topic %s, %o",t,e[t]),u(t,e[t])}),!l.length)return r(null,[]),this;const h=(e,t)=>{const r={cmd:"subscribe",subscriptions:e,messageId:t};if(c&&(r.properties=c),this.options.resubscribe){this.log("subscribe :: resubscribe true");const t=[];e.forEach(e=>{if(this.options.reconnectPeriod>0){const r={qos:e.qos};5===s&&(r.nl=e.nl||!1,r.rap=e.rap||!1,r.rh=e.rh||0,r.properties=e.properties),this._resubscribeTopics[e.topic]=r,t.push(e.topic)}}),this.messageIdToTopic[r.messageId]=t}const n=new Promise((t,s)=>{this.outgoing[r.messageId]={volatile:!0,cb(r,n){if(!r){const{granted:t}=n;for(let r=0;r<t.length;r+=1)e[r].qos=t[r]}r?s(new _.ErrorWithSubackPacket(r.message,n)):t(n)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(r),n},f=()=>{const e=this.options.subscribeBatchSize??l.length,t=[];for(let r=0;r<l.length;r+=e){const s=l.slice(r,r+e),n=this._nextId();if(null===n)return this.log("No messageId left"),!1;t.push(h(s,n))}return Promise.all(t).then(e=>{r(null,l,e.at(-1))}).catch(e=>{r(e,l,e.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!f())&&this._storeProcessingQueue.push({invoke:f,callback:r}),this}subscribeAsync(e,t){return new Promise((r,s)=>{this.subscribe(e,t,(e,t)=>{e?s(e):r(t)})})}unsubscribe(e,t,r){"string"==typeof e&&(e=[e]),"function"==typeof t&&(r=t),r=r||this.noop;const s=d.validateTopics(e);if(null!==s)return w(r,new Error(`Invalid topic ${s}`)),this;if(this._checkDisconnecting(r))return this;const n=()=>{const s=this._nextId();if(null===s)return this.log("No messageId left"),!1;const n={cmd:"unsubscribe",messageId:s,unsubscriptions:[]};return"string"==typeof e?n.unsubscriptions=[e]:Array.isArray(e)&&(n.unsubscriptions=e),this.options.resubscribe&&n.unsubscriptions.forEach(e=>{delete this._resubscribeTopics[e]}),"object"==typeof t&&t.properties&&(n.properties=t.properties),this.outgoing[n.messageId]={volatile:!0,cb:r},this.log("unsubscribe: call _sendPacket"),this._sendPacket(n),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!n())&&this._storeProcessingQueue.push({invoke:n,callback:r}),this}unsubscribeAsync(e,t){return new Promise((r,s)=>{this.unsubscribe(e,t,(e,t)=>{e?s(e):r(t)})})}end(e,t,r){this.log("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(r=r||t,t=e,e=!1),"object"!=typeof t&&(r=r||t,t=null),this.log("end :: cb? %s",!!r),r&&"function"==typeof r||(r=this.noop);const s=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(e=>{this.outgoingStore.close(t=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),r){const s=e||t;this.log("end :: closeStores: invoking callback with args"),r(s)}})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},n=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,_.nextTick)(s)},t)};return this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,n,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),n()),this)}endAsync(e,t){return new Promise((r,s)=>{this.end(e,t,e=>{e?s(e):r()})})}removeOutgoingMessage(e){if(this.outgoing[e]){const{cb:t}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,()=>{t(new Error("Message removed"))})}return this}reconnect(e){this.log("client reconnect");const t=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=t:t(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(e=>{this.outgoing[e].volatile&&"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(e=>{"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_removeTopicAliasAndRecoverTopicName(e){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",t,r),0===r.length){if(void 0===t)return new Error("Unregistered Topic Alias");if(r=this.topicAliasSend.getTopicByAlias(t),void 0===r)return new Error("Unregistered Topic Alias");e.topic=r}t&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,t,r={}){if(t&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),this.log("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const e={cmd:"disconnect",...r};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),w(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}this.disconnecting||this.reconnecting||(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),t&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())}_storeAndSend(e,t,r){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let s,n=e;if("publish"===n.cmd&&(n=(0,u.default)(e),s=this._removeTopicAliasAndRecoverTopicName(n),s))return t&&t(s);this.outgoingStore.put(n,s=>{if(s)return t&&t(s);r(),this._writePacket(e,t)})}_applyTopicAlias(e){if(5===this.options.protocolVersion&&"publish"===e.cmd){let t;e.properties&&(t=e.properties.topicAlias);const r=e.topic.toString();if(this.topicAliasSend)if(t){if(0!==r.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",r,t),!this.topicAliasSend.put(r,t)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(this.options.autoAssignTopicAlias?(t=this.topicAliasSend.getAliasByTopic(r),t?(e.topic="",e.properties={...e.properties,topicAlias:t},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,t)):(t=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(r,t),e.properties={...e.properties,topicAlias:t},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",r,t))):this.options.autoUseTopicAlias&&(t=this.topicAliasSend.getAliasByTopic(r),t&&(e.topic="",e.properties={...e.properties,topicAlias:t},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",r,t))));else if(t)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,t){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");const r=c.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",r),!r&&t&&t!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",t)):t&&(this.log("_writePacket :: invoking cb"),t())}_sendPacket(e,t,r,s){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||this.noop,t=t||this.noop;const n=this._applyTopicAlias(e);if(n)t(n);else{if(!this.connected)return"auth"===e.cmd?void this._writePacket(e,t):(this.log("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));if(s)this._writePacket(e,t);else{switch(e.cmd){case"publish":break;case"pubrel":return void this._storeAndSend(e,t,r);default:return void this._writePacket(e,t)}switch(e.qos){case 2:case 1:this._storeAndSend(e,t,r);break;default:this._writePacket(e,t)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}}}_storePacket(e,t,r){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!t),r=r||this.noop;let s=e;if("publish"===s.cmd){s=(0,u.default)(e);const r=this._removeTopicAliasAndRecoverTopicName(s);if(r)return t&&t(r)}const n=s.qos||0;0===n&&this.queueQoSZero||"publish"!==s.cmd?this.queue.push({packet:s,cb:t}):n>0?(t=this.outgoing[s.messageId]?this.outgoing[s.messageId].cb:null,this.outgoingStore.put(s,e=>{if(e)return t&&t(e);r()})):t&&t(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new y.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(e=!1){this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");const e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){const r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected)return void this.emit("connect",e);this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;const t=()=>{let r=this.outgoingStore.createStream();const s=()=>{r.destroy(),r=null,this._flushStoreProcessingQueue(),n()},n=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",s),r.on("error",e=>{n(),this._flushStoreProcessingQueue(),this.removeListener("close",s),this.emit("error",e)});const i=()=>{if(!r)return;const e=r.read(1);let t;e?(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[e.messageId]?i():this.disconnecting||this.reconnectTimer?r.destroy&&r.destroy():(t=this.outgoing[e.messageId]?this.outgoing[e.messageId].cb:null,this.outgoing[e.messageId]={volatile:!1,cb(e,r){t&&t(e,r),i()}},this._packetIdsDuringStoreProcessing[e.messageId]=!0,this.messageIdProvider.register(e.messageId)?this._sendPacket(e,void 0,void 0,!0):this.log("messageId: %d has already used.",e.messageId))):r.once("readable",i)};r.on("end",()=>{let r=!0;for(const e in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[e]){r=!1;break}this.removeListener("close",s),r?(n(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):t()}),i()};t()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){const e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,t){delete this.outgoing[e],this.outgoingStore.del({messageId:e},(r,s)=>{t(r,s),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()})}}t.default=E},9844:e=>{"use strict";function t(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}e.exports=function(e){if((e=e||{}).circles)return function(e){const r=[],s=[],n=new Map;if(n.set(Date,e=>new Date(e)),n.set(Map,(e,t)=>new Map(o(Array.from(e),t))),n.set(Set,(e,t)=>new Set(o(Array.from(e),t))),e.constructorHandlers)for(const t of e.constructorHandlers)n.set(t[0],t[1]);let i=null;return e.proto?function e(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return o(a,e);if(a.constructor!==Object&&(i=n.get(a.constructor)))return i(a,e);const c={};r.push(a),s.push(c);for(const o in a){const l=a[o];if("object"!=typeof l||null===l)c[o]=l;else if(l.constructor!==Object&&(i=n.get(l.constructor)))c[o]=i(l,e);else if(ArrayBuffer.isView(l))c[o]=t(l);else{const t=r.indexOf(l);c[o]=-1!==t?s[t]:e(l)}}return r.pop(),s.pop(),c}:function e(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return o(a,e);if(a.constructor!==Object&&(i=n.get(a.constructor)))return i(a,e);const c={};r.push(a),s.push(c);for(const o in a){if(!1===Object.hasOwnProperty.call(a,o))continue;const l=a[o];if("object"!=typeof l||null===l)c[o]=l;else if(l.constructor!==Object&&(i=n.get(l.constructor)))c[o]=i(l,e);else if(ArrayBuffer.isView(l))c[o]=t(l);else{const t=r.indexOf(l);c[o]=-1!==t?s[t]:e(l)}}return r.pop(),s.pop(),c};function o(e,o){const a=Object.keys(e),c=new Array(a.length);for(let l=0;l<a.length;l++){const u=a[l],h=e[u];if("object"!=typeof h||null===h)c[u]=h;else if(h.constructor!==Object&&(i=n.get(h.constructor)))c[u]=i(h,o);else if(ArrayBuffer.isView(h))c[u]=t(h);else{const e=r.indexOf(h);c[u]=-1!==e?s[e]:o(h)}}return c}}(e);const r=new Map;if(r.set(Date,e=>new Date(e)),r.set(Map,(e,t)=>new Map(n(Array.from(e),t))),r.set(Set,(e,t)=>new Set(n(Array.from(e),t))),e.constructorHandlers)for(const t of e.constructorHandlers)r.set(t[0],t[1]);let s=null;return e.proto?function e(i){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return n(i,e);if(i.constructor!==Object&&(s=r.get(i.constructor)))return s(i,e);const o={};for(const n in i){const a=i[n];"object"!=typeof a||null===a?o[n]=a:a.constructor!==Object&&(s=r.get(a.constructor))?o[n]=s(a,e):ArrayBuffer.isView(a)?o[n]=t(a):o[n]=e(a)}return o}:function e(i){if("object"!=typeof i||null===i)return i;if(Array.isArray(i))return n(i,e);if(i.constructor!==Object&&(s=r.get(i.constructor)))return s(i,e);const o={};for(const n in i){if(!1===Object.hasOwnProperty.call(i,n))continue;const a=i[n];"object"!=typeof a||null===a?o[n]=a:a.constructor!==Object&&(s=r.get(a.constructor))?o[n]=s(a,e):ArrayBuffer.isView(a)?o[n]=t(a):o[n]=e(a)}return o};function n(e,n){const i=Object.keys(e),o=new Array(i.length);for(let a=0;a<i.length;a++){const c=i[a],l=e[c];"object"!=typeof l||null===l?o[c]=l:l.constructor!==Object&&(s=r.get(l.constructor))?o[c]=s(l,n):ArrayBuffer.isView(l)?o[c]=t(l):o[c]=n(l)}return o}}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{"use strict";r.d(s,{default:()=>o});const e=require("@directus/extensions-sdk");var t=r(9372);const n="directus",i=r.n(t)().connect("mqtt://emqx:1883",{clientId:`directus_client_${Math.random().toString(16).slice(3)}`});i.on("connect",()=>{console.log("Connected to EMQX MQTT broker")});const o=(0,e.defineHook)(({action:e})=>{console.log(" Directus MQTT Hook plugin loaded successfully!");const t=["boutiques","categories","customers"];console.log(" Monitoring collections:",t),console.log(" Registering GENERIC items.create hook"),e("items.create",async e=>{console.log(" GENERIC CREATE hook triggered!",{collection:e.collection,key:e.key,hasAccountability:!!e.accountability,hasServices:!!e.services,eventKeys:Object.keys(e)}),console.log(" Full event object:",JSON.stringify(e,null,2))}),t.forEach(t=>{console.log(` Registering CREATE hook for: items.create.${t}`),e(`items.create.${t}`,async e=>{console.log(` CREATE hook triggered for ${t}! Key: ${e.key}`),console.log(` Event keys for ${t}:`,Object.keys(e));const{payload:r,key:s,accountability:o,services:a}=e;try{if(!a)return console.log(` No services available for ${t}, sending basic payload`),void i.publish(`${n}/${t}/unknown/create`,JSON.stringify({payload:r,key:s}));const{ItemsService:e}=a,c=new e(t,{accountability:o}),l=await c.readOne(s,{fields:["*"]}),u=l.user_created?String(l.user_created):"unknown";console.log(`[CREATE][RAW] ${t}:`,JSON.stringify(r,null,2)),console.log(`[CREATE][FULL] ${t}:`,JSON.stringify(l,null,2)),console.log(`[CREATE][USER] ${t}: record.user_created = ${u}`),i.publish(`${n}/${t}/${u}/create`,JSON.stringify({payload:r,item:l,user_created:l.user_created}))}catch(e){console.error(`[CREATE][ERROR] ${t}:`,e);const s=(null==o?void 0:o.user)?String(o.user):"unknown";i.publish(`${n}/${t}/${s}/create`,JSON.stringify(r))}}),console.log(` Registering UPDATE hook for: items.update.${t}`),e(`items.update.${t}`,async({payload:e,keys:r,accountability:s,services:o})=>{console.log(` UPDATE hook triggered for ${t}! Keys:`,r);try{const{ItemsService:a}=o,c=new a(t,{accountability:s}),l=Array.isArray(r)?r:[r];for(const r of l)try{const s=await c.readOne(r,{fields:["user_created"]}),o=s.user_created?String(s.user_created):"unknown";console.log(`[UPDATE][RAW] ${t}:`,JSON.stringify({keys:r,payload:e},null,2)),console.log(`[UPDATE][USER] ${t}: record.user_created = ${o}`),i.publish(`${n}/${t}/${o}/update`,JSON.stringify({keys:r,payload:e,user_created:s.user_created}))}catch(o){console.error(`[UPDATE][ITEM_ERROR] ${t} key ${r}:`,o);const a=(null==s?void 0:s.user)?String(s.user):"unknown";i.publish(`${n}/${t}/${a}/update`,JSON.stringify({keys:r,payload:e}))}}catch(o){console.error(`[UPDATE][ERROR] ${t}:`,o);const a=(null==s?void 0:s.user)?String(s.user):"unknown";i.publish(`${n}/${t}/${a}/update`,JSON.stringify({keys:r,payload:e}))}}),console.log(` Registering DELETE hook for: items.delete.${t}`),e(`items.delete.${t}`,async({keys:e,payload:r,accountability:s,services:o})=>{console.log(` DELETE hook triggered for ${t}! Keys:`,e);try{const{ItemsService:a}=o,c=new a(t,{accountability:s}),l=Array.isArray(e)?e:[e];for(const e of l)try{const s=await c.readOne(e,{fields:["user_created"]}),o=s.user_created?String(s.user_created):"unknown";console.log(`[DELETE][RAW] ${t}:`,JSON.stringify({keys:e,payload:r},null,2)),console.log(`[DELETE][USER] ${t}: record.user_created = ${o}`),i.publish(`${n}/${t}/${o}/delete`,JSON.stringify({keys:e,payload:r,user_created:s.user_created}))}catch(o){console.error(`[DELETE][ITEM_ERROR] ${t} key ${e}:`,o);const a=(null==s?void 0:s.user)?String(s.user):"unknown";i.publish(`${n}/${t}/${a}/delete`,JSON.stringify({keys:e,payload:r}))}}catch(o){console.error(`[DELETE][ERROR] ${t}:`,o);const a=(null==s?void 0:s.user)?String(s.user):"unknown";i.publish(`${n}/${t}/${a}/delete`,JSON.stringify({keys:e,payload:r}))}})})})})(),module.exports=s.default})();